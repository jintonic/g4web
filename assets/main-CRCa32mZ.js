import{E as d,V as c,M as l,T as u,S as f,R as g}from"./three-editor-CtR3j_K9.js";import{T as p,W as m}from"./three-module-Bgl_dleh.js";import"./three-core-B2VhXfyC.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const t of n)if(t.type==="childList")for(const i of t.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function r(n){const t={};return n.integrity&&(t.integrity=n.integrity),n.referrerPolicy&&(t.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?t.credentials="include":n.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function s(n){if(n.ep)return;n.ep=!0;const t=r(n);fetch(n.href,t)}})();function h(o){o.storage.init(function(){o.storage.get(async function(t){t!==void 0?await o.fromJSON(t):o.signals.sceneEnvironmentChanged.dispatch("Default");const i=o.config.getKey("selected");i!==void 0&&o.selectByUuid(i)});let e;function r(){o.config.getKey("autosave")!==!1&&(clearTimeout(e),e=setTimeout(function(){o.signals.savingStarted.dispatch(),setTimeout(function(){o.storage.set(o.toJSON()),o.signals.savingFinished.dispatch()},100)},1e3))}const s=o.signals;[s.geometryChanged,s.objectAdded,s.objectChanged,s.objectRemoved,s.materialChanged,s.sceneBackgroundChanged,s.sceneEnvironmentChanged,s.sceneFogChanged,s.sceneGraphChanged,s.scriptChanged,s.historyChanged].forEach(t=>t.add(r))})}class y{constructor(e){this.editor=e,this.loader=e.loader,this.init()}init(){document.addEventListener("dragover",e=>{e.preventDefault(),e.dataTransfer.dropEffect="copy"}),document.addEventListener("drop",e=>{e.preventDefault(),e.dataTransfer.types.includes("Files")&&this.loader.loadFiles(e.dataTransfer.files)})}}const a=new d;window.editor=a;console.log("create editor UI");const b=new c(a),w=new l(a),v=new u(a),C=new f(a),E=new g(a);document.body.appendChild(b.dom);document.body.appendChild(w.dom);document.body.appendChild(v.dom);document.body.appendChild(C.dom);document.body.appendChild(E.dom);window.THREE=p;a.signals.rendererCreated.dispatch(new m({antialias:!0}));window.addEventListener("resize",()=>a.signals.windowResize.dispatch());a.signals.windowResize.dispatch();console.log("editor UI created");console.log("enable auto save");h(a);console.log("auto save enabled");console.log("enable file drop");new y(a);console.log("file drop enabled");
