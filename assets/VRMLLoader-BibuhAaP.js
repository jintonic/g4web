import"./three-module-Bgl_dleh.js";import{a4 as Ze,a5 as St,a6 as Pt,V as Ve,e as He,ae as bt,m as Ct,q as ft,G as Et,g as pt,d as nt,aH as Tt,Z as Ye,c as ht,P as xt,b as Mt,r as wt,ar as Ft,aF as Dt,y as Ut,b5 as Vt,o as qe,bD as Bt,al as rt,f as Gt,U as jt,at as Wt,u as Qe,F as we,t as zt,ea as Kt,s as Ht,Q as Yt,fA as Xt,aE as gt,a3 as qt,an as ot}from"./three-core-B2VhXfyC.js";/*! chevrotain - v9.0.1 */var Te=(e,h)=>()=>(h||(h={exports:{}},e(h.exports,h)),h.exports),Rt=Te(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VERSION=void 0,e.VERSION="9.0.1"}),ke=Te((e,h)=>{var r=e&&e.__spreadArray||function(M,K){for(var G=0,Z=K.length,fe=M.length;G<Z;G++,fe++)M[fe]=K[G];return M};Object.defineProperty(e,"__esModule",{value:!0}),e.toFastProperties=e.timer=e.peek=e.isES2015MapSupported=e.PRINT_WARNING=e.PRINT_ERROR=e.packArray=e.IDENTITY=e.NOOP=e.merge=e.groupBy=e.defaults=e.assignNoOverwrite=e.assign=e.zipObject=e.sortBy=e.indexOf=e.some=e.difference=e.every=e.isObject=e.isRegExp=e.isArray=e.partial=e.uniq=e.compact=e.reduce=e.findAll=e.find=e.cloneObj=e.cloneArr=e.contains=e.has=e.pick=e.reject=e.filter=e.dropRight=e.drop=e.isFunction=e.isUndefined=e.isString=e.forEach=e.last=e.first=e.flatten=e.map=e.mapValues=e.values=e.keys=e.isEmpty=void 0;function E(M){return M&&M.length===0}e.isEmpty=E;function m(M){return M==null?[]:Object.keys(M)}e.keys=m;function I(M){for(var K=[],G=Object.keys(M),Z=0;Z<G.length;Z++)K.push(M[G[Z]]);return K}e.values=I;function u(M,K){for(var G=[],Z=m(M),fe=0;fe<Z.length;fe++){var Ae=Z[fe];G.push(K.call(null,M[Ae],Ae))}return G}e.mapValues=u;function y(M,K){for(var G=[],Z=0;Z<M.length;Z++)G.push(K.call(null,M[Z],Z));return G}e.map=y;function o(M){for(var K=[],G=0;G<M.length;G++){var Z=M[G];Array.isArray(Z)?K=K.concat(o(Z)):K.push(Z)}return K}e.flatten=o;function t(M){return E(M)?void 0:M[0]}e.first=t;function l(M){var K=M&&M.length;return K?M[K-1]:void 0}e.last=l;function s(M,K){if(Array.isArray(M))for(var G=0;G<M.length;G++)K.call(null,M[G],G);else if(q(M))for(var Z=m(M),G=0;G<Z.length;G++){var fe=Z[G],Ae=M[fe];K.call(null,Ae,fe)}else throw Error("non exhaustive match")}e.forEach=s;function g(M){return typeof M=="string"}e.isString=g;function f(M){return M===void 0}e.isUndefined=f;function v(M){return M instanceof Function}e.isFunction=v;function p(M,K){return K===void 0&&(K=1),M.slice(K,M.length)}e.drop=p;function n(M,K){return K===void 0&&(K=1),M.slice(0,M.length-K)}e.dropRight=n;function i(M,K){var G=[];if(Array.isArray(M))for(var Z=0;Z<M.length;Z++){var fe=M[Z];K.call(null,fe)&&G.push(fe)}return G}e.filter=i;function a(M,K){return i(M,function(G){return!K(G)})}e.reject=a;function d(M,K){for(var G=Object.keys(M),Z={},fe=0;fe<G.length;fe++){var Ae=G[fe],me=M[Ae];K(me)&&(Z[Ae]=me)}return Z}e.pick=d;function c(M,K){return q(M)?M.hasOwnProperty(K):!1}e.has=c;function b(M,K){return Y(M,function(G){return G===K})!==void 0}e.contains=b;function D(M){for(var K=[],G=0;G<M.length;G++)K.push(M[G]);return K}e.cloneArr=D;function w(M){var K={};for(var G in M)Object.prototype.hasOwnProperty.call(M,G)&&(K[G]=M[G]);return K}e.cloneObj=w;function Y(M,K){for(var G=0;G<M.length;G++){var Z=M[G];if(K.call(null,Z))return Z}}e.find=Y;function _(M,K){for(var G=[],Z=0;Z<M.length;Z++){var fe=M[Z];K.call(null,fe)&&G.push(fe)}return G}e.findAll=_;function B(M,K,G){for(var Z=Array.isArray(M),fe=Z?M:I(M),Ae=Z?[]:m(M),me=G,T=0;T<fe.length;T++)me=K.call(null,me,fe[T],Z?T:Ae[T]);return me}e.reduce=B;function x(M){return a(M,function(K){return K==null})}e.compact=x;function N(M,K){K===void 0&&(K=function(Z){return Z});var G=[];return B(M,function(Z,fe){var Ae=K(fe);return b(G,Ae)?Z:(G.push(Ae),Z.concat(fe))},[])}e.uniq=N;function C(M){for(var K=[],G=1;G<arguments.length;G++)K[G-1]=arguments[G];var Z=[null],fe=Z.concat(K);return Function.bind.apply(M,fe)}e.partial=C;function L(M){return Array.isArray(M)}e.isArray=L;function H(M){return M instanceof RegExp}e.isRegExp=H;function q(M){return M instanceof Object}e.isObject=q;function W(M,K){for(var G=0;G<M.length;G++)if(!K(M[G],G))return!1;return!0}e.every=W;function $(M,K){return a(M,function(G){return b(K,G)})}e.difference=$;function ee(M,K){for(var G=0;G<M.length;G++)if(K(M[G]))return!0;return!1}e.some=ee;function se(M,K){for(var G=0;G<M.length;G++)if(M[G]===K)return G;return-1}e.indexOf=se;function ie(M,K){var G=D(M);return G.sort(function(Z,fe){return K(Z)-K(fe)}),G}e.sortBy=ie;function ce(M,K){if(M.length!==K.length)throw Error("can't zipObject with different number of keys and values!");for(var G={},Z=0;Z<M.length;Z++)G[M[Z]]=K[Z];return G}e.zipObject=ce;function ue(M){for(var K=[],G=1;G<arguments.length;G++)K[G-1]=arguments[G];for(var Z=0;Z<K.length;Z++)for(var fe=K[Z],Ae=m(fe),me=0;me<Ae.length;me++){var T=Ae[me];M[T]=fe[T]}return M}e.assign=ue;function ne(M){for(var K=[],G=1;G<arguments.length;G++)K[G-1]=arguments[G];for(var Z=0;Z<K.length;Z++)for(var fe=K[Z],Ae=m(fe),me=0;me<Ae.length;me++){var T=Ae[me];c(M,T)||(M[T]=fe[T])}return M}e.assignNoOverwrite=ne;function F(){for(var M=[],K=0;K<arguments.length;K++)M[K]=arguments[K];return ne.apply(void 0,r([{}],M))}e.defaults=F;function V(M,K){var G={};return s(M,function(Z){var fe=K(Z),Ae=G[fe];Ae?Ae.push(Z):G[fe]=[Z]}),G}e.groupBy=V;function z(M,K){for(var G=w(M),Z=m(K),fe=0;fe<Z.length;fe++){var Ae=Z[fe],me=K[Ae];G[Ae]=me}return G}e.merge=z;function X(){}e.NOOP=X;function Q(M){return M}e.IDENTITY=Q;function re(M){for(var K=[],G=0;G<M.length;G++){var Z=M[G];K.push(Z!==void 0?Z:void 0)}return K}e.packArray=re;function ve(M){console&&console.error&&console.error("Error: "+M)}e.PRINT_ERROR=ve;function Ee(M){console&&console.warn&&console.warn("Warning: "+M)}e.PRINT_WARNING=Ee;function Re(){return typeof Map=="function"}e.isES2015MapSupported=Re;function De(M){return M[M.length-1]}e.peek=De;function Be(M){var K=new Date().getTime(),G=M(),Z=new Date().getTime(),fe=Z-K;return{time:fe,value:G}}e.timer=Be;function Me(M){function K(){}K.prototype=M;var G=new K;function Z(){return typeof G.bar}return Z(),Z(),M}e.toFastProperties=Me}),dt=Te((e,h)=>{(function(r,E){typeof define=="function"&&define.amd?define([],E):typeof h=="object"&&h.exports?h.exports=E():r.regexpToAst=E()})(typeof self<"u"?self:e,function(){function r(){}r.prototype.saveState=function(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}},r.prototype.restoreState=function(n){this.idx=n.idx,this.input=n.input,this.groupIdx=n.groupIdx},r.prototype.pattern=function(n){this.idx=0,this.input=n,this.groupIdx=0,this.consumeChar("/");var i=this.disjunction();this.consumeChar("/");for(var a={type:"Flags",loc:{begin:this.idx,end:n.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};this.isRegExpFlag();)switch(this.popChar()){case"g":o(a,"global");break;case"i":o(a,"ignoreCase");break;case"m":o(a,"multiLine");break;case"u":o(a,"unicode");break;case"y":o(a,"sticky");break}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:a,value:i,loc:this.loc(0)}},r.prototype.disjunction=function(){var n=[],i=this.idx;for(n.push(this.alternative());this.peekChar()==="|";)this.consumeChar("|"),n.push(this.alternative());return{type:"Disjunction",value:n,loc:this.loc(i)}},r.prototype.alternative=function(){for(var n=[],i=this.idx;this.isTerm();)n.push(this.term());return{type:"Alternative",value:n,loc:this.loc(i)}},r.prototype.term=function(){return this.isAssertion()?this.assertion():this.atom()},r.prototype.assertion=function(){var n=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(n)};case"$":return{type:"EndAnchor",loc:this.loc(n)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(n)};case"B":return{type:"NonWordBoundary",loc:this.loc(n)}}throw Error("Invalid Assertion Escape");case"(":this.consumeChar("?");var i;switch(this.popChar()){case"=":i="Lookahead";break;case"!":i="NegativeLookahead";break}t(i);var a=this.disjunction();return this.consumeChar(")"),{type:i,value:a,loc:this.loc(n)}}l()},r.prototype.quantifier=function(n){var i,a=this.idx;switch(this.popChar()){case"*":i={atLeast:0,atMost:1/0};break;case"+":i={atLeast:1,atMost:1/0};break;case"?":i={atLeast:0,atMost:1};break;case"{":var d=this.integerIncludingZero();switch(this.popChar()){case"}":i={atLeast:d,atMost:d};break;case",":var c;this.isDigit()?(c=this.integerIncludingZero(),i={atLeast:d,atMost:c}):i={atLeast:d,atMost:1/0},this.consumeChar("}");break}if(n===!0&&i===void 0)return;t(i);break}if(!(n===!0&&i===void 0))return t(i),this.peekChar(0)==="?"?(this.consumeChar("?"),i.greedy=!1):i.greedy=!0,i.type="Quantifier",i.loc=this.loc(a),i},r.prototype.atom=function(){var n,i=this.idx;switch(this.peekChar()){case".":n=this.dotAll();break;case"\\":n=this.atomEscape();break;case"[":n=this.characterClass();break;case"(":n=this.group();break}return n===void 0&&this.isPatternCharacter()&&(n=this.patternCharacter()),t(n),n.loc=this.loc(i),this.isQuantifier()&&(n.quantifier=this.quantifier()),n},r.prototype.dotAll=function(){return this.consumeChar("."),{type:"Set",complement:!0,value:[u(`
`),u("\r"),u("\u2028"),u("\u2029")]}},r.prototype.atomEscape=function(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}},r.prototype.decimalEscapeAtom=function(){var n=this.positiveInteger();return{type:"GroupBackReference",value:n}},r.prototype.characterClassEscape=function(){var n,i=!1;switch(this.popChar()){case"d":n=g;break;case"D":n=g,i=!0;break;case"s":n=v;break;case"S":n=v,i=!0;break;case"w":n=f;break;case"W":n=f,i=!0;break}return t(n),{type:"Set",value:n,complement:i}},r.prototype.controlEscapeAtom=function(){var n;switch(this.popChar()){case"f":n=u("\f");break;case"n":n=u(`
`);break;case"r":n=u("\r");break;case"t":n=u("	");break;case"v":n=u("\v");break}return t(n),{type:"Character",value:n}},r.prototype.controlLetterEscapeAtom=function(){this.consumeChar("c");var n=this.popChar();if(/[a-zA-Z]/.test(n)===!1)throw Error("Invalid ");var i=n.toUpperCase().charCodeAt(0)-64;return{type:"Character",value:i}},r.prototype.nulCharacterAtom=function(){return this.consumeChar("0"),{type:"Character",value:u("\0")}},r.prototype.hexEscapeSequenceAtom=function(){return this.consumeChar("x"),this.parseHexDigits(2)},r.prototype.regExpUnicodeEscapeSequenceAtom=function(){return this.consumeChar("u"),this.parseHexDigits(4)},r.prototype.identityEscapeAtom=function(){var n=this.popChar();return{type:"Character",value:u(n)}},r.prototype.classPatternCharacterAtom=function(){switch(this.peekChar()){case`
`:case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:var n=this.popChar();return{type:"Character",value:u(n)}}},r.prototype.characterClass=function(){var n=[],i=!1;for(this.consumeChar("["),this.peekChar(0)==="^"&&(this.consumeChar("^"),i=!0);this.isClassAtom();){var a=this.classAtom(),d=a.type==="Character";if(d&&this.isRangeDash()){this.consumeChar("-");var c=this.classAtom(),b=c.type==="Character";if(b){if(c.value<a.value)throw Error("Range out of order in character class");n.push({from:a.value,to:c.value})}else y(a.value,n),n.push(u("-")),y(c.value,n)}else y(a.value,n)}return this.consumeChar("]"),{type:"Set",complement:i,value:n}},r.prototype.classAtom=function(){switch(this.peekChar()){case"]":case`
`:case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}},r.prototype.classEscape=function(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:u("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}},r.prototype.group=function(){var n=!0;switch(this.consumeChar("("),this.peekChar(0)){case"?":this.consumeChar("?"),this.consumeChar(":"),n=!1;break;default:this.groupIdx++;break}var i=this.disjunction();this.consumeChar(")");var a={type:"Group",capturing:n,value:i};return n&&(a.idx=this.groupIdx),a},r.prototype.positiveInteger=function(){var n=this.popChar();if(I.test(n)===!1)throw Error("Expecting a positive integer");for(;m.test(this.peekChar(0));)n+=this.popChar();return parseInt(n,10)},r.prototype.integerIncludingZero=function(){var n=this.popChar();if(m.test(n)===!1)throw Error("Expecting an integer");for(;m.test(this.peekChar(0));)n+=this.popChar();return parseInt(n,10)},r.prototype.patternCharacter=function(){var n=this.popChar();switch(n){case`
`:case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:u(n)}}},r.prototype.isRegExpFlag=function(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}},r.prototype.isRangeDash=function(){return this.peekChar()==="-"&&this.isClassAtom(1)},r.prototype.isDigit=function(){return m.test(this.peekChar(0))},r.prototype.isClassAtom=function(n){switch(n===void 0&&(n=0),this.peekChar(n)){case"]":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}},r.prototype.isTerm=function(){return this.isAtom()||this.isAssertion()},r.prototype.isAtom=function(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}},r.prototype.isAssertion=function(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return this.peekChar(1)==="?"&&(this.peekChar(2)==="="||this.peekChar(2)==="!");default:return!1}},r.prototype.isQuantifier=function(){var n=this.saveState();try{return this.quantifier(!0)!==void 0}catch{return!1}finally{this.restoreState(n)}},r.prototype.isPatternCharacter=function(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}},r.prototype.parseHexDigits=function(n){for(var i="",a=0;a<n;a++){var d=this.popChar();if(E.test(d)===!1)throw Error("Expecting a HexDecimal digits");i+=d}var c=parseInt(i,16);return{type:"Character",value:c}},r.prototype.peekChar=function(n){return n===void 0&&(n=0),this.input[this.idx+n]},r.prototype.popChar=function(){var n=this.peekChar(0);return this.consumeChar(),n},r.prototype.consumeChar=function(n){if(n!==void 0&&this.input[this.idx]!==n)throw Error("Expected: '"+n+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++},r.prototype.loc=function(n){return{begin:n,end:this.idx}};var E=/[0-9a-fA-F]/,m=/[0-9]/,I=/[1-9]/;function u(n){return n.charCodeAt(0)}function y(n,i){n.length!==void 0?n.forEach(function(a){i.push(a)}):i.push(n)}function o(n,i){if(n[i]===!0)throw"duplicate flag "+i;n[i]=!0}function t(n){if(n===void 0)throw Error("Internal Error - Should never get here!")}function l(){throw Error("Internal Error - Should never get here!")}var s,g=[];for(s=u("0");s<=u("9");s++)g.push(s);var f=[u("_")].concat(g);for(s=u("a");s<=u("z");s++)f.push(s);for(s=u("A");s<=u("Z");s++)f.push(s);var v=[u(" "),u("\f"),u(`
`),u("\r"),u("	"),u("\v"),u("	"),u(" "),u(" "),u(" "),u(" "),u(" "),u(" "),u(" "),u(" "),u(" "),u(" "),u(" "),u(" "),u(" "),u("\u2028"),u("\u2029"),u(" "),u(" "),u("　"),u("\uFEFF")];function p(){}return p.prototype.visitChildren=function(n){for(var i in n){var a=n[i];n.hasOwnProperty(i)&&(a.type!==void 0?this.visit(a):Array.isArray(a)&&a.forEach(function(d){this.visit(d)},this))}},p.prototype.visit=function(n){switch(n.type){case"Pattern":this.visitPattern(n);break;case"Flags":this.visitFlags(n);break;case"Disjunction":this.visitDisjunction(n);break;case"Alternative":this.visitAlternative(n);break;case"StartAnchor":this.visitStartAnchor(n);break;case"EndAnchor":this.visitEndAnchor(n);break;case"WordBoundary":this.visitWordBoundary(n);break;case"NonWordBoundary":this.visitNonWordBoundary(n);break;case"Lookahead":this.visitLookahead(n);break;case"NegativeLookahead":this.visitNegativeLookahead(n);break;case"Character":this.visitCharacter(n);break;case"Set":this.visitSet(n);break;case"Group":this.visitGroup(n);break;case"GroupBackReference":this.visitGroupBackReference(n);break;case"Quantifier":this.visitQuantifier(n);break}this.visitChildren(n)},p.prototype.visitPattern=function(n){},p.prototype.visitFlags=function(n){},p.prototype.visitDisjunction=function(n){},p.prototype.visitAlternative=function(n){},p.prototype.visitStartAnchor=function(n){},p.prototype.visitEndAnchor=function(n){},p.prototype.visitWordBoundary=function(n){},p.prototype.visitNonWordBoundary=function(n){},p.prototype.visitLookahead=function(n){},p.prototype.visitNegativeLookahead=function(n){},p.prototype.visitCharacter=function(n){},p.prototype.visitSet=function(n){},p.prototype.visitGroup=function(n){},p.prototype.visitGroupBackReference=function(n){},p.prototype.visitQuantifier=function(n){},{RegExpParser:r,BaseRegExpVisitor:p,VERSION:"0.5.0"}})}),mt=Te(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.clearRegExpParserCache=e.getRegExpAst=void 0;var h=dt(),r={},E=new h.RegExpParser;function m(u){var y=u.toString();if(r.hasOwnProperty(y))return r[y];var o=E.pattern(y);return r[y]=o,o}e.getRegExpAst=m;function I(){r={}}e.clearRegExpParserCache=I}),Qt=Te(e=>{var h=e&&e.__extends||(function(){var p=function(n,i){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,d){a.__proto__=d}||function(a,d){for(var c in d)Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])},p(n,i)};return function(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");p(n,i);function a(){this.constructor=n}n.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)}})();Object.defineProperty(e,"__esModule",{value:!0}),e.canMatchCharCode=e.firstCharOptimizedIndices=e.getOptimizedStartCodesIndices=e.failedOptimizationPrefixMsg=void 0;var r=dt(),E=ke(),m=mt(),I=At(),u="Complement Sets are not supported for first char optimization";e.failedOptimizationPrefixMsg=`Unable to use "first char" lexer optimizations:
`;function y(p,n){n===void 0&&(n=!1);try{var i=m.getRegExpAst(p),a=o(i.value,{},i.flags.ignoreCase);return a}catch(c){if(c.message===u)n&&E.PRINT_WARNING(""+e.failedOptimizationPrefixMsg+("	Unable to optimize: < "+p.toString()+` >
`)+`	Complement Sets cannot be automatically optimized.
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.`);else{var d="";n&&(d=`
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details.`),E.PRINT_ERROR(e.failedOptimizationPrefixMsg+`
`+("	Failed parsing: < "+p.toString()+` >
`)+("	Using the regexp-to-ast library version: "+r.VERSION+`
`)+"	Please open an issue at: https://github.com/bd82/regexp-to-ast/issues"+d)}}return[]}e.getOptimizedStartCodesIndices=y;function o(p,n,i){switch(p.type){case"Disjunction":for(var a=0;a<p.value.length;a++)o(p.value[a],n,i);break;case"Alternative":for(var d=p.value,a=0;a<d.length;a++){var c=d[a];switch(c.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}var b=c;switch(b.type){case"Character":t(b.value,n,i);break;case"Set":if(b.complement===!0)throw Error(u);E.forEach(b.value,function(Y){if(typeof Y=="number")t(Y,n,i);else{var _=Y;if(i===!0)for(var B=_.from;B<=_.to;B++)t(B,n,i);else{for(var B=_.from;B<=_.to&&B<I.minOptimizationVal;B++)t(B,n,i);if(_.to>=I.minOptimizationVal)for(var x=_.from>=I.minOptimizationVal?_.from:I.minOptimizationVal,N=_.to,C=I.charCodeToOptimizedIndex(x),L=I.charCodeToOptimizedIndex(N),H=C;H<=L;H++)n[H]=H}}});break;case"Group":o(b.value,n,i);break;default:throw Error("Non Exhaustive Match")}var D=b.quantifier!==void 0&&b.quantifier.atLeast===0;if(b.type==="Group"&&g(b)===!1||b.type!=="Group"&&D===!1)break}break;default:throw Error("non exhaustive match!")}return E.values(n)}e.firstCharOptimizedIndices=o;function t(p,n,i){var a=I.charCodeToOptimizedIndex(p);n[a]=a,i===!0&&l(p,n)}function l(p,n){var i=String.fromCharCode(p),a=i.toUpperCase();if(a!==i){var d=I.charCodeToOptimizedIndex(a.charCodeAt(0));n[d]=d}else{var c=i.toLowerCase();if(c!==i){var d=I.charCodeToOptimizedIndex(c.charCodeAt(0));n[d]=d}}}function s(p,n){return E.find(p.value,function(i){if(typeof i=="number")return E.contains(n,i);var a=i;return E.find(n,function(d){return a.from<=d&&d<=a.to})!==void 0})}function g(p){return p.quantifier&&p.quantifier.atLeast===0?!0:p.value?E.isArray(p.value)?E.every(p.value,g):g(p.value):!1}var f=(function(p){h(n,p);function n(i){var a=p.call(this)||this;return a.targetCharCodes=i,a.found=!1,a}return n.prototype.visitChildren=function(i){if(this.found!==!0){switch(i.type){case"Lookahead":this.visitLookahead(i);return;case"NegativeLookahead":this.visitNegativeLookahead(i);return}p.prototype.visitChildren.call(this,i)}},n.prototype.visitCharacter=function(i){E.contains(this.targetCharCodes,i.value)&&(this.found=!0)},n.prototype.visitSet=function(i){i.complement?s(i,this.targetCharCodes)===void 0&&(this.found=!0):s(i,this.targetCharCodes)!==void 0&&(this.found=!0)},n})(r.BaseRegExpVisitor);function v(p,n){if(n instanceof RegExp){var i=m.getRegExpAst(n),a=new f(p);return a.visit(i),a.found}else return E.find(n,function(d){return E.contains(p,d.charCodeAt(0))})!==void 0}e.canMatchCharCode=v}),At=Te(e=>{var h=e&&e.__extends||(function(){var F=function(V,z){return F=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(X,Q){X.__proto__=Q}||function(X,Q){for(var re in Q)Object.prototype.hasOwnProperty.call(Q,re)&&(X[re]=Q[re])},F(V,z)};return function(V,z){if(typeof z!="function"&&z!==null)throw new TypeError("Class extends value "+String(z)+" is not a constructor or null");F(V,z);function X(){this.constructor=V}V.prototype=z===null?Object.create(z):(X.prototype=z.prototype,new X)}})();Object.defineProperty(e,"__esModule",{value:!0}),e.charCodeToOptimizedIndex=e.minOptimizationVal=e.buildLineBreakIssueMessage=e.LineTerminatorOptimizedTester=e.isShortPattern=e.isCustomPattern=e.cloneEmptyGroups=e.performWarningRuntimeChecks=e.performRuntimeChecks=e.addStickyFlag=e.addStartOfInput=e.findUnreachablePatterns=e.findModesThatDoNotExist=e.findInvalidGroupType=e.findDuplicatePatterns=e.findUnsupportedFlags=e.findStartOfInputAnchor=e.findEmptyMatchRegExps=e.findEndOfInputAnchor=e.findInvalidPatterns=e.findMissingPatterns=e.validatePatterns=e.analyzeTokenTypes=e.enableSticky=e.disableSticky=e.SUPPORT_STICKY=e.MODES=e.DEFAULT_MODE=void 0;var r=dt(),E=it(),m=ke(),I=Qt(),u=mt(),y="PATTERN";e.DEFAULT_MODE="defaultMode",e.MODES="modes",e.SUPPORT_STICKY=typeof new RegExp("(?:)").sticky=="boolean";function o(){e.SUPPORT_STICKY=!1}e.disableSticky=o;function t(){e.SUPPORT_STICKY=!0}e.enableSticky=t;function l(F,V){V=m.defaults(V,{useSticky:e.SUPPORT_STICKY,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r",`
`],tracer:function(me,T){return T()}});var z=V.tracer;z("initCharCodeToOptimizedIndexMap",function(){ne()});var X;z("Reject Lexer.NA",function(){X=m.reject(F,function(me){return me[y]===E.Lexer.NA})});var Q=!1,re;z("Transform Patterns",function(){Q=!1,re=m.map(X,function(me){var T=me[y];if(m.isRegExp(T)){var R=T.source;return R.length===1&&R!=="^"&&R!=="$"&&R!=="."&&!T.ignoreCase?R:R.length===2&&R[0]==="\\"&&!m.contains(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],R[1])?R[1]:V.useSticky?N(T):x(T)}else{if(m.isFunction(T))return Q=!0,{exec:T};if(m.has(T,"exec"))return Q=!0,T;if(typeof T=="string"){if(T.length===1)return T;var A=T.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),k=new RegExp(A);return V.useSticky?N(k):x(k)}else throw Error("non exhaustive match")}})});var ve,Ee,Re,De,Be;z("misc mapping",function(){ve=m.map(X,function(me){return me.tokenTypeIdx}),Ee=m.map(X,function(me){var T=me.GROUP;if(T!==E.Lexer.SKIPPED){if(m.isString(T))return T;if(m.isUndefined(T))return!1;throw Error("non exhaustive match")}}),Re=m.map(X,function(me){var T=me.LONGER_ALT;if(T){var R=m.indexOf(X,T);return R}}),De=m.map(X,function(me){return me.PUSH_MODE}),Be=m.map(X,function(me){return m.has(me,"POP_MODE")})});var Me;z("Line Terminator Handling",function(){var me=se(V.lineTerminatorCharacters);Me=m.map(X,function(T){return!1}),V.positionTracking!=="onlyOffset"&&(Me=m.map(X,function(T){if(m.has(T,"LINE_BREAKS"))return T.LINE_BREAKS;if($(T,me)===!1)return I.canMatchCharCode(me,T.PATTERN)}))});var M,K,G,Z;z("Misc Mapping #2",function(){M=m.map(X,q),K=m.map(re,W),G=m.reduce(X,function(me,T){var R=T.GROUP;return m.isString(R)&&R!==E.Lexer.SKIPPED&&(me[R]=[]),me},{}),Z=m.map(re,function(me,T){return{pattern:re[T],longerAlt:Re[T],canLineTerminator:Me[T],isCustom:M[T],short:K[T],group:Ee[T],push:De[T],pop:Be[T],tokenTypeIdx:ve[T],tokenType:X[T]}})});var fe=!0,Ae=[];return V.safeMode||z("First Char Optimization",function(){Ae=m.reduce(X,function(me,T,R){if(typeof T.PATTERN=="string"){var A=T.PATTERN.charCodeAt(0),k=ue(A);ie(me,k,Z[R])}else if(m.isArray(T.START_CHARS_HINT)){var O;m.forEach(T.START_CHARS_HINT,function(S){var U=typeof S=="string"?S.charCodeAt(0):S,j=ue(U);O!==j&&(O=j,ie(me,j,Z[R]))})}else if(m.isRegExp(T.PATTERN))if(T.PATTERN.unicode)fe=!1,V.ensureOptimizations&&m.PRINT_ERROR(""+I.failedOptimizationPrefixMsg+("	Unable to analyze < "+T.PATTERN.toString()+` > pattern.
`)+`	The regexp unicode flag is not currently supported by the regexp-to-ast library.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE`);else{var P=I.getOptimizedStartCodesIndices(T.PATTERN,V.ensureOptimizations);m.isEmpty(P)&&(fe=!1),m.forEach(P,function(S){ie(me,S,Z[R])})}else V.ensureOptimizations&&m.PRINT_ERROR(""+I.failedOptimizationPrefixMsg+("	TokenType: <"+T.name+`> is using a custom token pattern without providing <start_chars_hint> parameter.
`)+`	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE`),fe=!1;return me},[])}),z("ArrayPacking",function(){Ae=m.packArray(Ae)}),{emptyGroups:G,patternIdxToConfig:Z,charCodeToPatternIdxToConfig:Ae,hasCustom:Q,canBeOptimized:fe}}e.analyzeTokenTypes=l;function s(F,V){var z=[],X=f(F);z=z.concat(X.errors);var Q=v(X.valid),re=Q.valid;return z=z.concat(Q.errors),z=z.concat(g(re)),z=z.concat(D(re)),z=z.concat(w(re,V)),z=z.concat(Y(re)),z}e.validatePatterns=s;function g(F){var V=[],z=m.filter(F,function(X){return m.isRegExp(X[y])});return V=V.concat(n(z)),V=V.concat(d(z)),V=V.concat(c(z)),V=V.concat(b(z)),V=V.concat(i(z)),V}function f(F){var V=m.filter(F,function(Q){return!m.has(Q,y)}),z=m.map(V,function(Q){return{message:"Token Type: ->"+Q.name+"<- missing static 'PATTERN' property",type:E.LexerDefinitionErrorType.MISSING_PATTERN,tokenTypes:[Q]}}),X=m.difference(F,V);return{errors:z,valid:X}}e.findMissingPatterns=f;function v(F){var V=m.filter(F,function(Q){var re=Q[y];return!m.isRegExp(re)&&!m.isFunction(re)&&!m.has(re,"exec")&&!m.isString(re)}),z=m.map(V,function(Q){return{message:"Token Type: ->"+Q.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:E.LexerDefinitionErrorType.INVALID_PATTERN,tokenTypes:[Q]}}),X=m.difference(F,V);return{errors:z,valid:X}}e.findInvalidPatterns=v;var p=/[^\\][\$]/;function n(F){var V=(function(Q){h(re,Q);function re(){var ve=Q!==null&&Q.apply(this,arguments)||this;return ve.found=!1,ve}return re.prototype.visitEndAnchor=function(ve){this.found=!0},re})(r.BaseRegExpVisitor),z=m.filter(F,function(Q){var re=Q[y];try{var ve=u.getRegExpAst(re),Ee=new V;return Ee.visit(ve),Ee.found}catch{return p.test(re.source)}}),X=m.map(z,function(Q){return{message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+Q.name+`<- static 'PATTERN' cannot contain end of input anchor '$'
	See chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:E.LexerDefinitionErrorType.EOI_ANCHOR_FOUND,tokenTypes:[Q]}});return X}e.findEndOfInputAnchor=n;function i(F){var V=m.filter(F,function(X){var Q=X[y];return Q.test("")}),z=m.map(V,function(X){return{message:"Token Type: ->"+X.name+"<- static 'PATTERN' must not match an empty string",type:E.LexerDefinitionErrorType.EMPTY_MATCH_PATTERN,tokenTypes:[X]}});return z}e.findEmptyMatchRegExps=i;var a=/[^\\[][\^]|^\^/;function d(F){var V=(function(Q){h(re,Q);function re(){var ve=Q!==null&&Q.apply(this,arguments)||this;return ve.found=!1,ve}return re.prototype.visitStartAnchor=function(ve){this.found=!0},re})(r.BaseRegExpVisitor),z=m.filter(F,function(Q){var re=Q[y];try{var ve=u.getRegExpAst(re),Ee=new V;return Ee.visit(ve),Ee.found}catch{return a.test(re.source)}}),X=m.map(z,function(Q){return{message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+Q.name+`<- static 'PATTERN' cannot contain start of input anchor '^'
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:E.LexerDefinitionErrorType.SOI_ANCHOR_FOUND,tokenTypes:[Q]}});return X}e.findStartOfInputAnchor=d;function c(F){var V=m.filter(F,function(X){var Q=X[y];return Q instanceof RegExp&&(Q.multiline||Q.global)}),z=m.map(V,function(X){return{message:"Token Type: ->"+X.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:E.LexerDefinitionErrorType.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[X]}});return z}e.findUnsupportedFlags=c;function b(F){var V=[],z=m.map(F,function(re){return m.reduce(F,function(ve,Ee){return re.PATTERN.source===Ee.PATTERN.source&&!m.contains(V,Ee)&&Ee.PATTERN!==E.Lexer.NA&&(V.push(Ee),ve.push(Ee)),ve},[])});z=m.compact(z);var X=m.filter(z,function(re){return re.length>1}),Q=m.map(X,function(re){var ve=m.map(re,function(Re){return Re.name}),Ee=m.first(re).PATTERN;return{message:"The same RegExp pattern ->"+Ee+"<-"+("has been used in all of the following Token Types: "+ve.join(", ")+" <-"),type:E.LexerDefinitionErrorType.DUPLICATE_PATTERNS_FOUND,tokenTypes:re}});return Q}e.findDuplicatePatterns=b;function D(F){var V=m.filter(F,function(X){if(!m.has(X,"GROUP"))return!1;var Q=X.GROUP;return Q!==E.Lexer.SKIPPED&&Q!==E.Lexer.NA&&!m.isString(Q)}),z=m.map(V,function(X){return{message:"Token Type: ->"+X.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:E.LexerDefinitionErrorType.INVALID_GROUP_TYPE_FOUND,tokenTypes:[X]}});return z}e.findInvalidGroupType=D;function w(F,V){var z=m.filter(F,function(Q){return Q.PUSH_MODE!==void 0&&!m.contains(V,Q.PUSH_MODE)}),X=m.map(z,function(Q){var re="Token Type: ->"+Q.name+"<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->"+Q.PUSH_MODE+"<-which does not exist";return{message:re,type:E.LexerDefinitionErrorType.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[Q]}});return X}e.findModesThatDoNotExist=w;function Y(F){var V=[],z=m.reduce(F,function(X,Q,re){var ve=Q.PATTERN;return ve===E.Lexer.NA||(m.isString(ve)?X.push({str:ve,idx:re,tokenType:Q}):m.isRegExp(ve)&&B(ve)&&X.push({str:ve.source,idx:re,tokenType:Q})),X},[]);return m.forEach(F,function(X,Q){m.forEach(z,function(re){var ve=re.str,Ee=re.idx,Re=re.tokenType;if(Q<Ee&&_(ve,X.PATTERN)){var De="Token: ->"+Re.name+`<- can never be matched.
`+("Because it appears AFTER the Token Type ->"+X.name+"<-")+`in the lexer's definition.
See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;V.push({message:De,type:E.LexerDefinitionErrorType.UNREACHABLE_PATTERN,tokenTypes:[X,Re]})}})}),V}e.findUnreachablePatterns=Y;function _(F,V){if(m.isRegExp(V)){var z=V.exec(F);return z!==null&&z.index===0}else{if(m.isFunction(V))return V(F,0,[],{});if(m.has(V,"exec"))return V.exec(F,0,[],{});if(typeof V=="string")return V===F;throw Error("non exhaustive match")}}function B(F){var V=[".","\\","[","]","|","^","$","(",")","?","*","+","{"];return m.find(V,function(z){return F.source.indexOf(z)!==-1})===void 0}function x(F){var V=F.ignoreCase?"i":"";return new RegExp("^(?:"+F.source+")",V)}e.addStartOfInput=x;function N(F){var V=F.ignoreCase?"iy":"y";return new RegExp(""+F.source,V)}e.addStickyFlag=N;function C(F,V,z){var X=[];return m.has(F,e.DEFAULT_MODE)||X.push({message:"A MultiMode Lexer cannot be initialized without a <"+e.DEFAULT_MODE+`> property in its definition
`,type:E.LexerDefinitionErrorType.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),m.has(F,e.MODES)||X.push({message:"A MultiMode Lexer cannot be initialized without a <"+e.MODES+`> property in its definition
`,type:E.LexerDefinitionErrorType.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),m.has(F,e.MODES)&&m.has(F,e.DEFAULT_MODE)&&!m.has(F.modes,F.defaultMode)&&X.push({message:"A MultiMode Lexer cannot be initialized with a "+e.DEFAULT_MODE+": <"+F.defaultMode+`>which does not exist
`,type:E.LexerDefinitionErrorType.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),m.has(F,e.MODES)&&m.forEach(F.modes,function(Q,re){m.forEach(Q,function(ve,Ee){m.isUndefined(ve)&&X.push({message:"A Lexer cannot be initialized using an undefined Token Type. Mode:"+("<"+re+"> at index: <"+Ee+`>
`),type:E.LexerDefinitionErrorType.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED})})}),X}e.performRuntimeChecks=C;function L(F,V,z){var X=[],Q=!1,re=m.compact(m.flatten(m.mapValues(F.modes,function(Re){return Re}))),ve=m.reject(re,function(Re){return Re[y]===E.Lexer.NA}),Ee=se(z);return V&&m.forEach(ve,function(Re){var De=$(Re,Ee);if(De!==!1){var Be=ee(Re,De),Me={message:Be,type:De.issue,tokenType:Re};X.push(Me)}else m.has(Re,"LINE_BREAKS")?Re.LINE_BREAKS===!0&&(Q=!0):I.canMatchCharCode(Ee,Re.PATTERN)&&(Q=!0)}),V&&!Q&&X.push({message:`Warning: No LINE_BREAKS Found.
	This Lexer has been defined to track line and column information,
	But none of the Token Types can be identified as matching a line terminator.
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS
	for details.`,type:E.LexerDefinitionErrorType.NO_LINE_BREAKS_FLAGS}),X}e.performWarningRuntimeChecks=L;function H(F){var V={},z=m.keys(F);return m.forEach(z,function(X){var Q=F[X];if(m.isArray(Q))V[X]=[];else throw Error("non exhaustive match")}),V}e.cloneEmptyGroups=H;function q(F){var V=F.PATTERN;if(m.isRegExp(V))return!1;if(m.isFunction(V)||m.has(V,"exec"))return!0;if(m.isString(V))return!1;throw Error("non exhaustive match")}e.isCustomPattern=q;function W(F){return m.isString(F)&&F.length===1?F.charCodeAt(0):!1}e.isShortPattern=W,e.LineTerminatorOptimizedTester={test:function(F){for(var V=F.length,z=this.lastIndex;z<V;z++){var X=F.charCodeAt(z);if(X===10)return this.lastIndex=z+1,!0;if(X===13)return F.charCodeAt(z+1)===10?this.lastIndex=z+2:this.lastIndex=z+1,!0}return!1},lastIndex:0};function $(F,V){if(m.has(F,"LINE_BREAKS"))return!1;if(m.isRegExp(F.PATTERN)){try{I.canMatchCharCode(V,F.PATTERN)}catch(z){return{issue:E.LexerDefinitionErrorType.IDENTIFY_TERMINATOR,errMsg:z.message}}return!1}else{if(m.isString(F.PATTERN))return!1;if(q(F))return{issue:E.LexerDefinitionErrorType.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}}function ee(F,V){if(V.issue===E.LexerDefinitionErrorType.IDENTIFY_TERMINATOR)return`Warning: unable to identify line terminator usage in pattern.
`+("	The problem is in the <"+F.name+`> Token Type
`)+("	 Root cause: "+V.errMsg+`.
`)+"	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR";if(V.issue===E.LexerDefinitionErrorType.CUSTOM_LINE_BREAK)return`Warning: A Custom Token Pattern should specify the <line_breaks> option.
`+("	The problem is in the <"+F.name+`> Token Type
`)+"	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK";throw Error("non exhaustive match")}e.buildLineBreakIssueMessage=ee;function se(F){var V=m.map(F,function(z){return m.isString(z)&&z.length>0?z.charCodeAt(0):z});return V}function ie(F,V,z){F[V]===void 0?F[V]=[z]:F[V].push(z)}e.minOptimizationVal=256;var ce=[];function ue(F){return F<e.minOptimizationVal?F:ce[F]}e.charCodeToOptimizedIndex=ue;function ne(){if(m.isEmpty(ce)){ce=new Array(65536);for(var F=0;F<65536;F++)ce[F]=F>255?255+~~(F/255):F}}}),$e=Te(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isTokenType=e.hasExtendingTokensTypesMapProperty=e.hasExtendingTokensTypesProperty=e.hasCategoriesProperty=e.hasShortKeyProperty=e.singleAssignCategoriesToksMap=e.assignCategoriesMapProp=e.assignCategoriesTokensProp=e.assignTokenDefaultProps=e.expandCategories=e.augmentTokenTypes=e.tokenIdxToClass=e.tokenShortNameIdx=e.tokenStructuredMatcherNoCategories=e.tokenStructuredMatcher=void 0;var h=ke();function r(p,n){var i=p.tokenTypeIdx;return i===n.tokenTypeIdx?!0:n.isParent===!0&&n.categoryMatchesMap[i]===!0}e.tokenStructuredMatcher=r;function E(p,n){return p.tokenTypeIdx===n.tokenTypeIdx}e.tokenStructuredMatcherNoCategories=E,e.tokenShortNameIdx=1,e.tokenIdxToClass={};function m(p){var n=I(p);u(n),o(n),y(n),h.forEach(n,function(i){i.isParent=i.categoryMatches.length>0})}e.augmentTokenTypes=m;function I(p){for(var n=h.cloneArr(p),i=p,a=!0;a;){i=h.compact(h.flatten(h.map(i,function(c){return c.CATEGORIES})));var d=h.difference(i,n);n=n.concat(d),h.isEmpty(d)?a=!1:i=d}return n}e.expandCategories=I;function u(p){h.forEach(p,function(n){l(n)||(e.tokenIdxToClass[e.tokenShortNameIdx]=n,n.tokenTypeIdx=e.tokenShortNameIdx++),s(n)&&!h.isArray(n.CATEGORIES)&&(n.CATEGORIES=[n.CATEGORIES]),s(n)||(n.CATEGORIES=[]),g(n)||(n.categoryMatches=[]),f(n)||(n.categoryMatchesMap={})})}e.assignTokenDefaultProps=u;function y(p){h.forEach(p,function(n){n.categoryMatches=[],h.forEach(n.categoryMatchesMap,function(i,a){n.categoryMatches.push(e.tokenIdxToClass[a].tokenTypeIdx)})})}e.assignCategoriesTokensProp=y;function o(p){h.forEach(p,function(n){t([],n)})}e.assignCategoriesMapProp=o;function t(p,n){h.forEach(p,function(i){n.categoryMatchesMap[i.tokenTypeIdx]=!0}),h.forEach(n.CATEGORIES,function(i){var a=p.concat(n);h.contains(a,i)||t(a,i)})}e.singleAssignCategoriesToksMap=t;function l(p){return h.has(p,"tokenTypeIdx")}e.hasShortKeyProperty=l;function s(p){return h.has(p,"CATEGORIES")}e.hasCategoriesProperty=s;function g(p){return h.has(p,"categoryMatches")}e.hasExtendingTokensTypesProperty=g;function f(p){return h.has(p,"categoryMatchesMap")}e.hasExtendingTokensTypesMapProperty=f;function v(p){return h.has(p,"tokenTypeIdx")}e.isTokenType=v}),Ot=Te(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.defaultLexerErrorProvider=void 0,e.defaultLexerErrorProvider={buildUnableToPopLexerModeMessage:function(h){return"Unable to pop Lexer Mode after encountering Token ->"+h.image+"<- The Mode Stack is empty"},buildUnexpectedCharactersMessage:function(h,r,E,m,I){return"unexpected character: ->"+h.charAt(r)+"<- at offset: "+r+","+(" skipped "+E+" characters.")}}}),it=Te(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Lexer=e.LexerDefinitionErrorType=void 0;var h=At(),r=ke(),E=$e(),m=Ot(),I=mt();(function(o){o[o.MISSING_PATTERN=0]="MISSING_PATTERN",o[o.INVALID_PATTERN=1]="INVALID_PATTERN",o[o.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",o[o.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",o[o.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",o[o.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",o[o.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",o[o.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",o[o.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",o[o.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",o[o.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",o[o.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",o[o.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",o[o.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",o[o.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",o[o.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",o[o.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK"})(e.LexerDefinitionErrorType||(e.LexerDefinitionErrorType={}));var u={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:[`
`,"\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:m.defaultLexerErrorProvider,traceInitPerf:!1,skipValidations:!1};Object.freeze(u);var y=(function(){function o(t,l){var s=this;if(l===void 0&&(l=u),this.lexerDefinition=t,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.config=void 0,this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},typeof l=="boolean")throw Error(`The second argument to the Lexer constructor is now an ILexerConfig Object.
a boolean 2nd argument is no longer supported`);this.config=r.merge(u,l);var g=this.config.traceInitPerf;g===!0?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):typeof g=="number"&&(this.traceInitMaxIdent=g,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",function(){var f,v=!0;s.TRACE_INIT("Lexer Config handling",function(){if(s.config.lineTerminatorsPattern===u.lineTerminatorsPattern)s.config.lineTerminatorsPattern=h.LineTerminatorOptimizedTester;else if(s.config.lineTerminatorCharacters===u.lineTerminatorCharacters)throw Error(`Error: Missing <lineTerminatorCharacters> property on the Lexer config.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS`);if(l.safeMode&&l.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');s.trackStartLines=/full|onlyStart/i.test(s.config.positionTracking),s.trackEndLines=/full/i.test(s.config.positionTracking),r.isArray(t)?(f={modes:{}},f.modes[h.DEFAULT_MODE]=r.cloneArr(t),f[h.DEFAULT_MODE]=h.DEFAULT_MODE):(v=!1,f=r.cloneObj(t))}),s.config.skipValidations===!1&&(s.TRACE_INIT("performRuntimeChecks",function(){s.lexerDefinitionErrors=s.lexerDefinitionErrors.concat(h.performRuntimeChecks(f,s.trackStartLines,s.config.lineTerminatorCharacters))}),s.TRACE_INIT("performWarningRuntimeChecks",function(){s.lexerDefinitionWarning=s.lexerDefinitionWarning.concat(h.performWarningRuntimeChecks(f,s.trackStartLines,s.config.lineTerminatorCharacters))})),f.modes=f.modes?f.modes:{},r.forEach(f.modes,function(a,d){f.modes[d]=r.reject(a,function(c){return r.isUndefined(c)})});var p=r.keys(f.modes);if(r.forEach(f.modes,function(a,d){s.TRACE_INIT("Mode: <"+d+"> processing",function(){if(s.modes.push(d),s.config.skipValidations===!1&&s.TRACE_INIT("validatePatterns",function(){s.lexerDefinitionErrors=s.lexerDefinitionErrors.concat(h.validatePatterns(a,p))}),r.isEmpty(s.lexerDefinitionErrors)){E.augmentTokenTypes(a);var c;s.TRACE_INIT("analyzeTokenTypes",function(){c=h.analyzeTokenTypes(a,{lineTerminatorCharacters:s.config.lineTerminatorCharacters,positionTracking:l.positionTracking,ensureOptimizations:l.ensureOptimizations,safeMode:l.safeMode,tracer:s.TRACE_INIT.bind(s)})}),s.patternIdxToConfig[d]=c.patternIdxToConfig,s.charCodeToPatternIdxToConfig[d]=c.charCodeToPatternIdxToConfig,s.emptyGroups=r.merge(s.emptyGroups,c.emptyGroups),s.hasCustom=c.hasCustom||s.hasCustom,s.canModeBeOptimized[d]=c.canBeOptimized}})}),s.defaultMode=f.defaultMode,!r.isEmpty(s.lexerDefinitionErrors)&&!s.config.deferDefinitionErrorsHandling){var n=r.map(s.lexerDefinitionErrors,function(a){return a.message}),i=n.join(`-----------------------
`);throw new Error(`Errors detected in definition of Lexer:
`+i)}r.forEach(s.lexerDefinitionWarning,function(a){r.PRINT_WARNING(a.message)}),s.TRACE_INIT("Choosing sub-methods implementations",function(){if(h.SUPPORT_STICKY?(s.chopInput=r.IDENTITY,s.match=s.matchWithTest):(s.updateLastIndex=r.NOOP,s.match=s.matchWithExec),v&&(s.handleModes=r.NOOP),s.trackStartLines===!1&&(s.computeNewColumn=r.IDENTITY),s.trackEndLines===!1&&(s.updateTokenEndLineColumnLocation=r.NOOP),/full/i.test(s.config.positionTracking))s.createTokenInstance=s.createFullToken;else if(/onlyStart/i.test(s.config.positionTracking))s.createTokenInstance=s.createStartOnlyToken;else if(/onlyOffset/i.test(s.config.positionTracking))s.createTokenInstance=s.createOffsetOnlyToken;else throw Error('Invalid <positionTracking> config option: "'+s.config.positionTracking+'"');s.hasCustom?(s.addToken=s.addTokenUsingPush,s.handlePayload=s.handlePayloadWithCustom):(s.addToken=s.addTokenUsingMemberAccess,s.handlePayload=s.handlePayloadNoCustom)}),s.TRACE_INIT("Failed Optimization Warnings",function(){var a=r.reduce(s.canModeBeOptimized,function(d,c,b){return c===!1&&d.push(b),d},[]);if(l.ensureOptimizations&&!r.isEmpty(a))throw Error("Lexer Modes: < "+a.join(", ")+` > cannot be optimized.
	 Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.
	 Or inspect the console log for details on how to resolve these issues.`)}),s.TRACE_INIT("clearRegExpParserCache",function(){I.clearRegExpParserCache()}),s.TRACE_INIT("toFastProperties",function(){r.toFastProperties(s)})})}return o.prototype.tokenize=function(t,l){if(l===void 0&&(l=this.defaultMode),!r.isEmpty(this.lexerDefinitionErrors)){var s=r.map(this.lexerDefinitionErrors,function(v){return v.message}),g=s.join(`-----------------------
`);throw new Error(`Unable to Tokenize because Errors detected in definition of Lexer:
`+g)}var f=this.tokenizeInternal(t,l);return f},o.prototype.tokenizeInternal=function(t,l){var s=this,g,f,v,p,n,i,a,d,c,b,D,w,Y,_,B=t,x=B.length,N=0,C=0,L=this.hasCustom?0:Math.floor(t.length/10),H=new Array(L),q=[],W=this.trackStartLines?1:void 0,$=this.trackStartLines?1:void 0,ee=h.cloneEmptyGroups(this.emptyGroups),se=this.trackStartLines,ie=this.config.lineTerminatorsPattern,ce=0,ue=[],ne=[],F=[],V=[];Object.freeze(V);var z=void 0;function X(){return ue}function Q(O){var P=h.charCodeToOptimizedIndex(O),S=ne[P];return S===void 0?V:S}var re=function(O){if(F.length===1&&O.tokenType.PUSH_MODE===void 0){var P=s.config.errorMessageProvider.buildUnableToPopLexerModeMessage(O);q.push({offset:O.startOffset,line:O.startLine!==void 0?O.startLine:void 0,column:O.startColumn!==void 0?O.startColumn:void 0,length:O.image.length,message:P})}else{F.pop();var S=r.last(F);ue=s.patternIdxToConfig[S],ne=s.charCodeToPatternIdxToConfig[S],ce=ue.length;var U=s.canModeBeOptimized[S]&&s.config.safeMode===!1;ne&&U?z=Q:z=X}};function ve(O){F.push(O),ne=this.charCodeToPatternIdxToConfig[O],ue=this.patternIdxToConfig[O],ce=ue.length,ce=ue.length;var P=this.canModeBeOptimized[O]&&this.config.safeMode===!1;ne&&P?z=Q:z=X}ve.call(this,l);for(var Ee;N<x;){n=null;var Re=B.charCodeAt(N),De=z(Re),Be=De.length;for(g=0;g<Be;g++){Ee=De[g];var Me=Ee.pattern;i=null;var M=Ee.short;if(M!==!1?Re===M&&(n=Me):Ee.isCustom===!0?(_=Me.exec(B,N,H,ee),_!==null?(n=_[0],_.payload!==void 0&&(i=_.payload)):n=null):(this.updateLastIndex(Me,N),n=this.match(Me,t,N)),n!==null){if(p=Ee.longerAlt,p!==void 0){var K=ue[p],G=K.pattern;a=null,K.isCustom===!0?(_=G.exec(B,N,H,ee),_!==null?(v=_[0],_.payload!==void 0&&(a=_.payload)):v=null):(this.updateLastIndex(G,N),v=this.match(G,t,N)),v&&v.length>n.length&&(n=v,i=a,Ee=K)}break}}if(n!==null){if(d=n.length,c=Ee.group,c!==void 0&&(b=Ee.tokenTypeIdx,D=this.createTokenInstance(n,N,b,Ee.tokenType,W,$,d),this.handlePayload(D,i),c===!1?C=this.addToken(H,C,D):ee[c].push(D)),t=this.chopInput(t,d),N=N+d,$=this.computeNewColumn($,d),se===!0&&Ee.canLineTerminator===!0){var Z=0,fe=void 0,Ae=void 0;ie.lastIndex=0;do fe=ie.test(n),fe===!0&&(Ae=ie.lastIndex-1,Z++);while(fe===!0);Z!==0&&(W=W+Z,$=d-Ae,this.updateTokenEndLineColumnLocation(D,c,Ae,Z,W,$,d))}this.handleModes(Ee,re,ve,D)}else{for(var me=N,T=W,R=$,A=!1;!A&&N<x;)for(B.charCodeAt(N),t=this.chopInput(t,1),N++,f=0;f<ce;f++){var k=ue[f],Me=k.pattern,M=k.short;if(M!==!1?B.charCodeAt(N)===M&&(A=!0):k.isCustom===!0?A=Me.exec(B,N,H,ee)!==null:(this.updateLastIndex(Me,N),A=Me.exec(t)!==null),A===!0)break}w=N-me,Y=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(B,me,w,T,R),q.push({offset:me,line:T,column:R,length:w,message:Y})}}return this.hasCustom||(H.length=C),{tokens:H,groups:ee,errors:q}},o.prototype.handleModes=function(t,l,s,g){if(t.pop===!0){var f=t.push;l(g),f!==void 0&&s.call(this,f)}else t.push!==void 0&&s.call(this,t.push)},o.prototype.chopInput=function(t,l){return t.substring(l)},o.prototype.updateLastIndex=function(t,l){t.lastIndex=l},o.prototype.updateTokenEndLineColumnLocation=function(t,l,s,g,f,v,p){var n,i;l!==void 0&&(n=s===p-1,i=n?-1:0,g===1&&n===!0||(t.endLine=f+i,t.endColumn=v-1+-i))},o.prototype.computeNewColumn=function(t,l){return t+l},o.prototype.createTokenInstance=function(){for(var t=[],l=0;l<arguments.length;l++)t[l]=arguments[l];return null},o.prototype.createOffsetOnlyToken=function(t,l,s,g){return{image:t,startOffset:l,tokenTypeIdx:s,tokenType:g}},o.prototype.createStartOnlyToken=function(t,l,s,g,f,v){return{image:t,startOffset:l,startLine:f,startColumn:v,tokenTypeIdx:s,tokenType:g}},o.prototype.createFullToken=function(t,l,s,g,f,v,p){return{image:t,startOffset:l,endOffset:l+p-1,startLine:f,endLine:f,startColumn:v,endColumn:v+p-1,tokenTypeIdx:s,tokenType:g}},o.prototype.addToken=function(t,l,s){return 666},o.prototype.addTokenUsingPush=function(t,l,s){return t.push(s),l},o.prototype.addTokenUsingMemberAccess=function(t,l,s){return t[l]=s,l++,l},o.prototype.handlePayload=function(t,l){},o.prototype.handlePayloadNoCustom=function(t,l){},o.prototype.handlePayloadWithCustom=function(t,l){l!==null&&(t.payload=l)},o.prototype.match=function(t,l,s){return null},o.prototype.matchWithTest=function(t,l,s){var g=t.test(l);return g===!0?l.substring(s,t.lastIndex):null},o.prototype.matchWithExec=function(t,l){var s=t.exec(l);return s!==null?s[0]:s},o.prototype.TRACE_INIT=function(t,l){if(this.traceInitPerf===!0){this.traceInitIndent++;var s=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(s+"--> <"+t+">");var g=r.timer(l),f=g.time,v=g.value,p=f>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&p(s+"<-- <"+t+"> time: "+f+"ms"),this.traceInitIndent--,v}else return l()},o.SKIPPED="This marks a skipped Token pattern, this means each token identified by it willbe consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.",o.NA=/NOT_APPLICABLE/,o})();e.Lexer=y}),Xe=Te(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.tokenMatcher=e.createTokenInstance=e.EOF=e.createToken=e.hasTokenLabel=e.tokenName=e.tokenLabel=void 0;var h=ke(),r=it(),E=$e();function m(c){return u(c)?c.LABEL:c.name}e.tokenLabel=m;function I(c){return c.name}e.tokenName=I;function u(c){return h.isString(c.LABEL)&&c.LABEL!==""}e.hasTokenLabel=u;var y="parent",o="categories",t="label",l="group",s="push_mode",g="pop_mode",f="longer_alt",v="line_breaks",p="start_chars_hint";function n(c){return i(c)}e.createToken=n;function i(c){var b=c.pattern,D={};if(D.name=c.name,h.isUndefined(b)||(D.PATTERN=b),h.has(c,y))throw`The parent property is no longer supported.
See: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.`;return h.has(c,o)&&(D.CATEGORIES=c[o]),E.augmentTokenTypes([D]),h.has(c,t)&&(D.LABEL=c[t]),h.has(c,l)&&(D.GROUP=c[l]),h.has(c,g)&&(D.POP_MODE=c[g]),h.has(c,s)&&(D.PUSH_MODE=c[s]),h.has(c,f)&&(D.LONGER_ALT=c[f]),h.has(c,v)&&(D.LINE_BREAKS=c[v]),h.has(c,p)&&(D.START_CHARS_HINT=c[p]),D}e.EOF=n({name:"EOF",pattern:r.Lexer.NA}),E.augmentTokenTypes([e.EOF]);function a(c,b,D,w,Y,_,B,x){return{image:b,startOffset:D,endOffset:w,startLine:Y,endLine:_,startColumn:B,endColumn:x,tokenTypeIdx:c.tokenTypeIdx,tokenType:c}}e.createTokenInstance=a;function d(c,b){return E.tokenStructuredMatcher(c,b)}e.tokenMatcher=d}),Ge=Te(e=>{var h=e&&e.__extends||(function(){var i=function(a,d){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,b){c.__proto__=b}||function(c,b){for(var D in b)Object.prototype.hasOwnProperty.call(b,D)&&(c[D]=b[D])},i(a,d)};return function(a,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");i(a,d);function c(){this.constructor=a}a.prototype=d===null?Object.create(d):(c.prototype=d.prototype,new c)}})();Object.defineProperty(e,"__esModule",{value:!0}),e.serializeProduction=e.serializeGrammar=e.Terminal=e.Alternation=e.RepetitionWithSeparator=e.Repetition=e.RepetitionMandatoryWithSeparator=e.RepetitionMandatory=e.Option=e.Alternative=e.Rule=e.NonTerminal=e.AbstractProduction=void 0;var r=ke(),E=Xe(),m=(function(){function i(a){this._definition=a}return Object.defineProperty(i.prototype,"definition",{get:function(){return this._definition},set:function(a){this._definition=a},enumerable:!1,configurable:!0}),i.prototype.accept=function(a){a.visit(this),r.forEach(this.definition,function(d){d.accept(a)})},i})();e.AbstractProduction=m;var I=(function(i){h(a,i);function a(d){var c=i.call(this,[])||this;return c.idx=1,r.assign(c,r.pick(d,function(b){return b!==void 0})),c}return Object.defineProperty(a.prototype,"definition",{get:function(){return this.referencedRule!==void 0?this.referencedRule.definition:[]},set:function(d){},enumerable:!1,configurable:!0}),a.prototype.accept=function(d){d.visit(this)},a})(m);e.NonTerminal=I;var u=(function(i){h(a,i);function a(d){var c=i.call(this,d.definition)||this;return c.orgText="",r.assign(c,r.pick(d,function(b){return b!==void 0})),c}return a})(m);e.Rule=u;var y=(function(i){h(a,i);function a(d){var c=i.call(this,d.definition)||this;return c.ignoreAmbiguities=!1,r.assign(c,r.pick(d,function(b){return b!==void 0})),c}return a})(m);e.Alternative=y;var o=(function(i){h(a,i);function a(d){var c=i.call(this,d.definition)||this;return c.idx=1,r.assign(c,r.pick(d,function(b){return b!==void 0})),c}return a})(m);e.Option=o;var t=(function(i){h(a,i);function a(d){var c=i.call(this,d.definition)||this;return c.idx=1,r.assign(c,r.pick(d,function(b){return b!==void 0})),c}return a})(m);e.RepetitionMandatory=t;var l=(function(i){h(a,i);function a(d){var c=i.call(this,d.definition)||this;return c.idx=1,r.assign(c,r.pick(d,function(b){return b!==void 0})),c}return a})(m);e.RepetitionMandatoryWithSeparator=l;var s=(function(i){h(a,i);function a(d){var c=i.call(this,d.definition)||this;return c.idx=1,r.assign(c,r.pick(d,function(b){return b!==void 0})),c}return a})(m);e.Repetition=s;var g=(function(i){h(a,i);function a(d){var c=i.call(this,d.definition)||this;return c.idx=1,r.assign(c,r.pick(d,function(b){return b!==void 0})),c}return a})(m);e.RepetitionWithSeparator=g;var f=(function(i){h(a,i);function a(d){var c=i.call(this,d.definition)||this;return c.idx=1,c.ignoreAmbiguities=!1,c.hasPredicates=!1,r.assign(c,r.pick(d,function(b){return b!==void 0})),c}return Object.defineProperty(a.prototype,"definition",{get:function(){return this._definition},set:function(d){this._definition=d},enumerable:!1,configurable:!0}),a})(m);e.Alternation=f;var v=(function(){function i(a){this.idx=1,r.assign(this,r.pick(a,function(d){return d!==void 0}))}return i.prototype.accept=function(a){a.visit(this)},i})();e.Terminal=v;function p(i){return r.map(i,n)}e.serializeGrammar=p;function n(i){function a(b){return r.map(b,n)}if(i instanceof I)return{type:"NonTerminal",name:i.nonTerminalName,idx:i.idx};if(i instanceof y)return{type:"Alternative",definition:a(i.definition)};if(i instanceof o)return{type:"Option",idx:i.idx,definition:a(i.definition)};if(i instanceof t)return{type:"RepetitionMandatory",idx:i.idx,definition:a(i.definition)};if(i instanceof l)return{type:"RepetitionMandatoryWithSeparator",idx:i.idx,separator:n(new v({terminalType:i.separator})),definition:a(i.definition)};if(i instanceof g)return{type:"RepetitionWithSeparator",idx:i.idx,separator:n(new v({terminalType:i.separator})),definition:a(i.definition)};if(i instanceof s)return{type:"Repetition",idx:i.idx,definition:a(i.definition)};if(i instanceof f)return{type:"Alternation",idx:i.idx,definition:a(i.definition)};if(i instanceof v){var d={type:"Terminal",name:i.terminalType.name,label:E.tokenLabel(i.terminalType),idx:i.idx},c=i.terminalType.PATTERN;return i.terminalType.PATTERN&&(d.pattern=r.isRegExp(c)?c.source:c),d}else{if(i instanceof u)return{type:"Rule",name:i.name,orgText:i.orgText,definition:a(i.definition)};throw Error("non exhaustive match")}}e.serializeProduction=n}),vt=Te(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.RestWalker=void 0;var h=ke(),r=Ge(),E=(function(){function I(){}return I.prototype.walk=function(u,y){var o=this;y===void 0&&(y=[]),h.forEach(u.definition,function(t,l){var s=h.drop(u.definition,l+1);if(t instanceof r.NonTerminal)o.walkProdRef(t,s,y);else if(t instanceof r.Terminal)o.walkTerminal(t,s,y);else if(t instanceof r.Alternative)o.walkFlat(t,s,y);else if(t instanceof r.Option)o.walkOption(t,s,y);else if(t instanceof r.RepetitionMandatory)o.walkAtLeastOne(t,s,y);else if(t instanceof r.RepetitionMandatoryWithSeparator)o.walkAtLeastOneSep(t,s,y);else if(t instanceof r.RepetitionWithSeparator)o.walkManySep(t,s,y);else if(t instanceof r.Repetition)o.walkMany(t,s,y);else if(t instanceof r.Alternation)o.walkOr(t,s,y);else throw Error("non exhaustive match")})},I.prototype.walkTerminal=function(u,y,o){},I.prototype.walkProdRef=function(u,y,o){},I.prototype.walkFlat=function(u,y,o){var t=y.concat(o);this.walk(u,t)},I.prototype.walkOption=function(u,y,o){var t=y.concat(o);this.walk(u,t)},I.prototype.walkAtLeastOne=function(u,y,o){var t=[new r.Option({definition:u.definition})].concat(y,o);this.walk(u,t)},I.prototype.walkAtLeastOneSep=function(u,y,o){var t=m(u,y,o);this.walk(u,t)},I.prototype.walkMany=function(u,y,o){var t=[new r.Option({definition:u.definition})].concat(y,o);this.walk(u,t)},I.prototype.walkManySep=function(u,y,o){var t=m(u,y,o);this.walk(u,t)},I.prototype.walkOr=function(u,y,o){var t=this,l=y.concat(o);h.forEach(u.definition,function(s){var g=new r.Alternative({definition:[s]});t.walk(g,l)})},I})();e.RestWalker=E;function m(I,u,y){var o=[new r.Option({definition:[new r.Terminal({terminalType:I.separator})].concat(I.definition)})],t=o.concat(u,y);return t}}),et=Te(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GAstVisitor=void 0;var h=Ge(),r=(function(){function E(){}return E.prototype.visit=function(m){var I=m;switch(I.constructor){case h.NonTerminal:return this.visitNonTerminal(I);case h.Alternative:return this.visitAlternative(I);case h.Option:return this.visitOption(I);case h.RepetitionMandatory:return this.visitRepetitionMandatory(I);case h.RepetitionMandatoryWithSeparator:return this.visitRepetitionMandatoryWithSeparator(I);case h.RepetitionWithSeparator:return this.visitRepetitionWithSeparator(I);case h.Repetition:return this.visitRepetition(I);case h.Alternation:return this.visitAlternation(I);case h.Terminal:return this.visitTerminal(I);case h.Rule:return this.visitRule(I);default:throw Error("non exhaustive match")}},E.prototype.visitNonTerminal=function(m){},E.prototype.visitAlternative=function(m){},E.prototype.visitOption=function(m){},E.prototype.visitRepetition=function(m){},E.prototype.visitRepetitionMandatory=function(m){},E.prototype.visitRepetitionMandatoryWithSeparator=function(m){},E.prototype.visitRepetitionWithSeparator=function(m){},E.prototype.visitAlternation=function(m){},E.prototype.visitTerminal=function(m){},E.prototype.visitRule=function(m){},E})();e.GAstVisitor=r}),at=Te(e=>{var h=e&&e.__extends||(function(){var g=function(f,v){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,n){p.__proto__=n}||function(p,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(p[i]=n[i])},g(f,v)};return function(f,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");g(f,v);function p(){this.constructor=f}f.prototype=v===null?Object.create(v):(p.prototype=v.prototype,new p)}})();Object.defineProperty(e,"__esModule",{value:!0}),e.collectMethods=e.DslMethodsCollectorVisitor=e.getProductionDslName=e.isBranchingProd=e.isOptionalProd=e.isSequenceProd=void 0;var r=ke(),E=Ge(),m=et();function I(g){return g instanceof E.Alternative||g instanceof E.Option||g instanceof E.Repetition||g instanceof E.RepetitionMandatory||g instanceof E.RepetitionMandatoryWithSeparator||g instanceof E.RepetitionWithSeparator||g instanceof E.Terminal||g instanceof E.Rule}e.isSequenceProd=I;function u(g,f){f===void 0&&(f=[]);var v=g instanceof E.Option||g instanceof E.Repetition||g instanceof E.RepetitionWithSeparator;return v?!0:g instanceof E.Alternation?r.some(g.definition,function(p){return u(p,f)}):g instanceof E.NonTerminal&&r.contains(f,g)?!1:g instanceof E.AbstractProduction?(g instanceof E.NonTerminal&&f.push(g),r.every(g.definition,function(p){return u(p,f)})):!1}e.isOptionalProd=u;function y(g){return g instanceof E.Alternation}e.isBranchingProd=y;function o(g){if(g instanceof E.NonTerminal)return"SUBRULE";if(g instanceof E.Option)return"OPTION";if(g instanceof E.Alternation)return"OR";if(g instanceof E.RepetitionMandatory)return"AT_LEAST_ONE";if(g instanceof E.RepetitionMandatoryWithSeparator)return"AT_LEAST_ONE_SEP";if(g instanceof E.RepetitionWithSeparator)return"MANY_SEP";if(g instanceof E.Repetition)return"MANY";if(g instanceof E.Terminal)return"CONSUME";throw Error("non exhaustive match")}e.getProductionDslName=o;var t=(function(g){h(f,g);function f(){var v=g!==null&&g.apply(this,arguments)||this;return v.separator="-",v.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]},v}return f.prototype.reset=function(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}},f.prototype.visitTerminal=function(v){var p=v.terminalType.name+this.separator+"Terminal";r.has(this.dslMethods,p)||(this.dslMethods[p]=[]),this.dslMethods[p].push(v)},f.prototype.visitNonTerminal=function(v){var p=v.nonTerminalName+this.separator+"Terminal";r.has(this.dslMethods,p)||(this.dslMethods[p]=[]),this.dslMethods[p].push(v)},f.prototype.visitOption=function(v){this.dslMethods.option.push(v)},f.prototype.visitRepetitionWithSeparator=function(v){this.dslMethods.repetitionWithSeparator.push(v)},f.prototype.visitRepetitionMandatory=function(v){this.dslMethods.repetitionMandatory.push(v)},f.prototype.visitRepetitionMandatoryWithSeparator=function(v){this.dslMethods.repetitionMandatoryWithSeparator.push(v)},f.prototype.visitRepetition=function(v){this.dslMethods.repetition.push(v)},f.prototype.visitAlternation=function(v){this.dslMethods.alternation.push(v)},f})(m.GAstVisitor);e.DslMethodsCollectorVisitor=t;var l=new t;function s(g){l.reset(),g.accept(l);var f=l.dslMethods;return l.reset(),f}e.collectMethods=s}),It=Te(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.firstForTerminal=e.firstForBranching=e.firstForSequence=e.first=void 0;var h=ke(),r=Ge(),E=at();function m(o){if(o instanceof r.NonTerminal)return m(o.referencedRule);if(o instanceof r.Terminal)return y(o);if(E.isSequenceProd(o))return I(o);if(E.isBranchingProd(o))return u(o);throw Error("non exhaustive match")}e.first=m;function I(o){for(var t=[],l=o.definition,s=0,g=l.length>s,f,v=!0;g&&v;)f=l[s],v=E.isOptionalProd(f),t=t.concat(m(f)),s=s+1,g=l.length>s;return h.uniq(t)}e.firstForSequence=I;function u(o){var t=h.map(o.definition,function(l){return m(l)});return h.uniq(h.flatten(t))}e.firstForBranching=u;function y(o){return[o.terminalType]}e.firstForTerminal=y}),Nt=Te(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.IN=void 0,e.IN="_~IN~_"}),Zt=Te(e=>{var h=e&&e.__extends||(function(){var s=function(g,f){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,p){v.__proto__=p}||function(v,p){for(var n in p)Object.prototype.hasOwnProperty.call(p,n)&&(v[n]=p[n])},s(g,f)};return function(g,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");s(g,f);function v(){this.constructor=g}g.prototype=f===null?Object.create(f):(v.prototype=f.prototype,new v)}})();Object.defineProperty(e,"__esModule",{value:!0}),e.buildInProdFollowPrefix=e.buildBetweenProdsFollowPrefix=e.computeAllProdsFollows=e.ResyncFollowsWalker=void 0;var r=vt(),E=It(),m=ke(),I=Nt(),u=Ge(),y=(function(s){h(g,s);function g(f){var v=s.call(this)||this;return v.topProd=f,v.follows={},v}return g.prototype.startWalking=function(){return this.walk(this.topProd),this.follows},g.prototype.walkTerminal=function(f,v,p){},g.prototype.walkProdRef=function(f,v,p){var n=t(f.referencedRule,f.idx)+this.topProd.name,i=v.concat(p),a=new u.Alternative({definition:i}),d=E.first(a);this.follows[n]=d},g})(r.RestWalker);e.ResyncFollowsWalker=y;function o(s){var g={};return m.forEach(s,function(f){var v=new y(f).startWalking();m.assign(g,v)}),g}e.computeAllProdsFollows=o;function t(s,g){return s.name+g+I.IN}e.buildBetweenProdsFollowPrefix=t;function l(s){var g=s.terminalType.name;return g+s.idx+I.IN}e.buildInProdFollowPrefix=l}),st=Te(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.defaultGrammarValidatorErrorProvider=e.defaultGrammarResolverErrorProvider=e.defaultParserErrorProvider=void 0;var h=Xe(),r=ke(),E=ke(),m=Ge(),I=at();e.defaultParserErrorProvider={buildMismatchTokenMessage:function(u){var y=u.expected,o=u.actual;u.previous,u.ruleName;var t=h.hasTokenLabel(y),l=t?"--> "+h.tokenLabel(y)+" <--":"token of type --> "+y.name+" <--",s="Expecting "+l+" but found --> '"+o.image+"' <--";return s},buildNotAllInputParsedMessage:function(u){var y=u.firstRedundant;return u.ruleName,"Redundant input, expecting EOF but found: "+y.image},buildNoViableAltMessage:function(u){var y=u.expectedPathsPerAlt,o=u.actual;u.previous;var t=u.customUserDescription;u.ruleName;var l="Expecting: ",s=E.first(o).image,g=`
but found: '`+s+"'";if(t)return l+t+g;var f=E.reduce(y,function(i,a){return i.concat(a)},[]),v=E.map(f,function(i){return"["+E.map(i,function(a){return h.tokenLabel(a)}).join(", ")+"]"}),p=E.map(v,function(i,a){return"  "+(a+1)+". "+i}),n=`one of these possible Token sequences:
`+p.join(`
`);return l+n+g},buildEarlyExitMessage:function(u){var y=u.expectedIterationPaths,o=u.actual,t=u.customUserDescription;u.ruleName;var l="Expecting: ",s=E.first(o).image,g=`
but found: '`+s+"'";if(t)return l+t+g;var f=E.map(y,function(p){return"["+E.map(p,function(n){return h.tokenLabel(n)}).join(",")+"]"}),v=`expecting at least one iteration which starts with one of these possible Token sequences::
  `+("<"+f.join(" ,")+">");return l+v+g}},Object.freeze(e.defaultParserErrorProvider),e.defaultGrammarResolverErrorProvider={buildRuleNotFoundError:function(u,y){var o="Invalid grammar, reference to a rule which is not defined: ->"+y.nonTerminalName+`<-
inside top level rule: ->`+u.name+"<-";return o}},e.defaultGrammarValidatorErrorProvider={buildDuplicateFoundError:function(u,y){function o(n){return n instanceof m.Terminal?n.terminalType.name:n instanceof m.NonTerminal?n.nonTerminalName:""}var t=u.name,l=E.first(y),s=l.idx,g=I.getProductionDslName(l),f=o(l),v=s>0,p="->"+g+(v?s:"")+"<- "+(f?"with argument: ->"+f+"<-":"")+`
                  appears more than once (`+y.length+" times) in the top level rule: ->"+t+`<-.
                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES
                  `;return p=p.replace(/[ \t]+/g," "),p=p.replace(/\s\s+/g,`
`),p},buildNamespaceConflictError:function(u){var y=`Namespace conflict found in grammar.
`+("The grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <"+u.name+`>.
`)+`To resolve this make sure each Terminal and Non-Terminal names are unique
This is easy to accomplish by using the convention that Terminal names start with an uppercase letter
and Non-Terminal names start with a lower case letter.`;return y},buildAlternationPrefixAmbiguityError:function(u){var y=E.map(u.prefixPath,function(l){return h.tokenLabel(l)}).join(", "),o=u.alternation.idx===0?"":u.alternation.idx,t="Ambiguous alternatives: <"+u.ambiguityIndices.join(" ,")+`> due to common lookahead prefix
`+("in <OR"+o+"> inside <"+u.topLevelRule.name+`> Rule,
`)+("<"+y+`> may appears as a prefix path in all these alternatives.
`)+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX
For Further details.`;return t},buildAlternationAmbiguityError:function(u){var y=E.map(u.prefixPath,function(l){return h.tokenLabel(l)}).join(", "),o=u.alternation.idx===0?"":u.alternation.idx,t="Ambiguous Alternatives Detected: <"+u.ambiguityIndices.join(" ,")+"> in <OR"+o+">"+(" inside <"+u.topLevelRule.name+`> Rule,
`)+("<"+y+`> may appears as a prefix path in all these alternatives.
`);return t=t+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`,t},buildEmptyRepetitionError:function(u){var y=I.getProductionDslName(u.repetition);u.repetition.idx!==0&&(y+=u.repetition.idx);var o="The repetition <"+y+"> within Rule <"+u.topLevelRule.name+`> can never consume any tokens.
This could lead to an infinite loop.`;return o},buildTokenNameError:function(u){return"deprecated"},buildEmptyAlternationError:function(u){var y="Ambiguous empty alternative: <"+(u.emptyChoiceIdx+1)+">"+(" in <OR"+u.alternation.idx+"> inside <"+u.topLevelRule.name+`> Rule.
`)+"Only the last alternative may be an empty alternative.";return y},buildTooManyAlternativesError:function(u){var y=`An Alternation cannot have more than 256 alternatives:
`+("<OR"+u.alternation.idx+"> inside <"+u.topLevelRule.name+`> Rule.
 has `+(u.alternation.definition.length+1)+" alternatives.");return y},buildLeftRecursionError:function(u){var y=u.topLevelRule.name,o=r.map(u.leftRecursionPath,function(s){return s.name}),t=y+" --> "+o.concat([y]).join(" --> "),l=`Left Recursion found in grammar.
`+("rule: <"+y+`> can be invoked from itself (directly or indirectly)
`)+(`without consuming any Tokens. The grammar path that causes this is:
 `+t+`
`)+` To fix this refactor your grammar to remove the left recursion.
see: https://en.wikipedia.org/wiki/LL_parser#Left_Factoring.`;return l},buildInvalidRuleNameError:function(u){return"deprecated"},buildDuplicateRuleNameError:function(u){var y;u.topLevelRule instanceof m.Rule?y=u.topLevelRule.name:y=u.topLevelRule;var o="Duplicate definition, rule: ->"+y+"<- is already defined in the grammar: ->"+u.grammarName+"<-";return o}}}),Jt=Te(e=>{var h=e&&e.__extends||(function(){var y=function(o,t){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,s){l.__proto__=s}||function(l,s){for(var g in s)Object.prototype.hasOwnProperty.call(s,g)&&(l[g]=s[g])},y(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");y(o,t);function l(){this.constructor=o}o.prototype=t===null?Object.create(t):(l.prototype=t.prototype,new l)}})();Object.defineProperty(e,"__esModule",{value:!0}),e.GastRefResolverVisitor=e.resolveGrammar=void 0;var r=je(),E=ke(),m=et();function I(y,o){var t=new u(y,o);return t.resolveRefs(),t.errors}e.resolveGrammar=I;var u=(function(y){h(o,y);function o(t,l){var s=y.call(this)||this;return s.nameToTopRule=t,s.errMsgProvider=l,s.errors=[],s}return o.prototype.resolveRefs=function(){var t=this;E.forEach(E.values(this.nameToTopRule),function(l){t.currTopLevel=l,l.accept(t)})},o.prototype.visitNonTerminal=function(t){var l=this.nameToTopRule[t.nonTerminalName];if(l)t.referencedRule=l;else{var s=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,t);this.errors.push({message:s,type:r.ParserDefinitionErrorType.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:t.nonTerminalName})}},o})(m.GAstVisitor);e.GastRefResolverVisitor=u}),ct=Te(e=>{var h=e&&e.__extends||(function(){var n=function(i,a){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,c){d.__proto__=c}||function(d,c){for(var b in c)Object.prototype.hasOwnProperty.call(c,b)&&(d[b]=c[b])},n(i,a)};return function(i,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");n(i,a);function d(){this.constructor=i}i.prototype=a===null?Object.create(a):(d.prototype=a.prototype,new d)}})();Object.defineProperty(e,"__esModule",{value:!0}),e.nextPossibleTokensAfter=e.possiblePathsFrom=e.NextTerminalAfterAtLeastOneSepWalker=e.NextTerminalAfterAtLeastOneWalker=e.NextTerminalAfterManySepWalker=e.NextTerminalAfterManyWalker=e.AbstractNextTerminalAfterProductionWalker=e.NextAfterTokenWalker=e.AbstractNextPossibleTokensWalker=void 0;var r=vt(),E=ke(),m=It(),I=Ge(),u=(function(n){h(i,n);function i(a,d){var c=n.call(this)||this;return c.topProd=a,c.path=d,c.possibleTokTypes=[],c.nextProductionName="",c.nextProductionOccurrence=0,c.found=!1,c.isAtEndOfPath=!1,c}return i.prototype.startWalking=function(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=E.cloneArr(this.path.ruleStack).reverse(),this.occurrenceStack=E.cloneArr(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes},i.prototype.walk=function(a,d){d===void 0&&(d=[]),this.found||n.prototype.walk.call(this,a,d)},i.prototype.walkProdRef=function(a,d,c){if(a.referencedRule.name===this.nextProductionName&&a.idx===this.nextProductionOccurrence){var b=d.concat(c);this.updateExpectedNext(),this.walk(a.referencedRule,b)}},i.prototype.updateExpectedNext=function(){E.isEmpty(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())},i})(r.RestWalker);e.AbstractNextPossibleTokensWalker=u;var y=(function(n){h(i,n);function i(a,d){var c=n.call(this,a,d)||this;return c.path=d,c.nextTerminalName="",c.nextTerminalOccurrence=0,c.nextTerminalName=c.path.lastTok.name,c.nextTerminalOccurrence=c.path.lastTokOccurrence,c}return i.prototype.walkTerminal=function(a,d,c){if(this.isAtEndOfPath&&a.terminalType.name===this.nextTerminalName&&a.idx===this.nextTerminalOccurrence&&!this.found){var b=d.concat(c),D=new I.Alternative({definition:b});this.possibleTokTypes=m.first(D),this.found=!0}},i})(u);e.NextAfterTokenWalker=y;var o=(function(n){h(i,n);function i(a,d){var c=n.call(this)||this;return c.topRule=a,c.occurrence=d,c.result={token:void 0,occurrence:void 0,isEndOfRule:void 0},c}return i.prototype.startWalking=function(){return this.walk(this.topRule),this.result},i})(r.RestWalker);e.AbstractNextTerminalAfterProductionWalker=o;var t=(function(n){h(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.walkMany=function(a,d,c){if(a.idx===this.occurrence){var b=E.first(d.concat(c));this.result.isEndOfRule=b===void 0,b instanceof I.Terminal&&(this.result.token=b.terminalType,this.result.occurrence=b.idx)}else n.prototype.walkMany.call(this,a,d,c)},i})(o);e.NextTerminalAfterManyWalker=t;var l=(function(n){h(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.walkManySep=function(a,d,c){if(a.idx===this.occurrence){var b=E.first(d.concat(c));this.result.isEndOfRule=b===void 0,b instanceof I.Terminal&&(this.result.token=b.terminalType,this.result.occurrence=b.idx)}else n.prototype.walkManySep.call(this,a,d,c)},i})(o);e.NextTerminalAfterManySepWalker=l;var s=(function(n){h(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.walkAtLeastOne=function(a,d,c){if(a.idx===this.occurrence){var b=E.first(d.concat(c));this.result.isEndOfRule=b===void 0,b instanceof I.Terminal&&(this.result.token=b.terminalType,this.result.occurrence=b.idx)}else n.prototype.walkAtLeastOne.call(this,a,d,c)},i})(o);e.NextTerminalAfterAtLeastOneWalker=s;var g=(function(n){h(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.walkAtLeastOneSep=function(a,d,c){if(a.idx===this.occurrence){var b=E.first(d.concat(c));this.result.isEndOfRule=b===void 0,b instanceof I.Terminal&&(this.result.token=b.terminalType,this.result.occurrence=b.idx)}else n.prototype.walkAtLeastOneSep.call(this,a,d,c)},i})(o);e.NextTerminalAfterAtLeastOneSepWalker=g;function f(n,i,a){a===void 0&&(a=[]),a=E.cloneArr(a);var d=[],c=0;function b(_){return _.concat(E.drop(n,c+1))}function D(_){var B=f(b(_),i,a);return d.concat(B)}for(;a.length<i&&c<n.length;){var w=n[c];if(w instanceof I.Alternative||w instanceof I.NonTerminal)return D(w.definition);if(w instanceof I.Option)d=D(w.definition);else if(w instanceof I.RepetitionMandatory){var Y=w.definition.concat([new I.Repetition({definition:w.definition})]);return D(Y)}else if(w instanceof I.RepetitionMandatoryWithSeparator){var Y=[new I.Alternative({definition:w.definition}),new I.Repetition({definition:[new I.Terminal({terminalType:w.separator})].concat(w.definition)})];return D(Y)}else if(w instanceof I.RepetitionWithSeparator){var Y=w.definition.concat([new I.Repetition({definition:[new I.Terminal({terminalType:w.separator})].concat(w.definition)})]);d=D(Y)}else if(w instanceof I.Repetition){var Y=w.definition.concat([new I.Repetition({definition:w.definition})]);d=D(Y)}else{if(w instanceof I.Alternation)return E.forEach(w.definition,function(_){E.isEmpty(_.definition)===!1&&(d=D(_.definition))}),d;if(w instanceof I.Terminal)a.push(w.terminalType);else throw Error("non exhaustive match")}c++}return d.push({partialPath:a,suffixDef:E.drop(n,c)}),d}e.possiblePathsFrom=f;function v(n,i,a,d){var c="EXIT_NONE_TERMINAL",b=[c],D="EXIT_ALTERNATIVE",w=!1,Y=i.length,_=Y-d-1,B=[],x=[];for(x.push({idx:-1,def:n,ruleStack:[],occurrenceStack:[]});!E.isEmpty(x);){var N=x.pop();if(N===D){w&&E.last(x).idx<=_&&x.pop();continue}var C=N.def,L=N.idx,H=N.ruleStack,q=N.occurrenceStack;if(!E.isEmpty(C)){var W=C[0];if(W===c){var $={idx:L,def:E.drop(C),ruleStack:E.dropRight(H),occurrenceStack:E.dropRight(q)};x.push($)}else if(W instanceof I.Terminal)if(L<Y-1){var ee=L+1,se=i[ee];if(a(se,W.terminalType)){var $={idx:ee,def:E.drop(C),ruleStack:H,occurrenceStack:q};x.push($)}}else if(L===Y-1)B.push({nextTokenType:W.terminalType,nextTokenOccurrence:W.idx,ruleStack:H,occurrenceStack:q}),w=!0;else throw Error("non exhaustive match");else if(W instanceof I.NonTerminal){var ie=E.cloneArr(H);ie.push(W.nonTerminalName);var ce=E.cloneArr(q);ce.push(W.idx);var $={idx:L,def:W.definition.concat(b,E.drop(C)),ruleStack:ie,occurrenceStack:ce};x.push($)}else if(W instanceof I.Option){var ue={idx:L,def:E.drop(C),ruleStack:H,occurrenceStack:q};x.push(ue),x.push(D);var ne={idx:L,def:W.definition.concat(E.drop(C)),ruleStack:H,occurrenceStack:q};x.push(ne)}else if(W instanceof I.RepetitionMandatory){var F=new I.Repetition({definition:W.definition,idx:W.idx}),V=W.definition.concat([F],E.drop(C)),$={idx:L,def:V,ruleStack:H,occurrenceStack:q};x.push($)}else if(W instanceof I.RepetitionMandatoryWithSeparator){var z=new I.Terminal({terminalType:W.separator}),F=new I.Repetition({definition:[z].concat(W.definition),idx:W.idx}),V=W.definition.concat([F],E.drop(C)),$={idx:L,def:V,ruleStack:H,occurrenceStack:q};x.push($)}else if(W instanceof I.RepetitionWithSeparator){var ue={idx:L,def:E.drop(C),ruleStack:H,occurrenceStack:q};x.push(ue),x.push(D);var z=new I.Terminal({terminalType:W.separator}),X=new I.Repetition({definition:[z].concat(W.definition),idx:W.idx}),V=W.definition.concat([X],E.drop(C)),ne={idx:L,def:V,ruleStack:H,occurrenceStack:q};x.push(ne)}else if(W instanceof I.Repetition){var ue={idx:L,def:E.drop(C),ruleStack:H,occurrenceStack:q};x.push(ue),x.push(D);var X=new I.Repetition({definition:W.definition,idx:W.idx}),V=W.definition.concat([X],E.drop(C)),ne={idx:L,def:V,ruleStack:H,occurrenceStack:q};x.push(ne)}else if(W instanceof I.Alternation)for(var Q=W.definition.length-1;Q>=0;Q--){var re=W.definition[Q],ve={idx:L,def:re.definition.concat(E.drop(C)),ruleStack:H,occurrenceStack:q};x.push(ve),x.push(D)}else if(W instanceof I.Alternative)x.push({idx:L,def:W.definition.concat(E.drop(C)),ruleStack:H,occurrenceStack:q});else if(W instanceof I.Rule)x.push(p(W,L,H,q));else throw Error("non exhaustive match")}}return B}e.nextPossibleTokensAfter=v;function p(n,i,a,d){var c=E.cloneArr(a);c.push(n.name);var b=E.cloneArr(d);return b.push(1),{idx:i,def:n.definition,ruleStack:c,occurrenceStack:b}}}),ut=Te(e=>{var h=e&&e.__extends||(function(){var _=function(B,x){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,C){N.__proto__=C}||function(N,C){for(var L in C)Object.prototype.hasOwnProperty.call(C,L)&&(N[L]=C[L])},_(B,x)};return function(B,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");_(B,x);function N(){this.constructor=B}B.prototype=x===null?Object.create(x):(N.prototype=x.prototype,new N)}})();Object.defineProperty(e,"__esModule",{value:!0}),e.areTokenCategoriesNotUsed=e.isStrictPrefixOfPath=e.containsPath=e.getLookaheadPathsForOptionalProd=e.getLookaheadPathsForOr=e.lookAheadSequenceFromAlternatives=e.buildSingleAlternativeLookaheadFunction=e.buildAlternativesLookAheadFunc=e.buildLookaheadFuncForOptionalProd=e.buildLookaheadFuncForOr=e.getProdType=e.PROD_TYPE=void 0;var r=ke(),E=ct(),m=vt(),I=$e(),u=Ge(),y=et(),o;(function(_){_[_.OPTION=0]="OPTION",_[_.REPETITION=1]="REPETITION",_[_.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",_[_.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",_[_.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",_[_.ALTERNATION=5]="ALTERNATION"})(o=e.PROD_TYPE||(e.PROD_TYPE={}));function t(_){if(_ instanceof u.Option)return o.OPTION;if(_ instanceof u.Repetition)return o.REPETITION;if(_ instanceof u.RepetitionMandatory)return o.REPETITION_MANDATORY;if(_ instanceof u.RepetitionMandatoryWithSeparator)return o.REPETITION_MANDATORY_WITH_SEPARATOR;if(_ instanceof u.RepetitionWithSeparator)return o.REPETITION_WITH_SEPARATOR;if(_ instanceof u.Alternation)return o.ALTERNATION;throw Error("non exhaustive match")}e.getProdType=t;function l(_,B,x,N,C,L){var H=c(_,B,x),q=Y(H)?I.tokenStructuredMatcherNoCategories:I.tokenStructuredMatcher;return L(H,N,q,C)}e.buildLookaheadFuncForOr=l;function s(_,B,x,N,C,L){var H=b(_,B,C,x),q=Y(H)?I.tokenStructuredMatcherNoCategories:I.tokenStructuredMatcher;return L(H[0],q,N)}e.buildLookaheadFuncForOptionalProd=s;function g(_,B,x,N){var C=_.length,L=r.every(_,function(W){return r.every(W,function($){return $.length===1})});if(B)return function(W){for(var $=r.map(W,function(X){return X.GATE}),ee=0;ee<C;ee++){var se=_[ee],ie=se.length,ce=$[ee];if(!(ce!==void 0&&ce.call(this)===!1))e:for(var ue=0;ue<ie;ue++){for(var ne=se[ue],F=ne.length,V=0;V<F;V++){var z=this.LA(V+1);if(x(z,ne[V])===!1)continue e}return ee}}};if(L&&!N){var H=r.map(_,function(W){return r.flatten(W)}),q=r.reduce(H,function(W,$,ee){return r.forEach($,function(se){r.has(W,se.tokenTypeIdx)||(W[se.tokenTypeIdx]=ee),r.forEach(se.categoryMatches,function(ie){r.has(W,ie)||(W[ie]=ee)})}),W},[]);return function(){var W=this.LA(1);return q[W.tokenTypeIdx]}}else return function(){for(var W=0;W<C;W++){var $=_[W],ee=$.length;e:for(var se=0;se<ee;se++){for(var ie=$[se],ce=ie.length,ue=0;ue<ce;ue++){var ne=this.LA(ue+1);if(x(ne,ie[ue])===!1)continue e}return W}}}}e.buildAlternativesLookAheadFunc=g;function f(_,B,x){var N=r.every(_,function($){return $.length===1}),C=_.length;if(N&&!x){var L=r.flatten(_);if(L.length===1&&r.isEmpty(L[0].categoryMatches)){var H=L[0],q=H.tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===q}}else{var W=r.reduce(L,function($,ee,se){return $[ee.tokenTypeIdx]=!0,r.forEach(ee.categoryMatches,function(ie){$[ie]=!0}),$},[]);return function(){var $=this.LA(1);return W[$.tokenTypeIdx]===!0}}}else return function(){e:for(var $=0;$<C;$++){for(var ee=_[$],se=ee.length,ie=0;ie<se;ie++){var ce=this.LA(ie+1);if(B(ce,ee[ie])===!1)continue e}return!0}return!1}}e.buildSingleAlternativeLookaheadFunction=f;var v=(function(_){h(B,_);function B(x,N,C){var L=_.call(this)||this;return L.topProd=x,L.targetOccurrence=N,L.targetProdType=C,L}return B.prototype.startWalking=function(){return this.walk(this.topProd),this.restDef},B.prototype.checkIsTarget=function(x,N,C,L){return x.idx===this.targetOccurrence&&this.targetProdType===N?(this.restDef=C.concat(L),!0):!1},B.prototype.walkOption=function(x,N,C){this.checkIsTarget(x,o.OPTION,N,C)||_.prototype.walkOption.call(this,x,N,C)},B.prototype.walkAtLeastOne=function(x,N,C){this.checkIsTarget(x,o.REPETITION_MANDATORY,N,C)||_.prototype.walkOption.call(this,x,N,C)},B.prototype.walkAtLeastOneSep=function(x,N,C){this.checkIsTarget(x,o.REPETITION_MANDATORY_WITH_SEPARATOR,N,C)||_.prototype.walkOption.call(this,x,N,C)},B.prototype.walkMany=function(x,N,C){this.checkIsTarget(x,o.REPETITION,N,C)||_.prototype.walkOption.call(this,x,N,C)},B.prototype.walkManySep=function(x,N,C){this.checkIsTarget(x,o.REPETITION_WITH_SEPARATOR,N,C)||_.prototype.walkOption.call(this,x,N,C)},B})(m.RestWalker),p=(function(_){h(B,_);function B(x,N,C){var L=_.call(this)||this;return L.targetOccurrence=x,L.targetProdType=N,L.targetRef=C,L.result=[],L}return B.prototype.checkIsTarget=function(x,N){x.idx===this.targetOccurrence&&this.targetProdType===N&&(this.targetRef===void 0||x===this.targetRef)&&(this.result=x.definition)},B.prototype.visitOption=function(x){this.checkIsTarget(x,o.OPTION)},B.prototype.visitRepetition=function(x){this.checkIsTarget(x,o.REPETITION)},B.prototype.visitRepetitionMandatory=function(x){this.checkIsTarget(x,o.REPETITION_MANDATORY)},B.prototype.visitRepetitionMandatoryWithSeparator=function(x){this.checkIsTarget(x,o.REPETITION_MANDATORY_WITH_SEPARATOR)},B.prototype.visitRepetitionWithSeparator=function(x){this.checkIsTarget(x,o.REPETITION_WITH_SEPARATOR)},B.prototype.visitAlternation=function(x){this.checkIsTarget(x,o.ALTERNATION)},B})(y.GAstVisitor);function n(_){for(var B=new Array(_),x=0;x<_;x++)B[x]=[];return B}function i(_){for(var B=[""],x=0;x<_.length;x++){for(var N=_[x],C=[],L=0;L<B.length;L++){var H=B[L];C.push(H+"_"+N.tokenTypeIdx);for(var q=0;q<N.categoryMatches.length;q++){var W="_"+N.categoryMatches[q];C.push(H+W)}}B=C}return B}function a(_,B,x){for(var N=0;N<_.length;N++)if(N!==x)for(var C=_[N],L=0;L<B.length;L++){var H=B[L];if(C[H]===!0)return!1}return!0}function d(_,B){for(var x=r.map(_,function(ee){return E.possiblePathsFrom([ee],1)}),N=n(x.length),C=r.map(x,function(ee){var se={};return r.forEach(ee,function(ie){var ce=i(ie.partialPath);r.forEach(ce,function(ue){se[ue]=!0})}),se}),L=x,H=1;H<=B;H++){var q=L;L=n(q.length);for(var W=function(ee){for(var se=q[ee],ie=0;ie<se.length;ie++){var ce=se[ie].partialPath,ue=se[ie].suffixDef,ne=i(ce),F=a(C,ne,ee);if(F||r.isEmpty(ue)||ce.length===B){var V=N[ee];if(D(V,ce)===!1){V.push(ce);for(var z=0;z<ne.length;z++){var X=ne[z];C[ee][X]=!0}}}else{var Q=E.possiblePathsFrom(ue,H+1,ce);L[ee]=L[ee].concat(Q),r.forEach(Q,function(re){var ve=i(re.partialPath);r.forEach(ve,function(Ee){C[ee][Ee]=!0})})}}},$=0;$<q.length;$++)W($)}return N}e.lookAheadSequenceFromAlternatives=d;function c(_,B,x,N){var C=new p(_,o.ALTERNATION,N);return B.accept(C),d(C.result,x)}e.getLookaheadPathsForOr=c;function b(_,B,x,N){var C=new p(_,x);B.accept(C);var L=C.result,H=new v(B,_,x),q=H.startWalking(),W=new u.Alternative({definition:L}),$=new u.Alternative({definition:q});return d([W,$],N)}e.getLookaheadPathsForOptionalProd=b;function D(_,B){e:for(var x=0;x<_.length;x++){var N=_[x];if(N.length===B.length){for(var C=0;C<N.length;C++){var L=B[C],H=N[C],q=L===H||H.categoryMatchesMap[L.tokenTypeIdx]!==void 0;if(q===!1)continue e}return!0}}return!1}e.containsPath=D;function w(_,B){return _.length<B.length&&r.every(_,function(x,N){var C=B[N];return x===C||C.categoryMatchesMap[x.tokenTypeIdx]})}e.isStrictPrefixOfPath=w;function Y(_){return r.every(_,function(B){return r.every(B,function(x){return r.every(x,function(N){return r.isEmpty(N.categoryMatches)})})})}e.areTokenCategoriesNotUsed=Y}),_t=Te(e=>{var h=e&&e.__extends||(function(){var N=function(C,L){return N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(H,q){H.__proto__=q}||function(H,q){for(var W in q)Object.prototype.hasOwnProperty.call(q,W)&&(H[W]=q[W])},N(C,L)};return function(C,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");N(C,L);function H(){this.constructor=C}C.prototype=L===null?Object.create(L):(H.prototype=L.prototype,new H)}})();Object.defineProperty(e,"__esModule",{value:!0}),e.checkPrefixAlternativesAmbiguities=e.validateSomeNonEmptyLookaheadPath=e.validateTooManyAlts=e.RepetionCollector=e.validateAmbiguousAlternationAlternatives=e.validateEmptyOrAlternative=e.getFirstNoneTerminal=e.validateNoLeftRecursion=e.validateRuleIsOverridden=e.validateRuleDoesNotAlreadyExist=e.OccurrenceValidationCollector=e.identifyProductionForDuplicates=e.validateGrammar=void 0;var r=ke(),E=ke(),m=je(),I=at(),u=ut(),y=ct(),o=Ge(),t=et();function l(N,C,L,H,q){var W=r.map(N,function(F){return s(F,H)}),$=r.map(N,function(F){return i(F,F,H)}),ee=[],se=[],ie=[];E.every($,E.isEmpty)&&(ee=E.map(N,function(F){return c(F,H)}),se=E.map(N,function(F){return b(F,C,H)}),ie=Y(N,C,H));var ce=x(N,L,H),ue=E.map(N,function(F){return w(F,H)}),ne=E.map(N,function(F){return p(F,N,q,H)});return r.flatten(W.concat(ie,$,ee,se,ce,ue,ne))}e.validateGrammar=l;function s(N,C){var L=new v;N.accept(L);var H=L.allProductions,q=r.groupBy(H,g),W=r.pick(q,function(ee){return ee.length>1}),$=r.map(r.values(W),function(ee){var se=r.first(ee),ie=C.buildDuplicateFoundError(N,ee),ce=I.getProductionDslName(se),ue={message:ie,type:m.ParserDefinitionErrorType.DUPLICATE_PRODUCTIONS,ruleName:N.name,dslName:ce,occurrence:se.idx},ne=f(se);return ne&&(ue.parameter=ne),ue});return $}function g(N){return I.getProductionDslName(N)+"_#_"+N.idx+"_#_"+f(N)}e.identifyProductionForDuplicates=g;function f(N){return N instanceof o.Terminal?N.terminalType.name:N instanceof o.NonTerminal?N.nonTerminalName:""}var v=(function(N){h(C,N);function C(){var L=N!==null&&N.apply(this,arguments)||this;return L.allProductions=[],L}return C.prototype.visitNonTerminal=function(L){this.allProductions.push(L)},C.prototype.visitOption=function(L){this.allProductions.push(L)},C.prototype.visitRepetitionWithSeparator=function(L){this.allProductions.push(L)},C.prototype.visitRepetitionMandatory=function(L){this.allProductions.push(L)},C.prototype.visitRepetitionMandatoryWithSeparator=function(L){this.allProductions.push(L)},C.prototype.visitRepetition=function(L){this.allProductions.push(L)},C.prototype.visitAlternation=function(L){this.allProductions.push(L)},C.prototype.visitTerminal=function(L){this.allProductions.push(L)},C})(t.GAstVisitor);e.OccurrenceValidationCollector=v;function p(N,C,L,H){var q=[],W=E.reduce(C,function(ee,se){return se.name===N.name?ee+1:ee},0);if(W>1){var $=H.buildDuplicateRuleNameError({topLevelRule:N,grammarName:L});q.push({message:$,type:m.ParserDefinitionErrorType.DUPLICATE_RULE_NAME,ruleName:N.name})}return q}e.validateRuleDoesNotAlreadyExist=p;function n(N,C,L){var H=[],q;return r.contains(C,N)||(q="Invalid rule override, rule: ->"+N+"<- cannot be overridden in the grammar: ->"+L+"<-as it is not defined in any of the super grammars ",H.push({message:q,type:m.ParserDefinitionErrorType.INVALID_RULE_OVERRIDE,ruleName:N})),H}e.validateRuleIsOverridden=n;function i(N,C,L,H){H===void 0&&(H=[]);var q=[],W=a(C.definition);if(r.isEmpty(W))return[];var $=N.name,ee=r.contains(W,N);ee&&q.push({message:L.buildLeftRecursionError({topLevelRule:N,leftRecursionPath:H}),type:m.ParserDefinitionErrorType.LEFT_RECURSION,ruleName:$});var se=r.difference(W,H.concat([N])),ie=r.map(se,function(ce){var ue=r.cloneArr(H);return ue.push(ce),i(N,ce,L,ue)});return q.concat(r.flatten(ie))}e.validateNoLeftRecursion=i;function a(N){var C=[];if(r.isEmpty(N))return C;var L=r.first(N);if(L instanceof o.NonTerminal)C.push(L.referencedRule);else if(L instanceof o.Alternative||L instanceof o.Option||L instanceof o.RepetitionMandatory||L instanceof o.RepetitionMandatoryWithSeparator||L instanceof o.RepetitionWithSeparator||L instanceof o.Repetition)C=C.concat(a(L.definition));else if(L instanceof o.Alternation)C=r.flatten(r.map(L.definition,function($){return a($.definition)}));else if(!(L instanceof o.Terminal))throw Error("non exhaustive match");var H=I.isOptionalProd(L),q=N.length>1;if(H&&q){var W=r.drop(N);return C.concat(a(W))}else return C}e.getFirstNoneTerminal=a;var d=(function(N){h(C,N);function C(){var L=N!==null&&N.apply(this,arguments)||this;return L.alternations=[],L}return C.prototype.visitAlternation=function(L){this.alternations.push(L)},C})(t.GAstVisitor);function c(N,C){var L=new d;N.accept(L);var H=L.alternations,q=r.reduce(H,function(W,$){var ee=r.dropRight($.definition),se=r.map(ee,function(ie,ce){var ue=y.nextPossibleTokensAfter([ie],[],null,1);return r.isEmpty(ue)?{message:C.buildEmptyAlternationError({topLevelRule:N,alternation:$,emptyChoiceIdx:ce}),type:m.ParserDefinitionErrorType.NONE_LAST_EMPTY_ALT,ruleName:N.name,occurrence:$.idx,alternative:ce+1}:null});return W.concat(r.compact(se))},[]);return q}e.validateEmptyOrAlternative=c;function b(N,C,L){var H=new d;N.accept(H);var q=H.alternations;q=E.reject(q,function($){return $.ignoreAmbiguities===!0});var W=r.reduce(q,function($,ee){var se=ee.idx,ie=ee.maxLookahead||C,ce=u.getLookaheadPathsForOr(se,N,ie,ee),ue=_(ce,ee,N,L),ne=B(ce,ee,N,L);return $.concat(ue,ne)},[]);return W}e.validateAmbiguousAlternationAlternatives=b;var D=(function(N){h(C,N);function C(){var L=N!==null&&N.apply(this,arguments)||this;return L.allProductions=[],L}return C.prototype.visitRepetitionWithSeparator=function(L){this.allProductions.push(L)},C.prototype.visitRepetitionMandatory=function(L){this.allProductions.push(L)},C.prototype.visitRepetitionMandatoryWithSeparator=function(L){this.allProductions.push(L)},C.prototype.visitRepetition=function(L){this.allProductions.push(L)},C})(t.GAstVisitor);e.RepetionCollector=D;function w(N,C){var L=new d;N.accept(L);var H=L.alternations,q=r.reduce(H,function(W,$){return $.definition.length>255&&W.push({message:C.buildTooManyAlternativesError({topLevelRule:N,alternation:$}),type:m.ParserDefinitionErrorType.TOO_MANY_ALTS,ruleName:N.name,occurrence:$.idx}),W},[]);return q}e.validateTooManyAlts=w;function Y(N,C,L){var H=[];return E.forEach(N,function(q){var W=new D;q.accept(W);var $=W.allProductions;E.forEach($,function(ee){var se=u.getProdType(ee),ie=ee.maxLookahead||C,ce=ee.idx,ue=u.getLookaheadPathsForOptionalProd(ce,q,se,ie),ne=ue[0];if(E.isEmpty(E.flatten(ne))){var F=L.buildEmptyRepetitionError({topLevelRule:q,repetition:ee});H.push({message:F,type:m.ParserDefinitionErrorType.NO_NON_EMPTY_LOOKAHEAD,ruleName:q.name})}})}),H}e.validateSomeNonEmptyLookaheadPath=Y;function _(N,C,L,H){var q=[],W=E.reduce(N,function(ee,se,ie){return C.definition[ie].ignoreAmbiguities===!0||E.forEach(se,function(ce){var ue=[ie];E.forEach(N,function(ne,F){ie!==F&&u.containsPath(ne,ce)&&C.definition[F].ignoreAmbiguities!==!0&&ue.push(F)}),ue.length>1&&!u.containsPath(q,ce)&&(q.push(ce),ee.push({alts:ue,path:ce}))}),ee},[]),$=r.map(W,function(ee){var se=E.map(ee.alts,function(ce){return ce+1}),ie=H.buildAlternationAmbiguityError({topLevelRule:L,alternation:C,ambiguityIndices:se,prefixPath:ee.path});return{message:ie,type:m.ParserDefinitionErrorType.AMBIGUOUS_ALTS,ruleName:L.name,occurrence:C.idx,alternatives:[ee.alts]}});return $}function B(N,C,L,H){var q=[],W=E.reduce(N,function($,ee,se){var ie=E.map(ee,function(ce){return{idx:se,path:ce}});return $.concat(ie)},[]);return E.forEach(W,function($){var ee=C.definition[$.idx];if(ee.ignoreAmbiguities!==!0){var se=$.idx,ie=$.path,ce=E.findAll(W,function(ne){return C.definition[ne.idx].ignoreAmbiguities!==!0&&ne.idx<se&&u.isStrictPrefixOfPath(ne.path,ie)}),ue=E.map(ce,function(ne){var F=[ne.idx+1,se+1],V=C.idx===0?"":C.idx,z=H.buildAlternationPrefixAmbiguityError({topLevelRule:L,alternation:C,ambiguityIndices:F,prefixPath:ne.path});return{message:z,type:m.ParserDefinitionErrorType.AMBIGUOUS_PREFIX_ALTS,ruleName:L.name,occurrence:V,alternatives:F}});q=q.concat(ue)}}),q}e.checkPrefixAlternativesAmbiguities=B;function x(N,C,L){var H=[],q=E.map(C,function(W){return W.name});return E.forEach(N,function(W){var $=W.name;if(E.contains(q,$)){var ee=L.buildNamespaceConflictError(W);H.push({message:ee,type:m.ParserDefinitionErrorType.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:$})}}),H}}),$t=Te(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.validateGrammar=e.resolveGrammar=void 0;var h=ke(),r=Jt(),E=_t(),m=st();function I(y){y=h.defaults(y,{errMsgProvider:m.defaultGrammarResolverErrorProvider});var o={};return h.forEach(y.rules,function(t){o[t.name]=t}),r.resolveGrammar(o,y.errMsgProvider)}e.resolveGrammar=I;function u(y){return y=h.defaults(y,{errMsgProvider:m.defaultGrammarValidatorErrorProvider}),E.validateGrammar(y.rules,y.maxLookahead,y.tokenTypes,y.errMsgProvider,y.grammarName)}e.validateGrammar=u}),tt=Te(e=>{var h=e&&e.__extends||(function(){var v=function(p,n){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&(i[d]=a[d])},v(p,n)};return function(p,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");v(p,n);function i(){this.constructor=p}p.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}})();Object.defineProperty(e,"__esModule",{value:!0}),e.EarlyExitException=e.NotAllInputParsedException=e.NoViableAltException=e.MismatchedTokenException=e.isRecognitionException=void 0;var r=ke(),E="MismatchedTokenException",m="NoViableAltException",I="EarlyExitException",u="NotAllInputParsedException",y=[E,m,I,u];Object.freeze(y);function o(v){return r.contains(y,v.name)}e.isRecognitionException=o;var t=(function(v){h(p,v);function p(n,i){var a=this.constructor,d=v.call(this,n)||this;return d.token=i,d.resyncedTokens=[],Object.setPrototypeOf(d,a.prototype),Error.captureStackTrace&&Error.captureStackTrace(d,d.constructor),d}return p})(Error),l=(function(v){h(p,v);function p(n,i,a){var d=v.call(this,n,i)||this;return d.previousToken=a,d.name=E,d}return p})(t);e.MismatchedTokenException=l;var s=(function(v){h(p,v);function p(n,i,a){var d=v.call(this,n,i)||this;return d.previousToken=a,d.name=m,d}return p})(t);e.NoViableAltException=s;var g=(function(v){h(p,v);function p(n,i){var a=v.call(this,n,i)||this;return a.name=u,a}return p})(t);e.NotAllInputParsedException=g;var f=(function(v){h(p,v);function p(n,i,a){var d=v.call(this,n,i)||this;return d.previousToken=a,d.name=I,d}return p})(t);e.EarlyExitException=f}),kt=Te(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.attemptInRepetitionRecovery=e.Recoverable=e.InRuleRecoveryException=e.IN_RULE_RECOVERY_EXCEPTION=e.EOF_FOLLOW_KEY=void 0;var h=Xe(),r=ke(),E=tt(),m=Nt(),I=je();e.EOF_FOLLOW_KEY={},e.IN_RULE_RECOVERY_EXCEPTION="InRuleRecoveryException";function u(t){this.name=e.IN_RULE_RECOVERY_EXCEPTION,this.message=t}e.InRuleRecoveryException=u,u.prototype=Error.prototype;var y=(function(){function t(){}return t.prototype.initRecoverable=function(l){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=r.has(l,"recoveryEnabled")?l.recoveryEnabled:I.DEFAULT_PARSER_CONFIG.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=o)},t.prototype.getTokenToInsert=function(l){var s=h.createTokenInstance(l,"",NaN,NaN,NaN,NaN,NaN,NaN);return s.isInsertedInRecovery=!0,s},t.prototype.canTokenTypeBeInsertedInRecovery=function(l){return!0},t.prototype.tryInRepetitionRecovery=function(l,s,g,f){for(var v=this,p=this.findReSyncTokenType(),n=this.exportLexerState(),i=[],a=!1,d=this.LA(1),c=this.LA(1),b=function(){var D=v.LA(0),w=v.errorMessageProvider.buildMismatchTokenMessage({expected:f,actual:d,previous:D,ruleName:v.getCurrRuleFullName()}),Y=new E.MismatchedTokenException(w,d,v.LA(0));Y.resyncedTokens=r.dropRight(i),v.SAVE_ERROR(Y)};!a;)if(this.tokenMatcher(c,f)){b();return}else if(g.call(this)){b(),l.apply(this,s);return}else this.tokenMatcher(c,p)?a=!0:(c=this.SKIP_TOKEN(),this.addToResyncTokens(c,i));this.importLexerState(n)},t.prototype.shouldInRepetitionRecoveryBeTried=function(l,s,g){return!(g===!1||l===void 0||s===void 0||this.tokenMatcher(this.LA(1),l)||this.isBackTracking()||this.canPerformInRuleRecovery(l,this.getFollowsForInRuleRecovery(l,s)))},t.prototype.getFollowsForInRuleRecovery=function(l,s){var g=this.getCurrentGrammarPath(l,s),f=this.getNextPossibleTokenTypes(g);return f},t.prototype.tryInRuleRecovery=function(l,s){if(this.canRecoverWithSingleTokenInsertion(l,s)){var g=this.getTokenToInsert(l);return g}if(this.canRecoverWithSingleTokenDeletion(l)){var f=this.SKIP_TOKEN();return this.consumeToken(),f}throw new u("sad sad panda")},t.prototype.canPerformInRuleRecovery=function(l,s){return this.canRecoverWithSingleTokenInsertion(l,s)||this.canRecoverWithSingleTokenDeletion(l)},t.prototype.canRecoverWithSingleTokenInsertion=function(l,s){var g=this;if(!this.canTokenTypeBeInsertedInRecovery(l)||r.isEmpty(s))return!1;var f=this.LA(1),v=r.find(s,function(p){return g.tokenMatcher(f,p)})!==void 0;return v},t.prototype.canRecoverWithSingleTokenDeletion=function(l){var s=this.tokenMatcher(this.LA(2),l);return s},t.prototype.isInCurrentRuleReSyncSet=function(l){var s=this.getCurrFollowKey(),g=this.getFollowSetFromFollowKey(s);return r.contains(g,l)},t.prototype.findReSyncTokenType=function(){for(var l=this.flattenFollowSet(),s=this.LA(1),g=2;;){var f=s.tokenType;if(r.contains(l,f))return f;s=this.LA(g),g++}},t.prototype.getCurrFollowKey=function(){if(this.RULE_STACK.length===1)return e.EOF_FOLLOW_KEY;var l=this.getLastExplicitRuleShortName(),s=this.getLastExplicitRuleOccurrenceIndex(),g=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(l),idxInCallingRule:s,inRule:this.shortRuleNameToFullName(g)}},t.prototype.buildFullFollowKeyStack=function(){var l=this,s=this.RULE_STACK,g=this.RULE_OCCURRENCE_STACK;return r.map(s,function(f,v){return v===0?e.EOF_FOLLOW_KEY:{ruleName:l.shortRuleNameToFullName(f),idxInCallingRule:g[v],inRule:l.shortRuleNameToFullName(s[v-1])}})},t.prototype.flattenFollowSet=function(){var l=this,s=r.map(this.buildFullFollowKeyStack(),function(g){return l.getFollowSetFromFollowKey(g)});return r.flatten(s)},t.prototype.getFollowSetFromFollowKey=function(l){if(l===e.EOF_FOLLOW_KEY)return[h.EOF];var s=l.ruleName+l.idxInCallingRule+m.IN+l.inRule;return this.resyncFollows[s]},t.prototype.addToResyncTokens=function(l,s){return this.tokenMatcher(l,h.EOF)||s.push(l),s},t.prototype.reSyncTo=function(l){for(var s=[],g=this.LA(1);this.tokenMatcher(g,l)===!1;)g=this.SKIP_TOKEN(),this.addToResyncTokens(g,s);return r.dropRight(s)},t.prototype.attemptInRepetitionRecovery=function(l,s,g,f,v,p,n){},t.prototype.getCurrentGrammarPath=function(l,s){var g=this.getHumanReadableRuleStack(),f=r.cloneArr(this.RULE_OCCURRENCE_STACK),v={ruleStack:g,occurrenceStack:f,lastTok:l,lastTokOccurrence:s};return v},t.prototype.getHumanReadableRuleStack=function(){var l=this;return r.map(this.RULE_STACK,function(s){return l.shortRuleNameToFullName(s)})},t})();e.Recoverable=y;function o(t,l,s,g,f,v,p){var n=this.getKeyForAutomaticLookahead(g,f),i=this.firstAfterRepMap[n];if(i===void 0){var a=this.getCurrRuleFullName(),d=this.getGAstProductions()[a],c=new v(d,f);i=c.startWalking(),this.firstAfterRepMap[n]=i}var b=i.token,D=i.occurrence,w=i.isEndOfRule;this.RULE_STACK.length===1&&w&&b===void 0&&(b=h.EOF,D=1),this.shouldInRepetitionRecoveryBeTried(b,D,p)&&this.tryInRepetitionRecovery(t,l,s,b)}e.attemptInRepetitionRecovery=o}),yt=Te(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getKeyForAutomaticLookahead=e.AT_LEAST_ONE_SEP_IDX=e.MANY_SEP_IDX=e.AT_LEAST_ONE_IDX=e.MANY_IDX=e.OPTION_IDX=e.OR_IDX=e.BITS_FOR_ALT_IDX=e.BITS_FOR_RULE_IDX=e.BITS_FOR_OCCURRENCE_IDX=e.BITS_FOR_METHOD_TYPE=void 0,e.BITS_FOR_METHOD_TYPE=4,e.BITS_FOR_OCCURRENCE_IDX=8,e.BITS_FOR_RULE_IDX=12,e.BITS_FOR_ALT_IDX=8,e.OR_IDX=1<<e.BITS_FOR_OCCURRENCE_IDX,e.OPTION_IDX=2<<e.BITS_FOR_OCCURRENCE_IDX,e.MANY_IDX=3<<e.BITS_FOR_OCCURRENCE_IDX,e.AT_LEAST_ONE_IDX=4<<e.BITS_FOR_OCCURRENCE_IDX,e.MANY_SEP_IDX=5<<e.BITS_FOR_OCCURRENCE_IDX,e.AT_LEAST_ONE_SEP_IDX=6<<e.BITS_FOR_OCCURRENCE_IDX;function h(r,E,m){return m|E|r}e.getKeyForAutomaticLookahead=h,32-e.BITS_FOR_ALT_IDX}),en=Te(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LooksAhead=void 0;var h=ut(),r=ke(),E=je(),m=yt(),I=at(),u=(function(){function y(){}return y.prototype.initLooksAhead=function(o){this.dynamicTokensEnabled=r.has(o,"dynamicTokensEnabled")?o.dynamicTokensEnabled:E.DEFAULT_PARSER_CONFIG.dynamicTokensEnabled,this.maxLookahead=r.has(o,"maxLookahead")?o.maxLookahead:E.DEFAULT_PARSER_CONFIG.maxLookahead,this.lookAheadFuncsCache=r.isES2015MapSupported()?new Map:[],r.isES2015MapSupported()?(this.getLaFuncFromCache=this.getLaFuncFromMap,this.setLaFuncCache=this.setLaFuncCacheUsingMap):(this.getLaFuncFromCache=this.getLaFuncFromObj,this.setLaFuncCache=this.setLaFuncUsingObj)},y.prototype.preComputeLookaheadFunctions=function(o){var t=this;r.forEach(o,function(l){t.TRACE_INIT(l.name+" Rule Lookahead",function(){var s=I.collectMethods(l),g=s.alternation,f=s.repetition,v=s.option,p=s.repetitionMandatory,n=s.repetitionMandatoryWithSeparator,i=s.repetitionWithSeparator;r.forEach(g,function(a){var d=a.idx===0?"":a.idx;t.TRACE_INIT(""+I.getProductionDslName(a)+d,function(){var c=h.buildLookaheadFuncForOr(a.idx,l,a.maxLookahead||t.maxLookahead,a.hasPredicates,t.dynamicTokensEnabled,t.lookAheadBuilderForAlternatives),b=m.getKeyForAutomaticLookahead(t.fullRuleNameToShort[l.name],m.OR_IDX,a.idx);t.setLaFuncCache(b,c)})}),r.forEach(f,function(a){t.computeLookaheadFunc(l,a.idx,m.MANY_IDX,h.PROD_TYPE.REPETITION,a.maxLookahead,I.getProductionDslName(a))}),r.forEach(v,function(a){t.computeLookaheadFunc(l,a.idx,m.OPTION_IDX,h.PROD_TYPE.OPTION,a.maxLookahead,I.getProductionDslName(a))}),r.forEach(p,function(a){t.computeLookaheadFunc(l,a.idx,m.AT_LEAST_ONE_IDX,h.PROD_TYPE.REPETITION_MANDATORY,a.maxLookahead,I.getProductionDslName(a))}),r.forEach(n,function(a){t.computeLookaheadFunc(l,a.idx,m.AT_LEAST_ONE_SEP_IDX,h.PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR,a.maxLookahead,I.getProductionDslName(a))}),r.forEach(i,function(a){t.computeLookaheadFunc(l,a.idx,m.MANY_SEP_IDX,h.PROD_TYPE.REPETITION_WITH_SEPARATOR,a.maxLookahead,I.getProductionDslName(a))})})})},y.prototype.computeLookaheadFunc=function(o,t,l,s,g,f){var v=this;this.TRACE_INIT(""+f+(t===0?"":t),function(){var p=h.buildLookaheadFuncForOptionalProd(t,o,g||v.maxLookahead,v.dynamicTokensEnabled,s,v.lookAheadBuilderForOptional),n=m.getKeyForAutomaticLookahead(v.fullRuleNameToShort[o.name],l,t);v.setLaFuncCache(n,p)})},y.prototype.lookAheadBuilderForOptional=function(o,t,l){return h.buildSingleAlternativeLookaheadFunction(o,t,l)},y.prototype.lookAheadBuilderForAlternatives=function(o,t,l,s){return h.buildAlternativesLookAheadFunc(o,t,l,s)},y.prototype.getKeyForAutomaticLookahead=function(o,t){var l=this.getLastExplicitRuleShortName();return m.getKeyForAutomaticLookahead(l,o,t)},y.prototype.getLaFuncFromCache=function(o){},y.prototype.getLaFuncFromMap=function(o){return this.lookAheadFuncsCache.get(o)},y.prototype.getLaFuncFromObj=function(o){return this.lookAheadFuncsCache[o]},y.prototype.setLaFuncCache=function(o,t){},y.prototype.setLaFuncCacheUsingMap=function(o,t){this.lookAheadFuncsCache.set(o,t)},y.prototype.setLaFuncUsingObj=function(o,t){this.lookAheadFuncsCache[o]=t},y})();e.LooksAhead=u}),tn=Te(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.addNoneTerminalToCst=e.addTerminalToCst=e.setNodeLocationFull=e.setNodeLocationOnlyOffset=void 0;function h(I,u){isNaN(I.startOffset)===!0?(I.startOffset=u.startOffset,I.endOffset=u.endOffset):I.endOffset<u.endOffset&&(I.endOffset=u.endOffset)}e.setNodeLocationOnlyOffset=h;function r(I,u){isNaN(I.startOffset)===!0?(I.startOffset=u.startOffset,I.startColumn=u.startColumn,I.startLine=u.startLine,I.endOffset=u.endOffset,I.endColumn=u.endColumn,I.endLine=u.endLine):I.endOffset<u.endOffset&&(I.endOffset=u.endOffset,I.endColumn=u.endColumn,I.endLine=u.endLine)}e.setNodeLocationFull=r;function E(I,u,y){I.children[y]===void 0?I.children[y]=[u]:I.children[y].push(u)}e.addTerminalToCst=E;function m(I,u,y){I.children[u]===void 0?I.children[u]=[y]:I.children[u].push(y)}e.addNoneTerminalToCst=m}),Lt=Te(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.defineNameProp=e.functionName=e.classNameFromInstance=void 0;var h=ke();function r(u){return m(u.constructor)}e.classNameFromInstance=r;var E="name";function m(u){var y=u.name;return y||"anonymous"}e.functionName=m;function I(u,y){var o=Object.getOwnPropertyDescriptor(u,E);return h.isUndefined(o)||o.configurable?(Object.defineProperty(u,E,{enumerable:!1,configurable:!0,writable:!1,value:y}),!0):!1}e.defineNameProp=I}),nn=Te(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.validateRedundantMethods=e.validateMissingCstMethods=e.validateVisitor=e.CstVisitorDefinitionError=e.createBaseVisitorConstructorWithDefaults=e.createBaseSemanticVisitorConstructor=e.defaultVisit=void 0;var h=ke(),r=Lt();function E(s,g){for(var f=h.keys(s),v=f.length,p=0;p<v;p++)for(var n=f[p],i=s[n],a=i.length,d=0;d<a;d++){var c=i[d];c.tokenTypeIdx===void 0&&this[c.name](c.children,g)}}e.defaultVisit=E;function m(s,g){var f=function(){};r.defineNameProp(f,s+"BaseSemantics");var v={visit:function(p,n){if(h.isArray(p)&&(p=p[0]),!h.isUndefined(p))return this[p.name](p.children,n)},validateVisitor:function(){var p=y(this,g);if(!h.isEmpty(p)){var n=h.map(p,function(i){return i.msg});throw Error("Errors Detected in CST Visitor <"+r.functionName(this.constructor)+`>:
	`+(""+n.join(`

`).replace(/\n/g,`
	`)))}}};return f.prototype=v,f.prototype.constructor=f,f._RULE_NAMES=g,f}e.createBaseSemanticVisitorConstructor=m;function I(s,g,f){var v=function(){};r.defineNameProp(v,s+"BaseSemanticsWithDefaults");var p=Object.create(f.prototype);return h.forEach(g,function(n){p[n]=E}),v.prototype=p,v.prototype.constructor=v,v}e.createBaseVisitorConstructorWithDefaults=I;var u;(function(s){s[s.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",s[s.MISSING_METHOD=1]="MISSING_METHOD"})(u=e.CstVisitorDefinitionError||(e.CstVisitorDefinitionError={}));function y(s,g){var f=o(s,g),v=l(s,g);return f.concat(v)}e.validateVisitor=y;function o(s,g){var f=h.map(g,function(v){if(!h.isFunction(s[v]))return{msg:"Missing visitor method: <"+v+"> on "+r.functionName(s.constructor)+" CST Visitor.",type:u.MISSING_METHOD,methodName:v}});return h.compact(f)}e.validateMissingCstMethods=o;var t=["constructor","visit","validateVisitor"];function l(s,g){var f=[];for(var v in s)h.isFunction(s[v])&&!h.contains(t,v)&&!h.contains(g,v)&&f.push({msg:"Redundant visitor method: <"+v+"> on "+r.functionName(s.constructor)+` CST Visitor
There is no Grammar Rule corresponding to this method's name.
`,type:u.REDUNDANT_METHOD,methodName:v});return f}e.validateRedundantMethods=l}),rn=Te(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TreeBuilder=void 0;var h=tn(),r=ke(),E=nn(),m=je(),I=(function(){function u(){}return u.prototype.initTreeBuilder=function(y){if(this.CST_STACK=[],this.outputCst=y.outputCst,this.nodeLocationTracking=r.has(y,"nodeLocationTracking")?y.nodeLocationTracking:m.DEFAULT_PARSER_CONFIG.nodeLocationTracking,!this.outputCst)this.cstInvocationStateUpdate=r.NOOP,this.cstFinallyStateUpdate=r.NOOP,this.cstPostTerminal=r.NOOP,this.cstPostNonTerminal=r.NOOP,this.cstPostRule=r.NOOP;else if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=h.setNodeLocationFull,this.setNodeLocationFromNode=h.setNodeLocationFull,this.cstPostRule=r.NOOP,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=r.NOOP,this.setNodeLocationFromNode=r.NOOP,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=h.setNodeLocationOnlyOffset,this.setNodeLocationFromNode=h.setNodeLocationOnlyOffset,this.cstPostRule=r.NOOP,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=r.NOOP,this.setNodeLocationFromNode=r.NOOP,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else if(/none/i.test(this.nodeLocationTracking))this.setNodeLocationFromToken=r.NOOP,this.setNodeLocationFromNode=r.NOOP,this.cstPostRule=r.NOOP,this.setInitialNodeLocation=r.NOOP;else throw Error('Invalid <nodeLocationTracking> config option: "'+y.nodeLocationTracking+'"')},u.prototype.setInitialNodeLocationOnlyOffsetRecovery=function(y){y.location={startOffset:NaN,endOffset:NaN}},u.prototype.setInitialNodeLocationOnlyOffsetRegular=function(y){y.location={startOffset:this.LA(1).startOffset,endOffset:NaN}},u.prototype.setInitialNodeLocationFullRecovery=function(y){y.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}},u.prototype.setInitialNodeLocationFullRegular=function(y){var o=this.LA(1);y.location={startOffset:o.startOffset,startLine:o.startLine,startColumn:o.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}},u.prototype.cstInvocationStateUpdate=function(y,o){var t={name:y,children:{}};this.setInitialNodeLocation(t),this.CST_STACK.push(t)},u.prototype.cstFinallyStateUpdate=function(){this.CST_STACK.pop()},u.prototype.cstPostRuleFull=function(y){var o=this.LA(0),t=y.location;t.startOffset<=o.startOffset?(t.endOffset=o.endOffset,t.endLine=o.endLine,t.endColumn=o.endColumn):(t.startOffset=NaN,t.startLine=NaN,t.startColumn=NaN)},u.prototype.cstPostRuleOnlyOffset=function(y){var o=this.LA(0),t=y.location;t.startOffset<=o.startOffset?t.endOffset=o.endOffset:t.startOffset=NaN},u.prototype.cstPostTerminal=function(y,o){var t=this.CST_STACK[this.CST_STACK.length-1];h.addTerminalToCst(t,o,y),this.setNodeLocationFromToken(t.location,o)},u.prototype.cstPostNonTerminal=function(y,o){var t=this.CST_STACK[this.CST_STACK.length-1];h.addNoneTerminalToCst(t,o,y),this.setNodeLocationFromNode(t.location,y.location)},u.prototype.getBaseCstVisitorConstructor=function(){if(r.isUndefined(this.baseCstVisitorConstructor)){var y=E.createBaseSemanticVisitorConstructor(this.className,r.keys(this.gastProductionsCache));return this.baseCstVisitorConstructor=y,y}return this.baseCstVisitorConstructor},u.prototype.getBaseCstVisitorConstructorWithDefaults=function(){if(r.isUndefined(this.baseCstVisitorWithDefaultsConstructor)){var y=E.createBaseVisitorConstructorWithDefaults(this.className,r.keys(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=y,y}return this.baseCstVisitorWithDefaultsConstructor},u.prototype.getLastExplicitRuleShortName=function(){var y=this.RULE_STACK;return y[y.length-1]},u.prototype.getPreviousExplicitRuleShortName=function(){var y=this.RULE_STACK;return y[y.length-2]},u.prototype.getLastExplicitRuleOccurrenceIndex=function(){var y=this.RULE_OCCURRENCE_STACK;return y[y.length-1]},u})();e.TreeBuilder=I}),on=Te(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LexerAdapter=void 0;var h=je(),r=(function(){function E(){}return E.prototype.initLexerAdapter=function(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1},Object.defineProperty(E.prototype,"input",{get:function(){return this.tokVector},set:function(m){if(this.selfAnalysisDone!==!0)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=m,this.tokVectorLength=m.length},enumerable:!1,configurable:!0}),E.prototype.SKIP_TOKEN=function(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):h.END_OF_FILE},E.prototype.LA=function(m){var I=this.currIdx+m;return I<0||this.tokVectorLength<=I?h.END_OF_FILE:this.tokVector[I]},E.prototype.consumeToken=function(){this.currIdx++},E.prototype.exportLexerState=function(){return this.currIdx},E.prototype.importLexerState=function(m){this.currIdx=m},E.prototype.resetLexerState=function(){this.currIdx=-1},E.prototype.moveToTerminatedState=function(){this.currIdx=this.tokVector.length-1},E.prototype.getLexerPosition=function(){return this.exportLexerState()},E})();e.LexerAdapter=r}),an=Te(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.RecognizerApi=void 0;var h=ke(),r=tt(),E=je(),m=st(),I=_t(),u=Ge(),y=(function(){function o(){}return o.prototype.ACTION=function(t){return t.call(this)},o.prototype.consume=function(t,l,s){return this.consumeInternal(l,t,s)},o.prototype.subrule=function(t,l,s){return this.subruleInternal(l,t,s)},o.prototype.option=function(t,l){return this.optionInternal(l,t)},o.prototype.or=function(t,l){return this.orInternal(l,t)},o.prototype.many=function(t,l){return this.manyInternal(t,l)},o.prototype.atLeastOne=function(t,l){return this.atLeastOneInternal(t,l)},o.prototype.CONSUME=function(t,l){return this.consumeInternal(t,0,l)},o.prototype.CONSUME1=function(t,l){return this.consumeInternal(t,1,l)},o.prototype.CONSUME2=function(t,l){return this.consumeInternal(t,2,l)},o.prototype.CONSUME3=function(t,l){return this.consumeInternal(t,3,l)},o.prototype.CONSUME4=function(t,l){return this.consumeInternal(t,4,l)},o.prototype.CONSUME5=function(t,l){return this.consumeInternal(t,5,l)},o.prototype.CONSUME6=function(t,l){return this.consumeInternal(t,6,l)},o.prototype.CONSUME7=function(t,l){return this.consumeInternal(t,7,l)},o.prototype.CONSUME8=function(t,l){return this.consumeInternal(t,8,l)},o.prototype.CONSUME9=function(t,l){return this.consumeInternal(t,9,l)},o.prototype.SUBRULE=function(t,l){return this.subruleInternal(t,0,l)},o.prototype.SUBRULE1=function(t,l){return this.subruleInternal(t,1,l)},o.prototype.SUBRULE2=function(t,l){return this.subruleInternal(t,2,l)},o.prototype.SUBRULE3=function(t,l){return this.subruleInternal(t,3,l)},o.prototype.SUBRULE4=function(t,l){return this.subruleInternal(t,4,l)},o.prototype.SUBRULE5=function(t,l){return this.subruleInternal(t,5,l)},o.prototype.SUBRULE6=function(t,l){return this.subruleInternal(t,6,l)},o.prototype.SUBRULE7=function(t,l){return this.subruleInternal(t,7,l)},o.prototype.SUBRULE8=function(t,l){return this.subruleInternal(t,8,l)},o.prototype.SUBRULE9=function(t,l){return this.subruleInternal(t,9,l)},o.prototype.OPTION=function(t){return this.optionInternal(t,0)},o.prototype.OPTION1=function(t){return this.optionInternal(t,1)},o.prototype.OPTION2=function(t){return this.optionInternal(t,2)},o.prototype.OPTION3=function(t){return this.optionInternal(t,3)},o.prototype.OPTION4=function(t){return this.optionInternal(t,4)},o.prototype.OPTION5=function(t){return this.optionInternal(t,5)},o.prototype.OPTION6=function(t){return this.optionInternal(t,6)},o.prototype.OPTION7=function(t){return this.optionInternal(t,7)},o.prototype.OPTION8=function(t){return this.optionInternal(t,8)},o.prototype.OPTION9=function(t){return this.optionInternal(t,9)},o.prototype.OR=function(t){return this.orInternal(t,0)},o.prototype.OR1=function(t){return this.orInternal(t,1)},o.prototype.OR2=function(t){return this.orInternal(t,2)},o.prototype.OR3=function(t){return this.orInternal(t,3)},o.prototype.OR4=function(t){return this.orInternal(t,4)},o.prototype.OR5=function(t){return this.orInternal(t,5)},o.prototype.OR6=function(t){return this.orInternal(t,6)},o.prototype.OR7=function(t){return this.orInternal(t,7)},o.prototype.OR8=function(t){return this.orInternal(t,8)},o.prototype.OR9=function(t){return this.orInternal(t,9)},o.prototype.MANY=function(t){this.manyInternal(0,t)},o.prototype.MANY1=function(t){this.manyInternal(1,t)},o.prototype.MANY2=function(t){this.manyInternal(2,t)},o.prototype.MANY3=function(t){this.manyInternal(3,t)},o.prototype.MANY4=function(t){this.manyInternal(4,t)},o.prototype.MANY5=function(t){this.manyInternal(5,t)},o.prototype.MANY6=function(t){this.manyInternal(6,t)},o.prototype.MANY7=function(t){this.manyInternal(7,t)},o.prototype.MANY8=function(t){this.manyInternal(8,t)},o.prototype.MANY9=function(t){this.manyInternal(9,t)},o.prototype.MANY_SEP=function(t){this.manySepFirstInternal(0,t)},o.prototype.MANY_SEP1=function(t){this.manySepFirstInternal(1,t)},o.prototype.MANY_SEP2=function(t){this.manySepFirstInternal(2,t)},o.prototype.MANY_SEP3=function(t){this.manySepFirstInternal(3,t)},o.prototype.MANY_SEP4=function(t){this.manySepFirstInternal(4,t)},o.prototype.MANY_SEP5=function(t){this.manySepFirstInternal(5,t)},o.prototype.MANY_SEP6=function(t){this.manySepFirstInternal(6,t)},o.prototype.MANY_SEP7=function(t){this.manySepFirstInternal(7,t)},o.prototype.MANY_SEP8=function(t){this.manySepFirstInternal(8,t)},o.prototype.MANY_SEP9=function(t){this.manySepFirstInternal(9,t)},o.prototype.AT_LEAST_ONE=function(t){this.atLeastOneInternal(0,t)},o.prototype.AT_LEAST_ONE1=function(t){return this.atLeastOneInternal(1,t)},o.prototype.AT_LEAST_ONE2=function(t){this.atLeastOneInternal(2,t)},o.prototype.AT_LEAST_ONE3=function(t){this.atLeastOneInternal(3,t)},o.prototype.AT_LEAST_ONE4=function(t){this.atLeastOneInternal(4,t)},o.prototype.AT_LEAST_ONE5=function(t){this.atLeastOneInternal(5,t)},o.prototype.AT_LEAST_ONE6=function(t){this.atLeastOneInternal(6,t)},o.prototype.AT_LEAST_ONE7=function(t){this.atLeastOneInternal(7,t)},o.prototype.AT_LEAST_ONE8=function(t){this.atLeastOneInternal(8,t)},o.prototype.AT_LEAST_ONE9=function(t){this.atLeastOneInternal(9,t)},o.prototype.AT_LEAST_ONE_SEP=function(t){this.atLeastOneSepFirstInternal(0,t)},o.prototype.AT_LEAST_ONE_SEP1=function(t){this.atLeastOneSepFirstInternal(1,t)},o.prototype.AT_LEAST_ONE_SEP2=function(t){this.atLeastOneSepFirstInternal(2,t)},o.prototype.AT_LEAST_ONE_SEP3=function(t){this.atLeastOneSepFirstInternal(3,t)},o.prototype.AT_LEAST_ONE_SEP4=function(t){this.atLeastOneSepFirstInternal(4,t)},o.prototype.AT_LEAST_ONE_SEP5=function(t){this.atLeastOneSepFirstInternal(5,t)},o.prototype.AT_LEAST_ONE_SEP6=function(t){this.atLeastOneSepFirstInternal(6,t)},o.prototype.AT_LEAST_ONE_SEP7=function(t){this.atLeastOneSepFirstInternal(7,t)},o.prototype.AT_LEAST_ONE_SEP8=function(t){this.atLeastOneSepFirstInternal(8,t)},o.prototype.AT_LEAST_ONE_SEP9=function(t){this.atLeastOneSepFirstInternal(9,t)},o.prototype.RULE=function(t,l,s){if(s===void 0&&(s=E.DEFAULT_RULE_CONFIG),h.contains(this.definedRulesNames,t)){var g=m.defaultGrammarValidatorErrorProvider.buildDuplicateRuleNameError({topLevelRule:t,grammarName:this.className}),f={message:g,type:E.ParserDefinitionErrorType.DUPLICATE_RULE_NAME,ruleName:t};this.definitionErrors.push(f)}this.definedRulesNames.push(t);var v=this.defineRule(t,l,s);return this[t]=v,v},o.prototype.OVERRIDE_RULE=function(t,l,s){s===void 0&&(s=E.DEFAULT_RULE_CONFIG);var g=[];g=g.concat(I.validateRuleIsOverridden(t,this.definedRulesNames,this.className)),this.definitionErrors=this.definitionErrors.concat(g);var f=this.defineRule(t,l,s);return this[t]=f,f},o.prototype.BACKTRACK=function(t,l){return function(){this.isBackTrackingStack.push(1);var s=this.saveRecogState();try{return t.apply(this,l),!0}catch(g){if(r.isRecognitionException(g))return!1;throw g}finally{this.reloadRecogState(s),this.isBackTrackingStack.pop()}}},o.prototype.getGAstProductions=function(){return this.gastProductionsCache},o.prototype.getSerializedGastProductions=function(){return u.serializeGrammar(h.values(this.gastProductionsCache))},o})();e.RecognizerApi=y}),sn=Te(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.RecognizerEngine=void 0;var h=ke(),r=yt(),E=tt(),m=ut(),I=ct(),u=je(),y=kt(),o=Xe(),t=$e(),l=Lt(),s=(function(){function g(){}return g.prototype.initRecognizerEngine=function(f,v){if(this.className=l.classNameFromInstance(this),this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=t.tokenStructuredMatcherNoCategories,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},h.has(v,"serializedGrammar"))throw Error(`The Parser's configuration can no longer contain a <serializedGrammar> property.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0
	For Further details.`);if(h.isArray(f)){if(h.isEmpty(f))throw Error(`A Token Vocabulary cannot be empty.
	Note that the first argument for the parser constructor
	is no longer a Token vector (since v4.0).`);if(typeof f[0].startOffset=="number")throw Error(`The Parser constructor no longer accepts a token vector as the first argument.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0
	For Further details.`)}if(h.isArray(f))this.tokensMap=h.reduce(f,function(a,d){return a[d.name]=d,a},{});else if(h.has(f,"modes")&&h.every(h.flatten(h.values(f.modes)),t.isTokenType)){var p=h.flatten(h.values(f.modes)),n=h.uniq(p);this.tokensMap=h.reduce(n,function(a,d){return a[d.name]=d,a},{})}else if(h.isObject(f))this.tokensMap=h.cloneObj(f);else throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap.EOF=o.EOF;var i=h.every(h.values(f),function(a){return h.isEmpty(a.categoryMatches)});this.tokenMatcher=i?t.tokenStructuredMatcherNoCategories:t.tokenStructuredMatcher,t.augmentTokenTypes(h.values(this.tokensMap))},g.prototype.defineRule=function(f,v,p){if(this.selfAnalysisDone)throw Error("Grammar rule <"+f+`> may not be defined after the 'performSelfAnalysis' method has been called'
Make sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.`);var n=h.has(p,"resyncEnabled")?p.resyncEnabled:u.DEFAULT_RULE_CONFIG.resyncEnabled,i=h.has(p,"recoveryValueFunc")?p.recoveryValueFunc:u.DEFAULT_RULE_CONFIG.recoveryValueFunc,a=this.ruleShortNameIdx<<r.BITS_FOR_METHOD_TYPE+r.BITS_FOR_OCCURRENCE_IDX;this.ruleShortNameIdx++,this.shortRuleNameToFull[a]=f,this.fullRuleNameToShort[f]=a;function d(D){try{if(this.outputCst===!0){v.apply(this,D);var w=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(w),w}else return v.apply(this,D)}catch(Y){return this.invokeRuleCatch(Y,n,i)}finally{this.ruleFinallyStateUpdate()}}var c=function(D,w){return D===void 0&&(D=0),this.ruleInvocationStateUpdate(a,f,D),d.call(this,w)},b="ruleName";return c[b]=f,c.originalGrammarAction=v,c},g.prototype.invokeRuleCatch=function(f,v,p){var n=this.RULE_STACK.length===1,i=v&&!this.isBackTracking()&&this.recoveryEnabled;if(E.isRecognitionException(f)){var a=f;if(i){var d=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(d))if(a.resyncedTokens=this.reSyncTo(d),this.outputCst){var c=this.CST_STACK[this.CST_STACK.length-1];return c.recoveredNode=!0,c}else return p();else{if(this.outputCst){var c=this.CST_STACK[this.CST_STACK.length-1];c.recoveredNode=!0,a.partialCstResult=c}throw a}}else{if(n)return this.moveToTerminatedState(),p();throw a}}else throw f},g.prototype.optionInternal=function(f,v){var p=this.getKeyForAutomaticLookahead(r.OPTION_IDX,v);return this.optionInternalLogic(f,v,p)},g.prototype.optionInternalLogic=function(f,v,p){var n=this,i=this.getLaFuncFromCache(p),a,d;if(f.DEF!==void 0){if(a=f.DEF,d=f.GATE,d!==void 0){var c=i;i=function(){return d.call(n)&&c.call(n)}}}else a=f;if(i.call(this)===!0)return a.call(this)},g.prototype.atLeastOneInternal=function(f,v){var p=this.getKeyForAutomaticLookahead(r.AT_LEAST_ONE_IDX,f);return this.atLeastOneInternalLogic(f,v,p)},g.prototype.atLeastOneInternalLogic=function(f,v,p){var n=this,i=this.getLaFuncFromCache(p),a,d;if(v.DEF!==void 0){if(a=v.DEF,d=v.GATE,d!==void 0){var c=i;i=function(){return d.call(n)&&c.call(n)}}}else a=v;if(i.call(this)===!0)for(var b=this.doSingleRepetition(a);i.call(this)===!0&&b===!0;)b=this.doSingleRepetition(a);else throw this.raiseEarlyExitException(f,m.PROD_TYPE.REPETITION_MANDATORY,v.ERR_MSG);this.attemptInRepetitionRecovery(this.atLeastOneInternal,[f,v],i,r.AT_LEAST_ONE_IDX,f,I.NextTerminalAfterAtLeastOneWalker)},g.prototype.atLeastOneSepFirstInternal=function(f,v){var p=this.getKeyForAutomaticLookahead(r.AT_LEAST_ONE_SEP_IDX,f);this.atLeastOneSepFirstInternalLogic(f,v,p)},g.prototype.atLeastOneSepFirstInternalLogic=function(f,v,p){var n=this,i=v.DEF,a=v.SEP,d=this.getLaFuncFromCache(p);if(d.call(this)===!0){i.call(this);for(var c=function(){return n.tokenMatcher(n.LA(1),a)};this.tokenMatcher(this.LA(1),a)===!0;)this.CONSUME(a),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[f,a,c,i,I.NextTerminalAfterAtLeastOneSepWalker],c,r.AT_LEAST_ONE_SEP_IDX,f,I.NextTerminalAfterAtLeastOneSepWalker)}else throw this.raiseEarlyExitException(f,m.PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR,v.ERR_MSG)},g.prototype.manyInternal=function(f,v){var p=this.getKeyForAutomaticLookahead(r.MANY_IDX,f);return this.manyInternalLogic(f,v,p)},g.prototype.manyInternalLogic=function(f,v,p){var n=this,i=this.getLaFuncFromCache(p),a,d;if(v.DEF!==void 0){if(a=v.DEF,d=v.GATE,d!==void 0){var c=i;i=function(){return d.call(n)&&c.call(n)}}}else a=v;for(var b=!0;i.call(this)===!0&&b===!0;)b=this.doSingleRepetition(a);this.attemptInRepetitionRecovery(this.manyInternal,[f,v],i,r.MANY_IDX,f,I.NextTerminalAfterManyWalker,b)},g.prototype.manySepFirstInternal=function(f,v){var p=this.getKeyForAutomaticLookahead(r.MANY_SEP_IDX,f);this.manySepFirstInternalLogic(f,v,p)},g.prototype.manySepFirstInternalLogic=function(f,v,p){var n=this,i=v.DEF,a=v.SEP,d=this.getLaFuncFromCache(p);if(d.call(this)===!0){i.call(this);for(var c=function(){return n.tokenMatcher(n.LA(1),a)};this.tokenMatcher(this.LA(1),a)===!0;)this.CONSUME(a),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[f,a,c,i,I.NextTerminalAfterManySepWalker],c,r.MANY_SEP_IDX,f,I.NextTerminalAfterManySepWalker)}},g.prototype.repetitionSepSecondInternal=function(f,v,p,n,i){for(;p();)this.CONSUME(v),n.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[f,v,p,n,i],p,r.AT_LEAST_ONE_SEP_IDX,f,i)},g.prototype.doSingleRepetition=function(f){var v=this.getLexerPosition();f.call(this);var p=this.getLexerPosition();return p>v},g.prototype.orInternal=function(f,v){var p=this.getKeyForAutomaticLookahead(r.OR_IDX,v),n=h.isArray(f)?f:f.DEF,i=this.getLaFuncFromCache(p),a=i.call(this,n);if(a!==void 0){var d=n[a];return d.ALT.call(this)}this.raiseNoAltException(v,f.ERR_MSG)},g.prototype.ruleFinallyStateUpdate=function(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),this.RULE_STACK.length===0&&this.isAtEndOfInput()===!1){var f=this.LA(1),v=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:f,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new E.NotAllInputParsedException(v,f))}},g.prototype.subruleInternal=function(f,v,p){var n;try{var i=p!==void 0?p.ARGS:void 0;return n=f.call(this,v,i),this.cstPostNonTerminal(n,p!==void 0&&p.LABEL!==void 0?p.LABEL:f.ruleName),n}catch(a){this.subruleInternalError(a,p,f.ruleName)}},g.prototype.subruleInternalError=function(f,v,p){throw E.isRecognitionException(f)&&f.partialCstResult!==void 0&&(this.cstPostNonTerminal(f.partialCstResult,v!==void 0&&v.LABEL!==void 0?v.LABEL:p),delete f.partialCstResult),f},g.prototype.consumeInternal=function(f,v,p){var n;try{var i=this.LA(1);this.tokenMatcher(i,f)===!0?(this.consumeToken(),n=i):this.consumeInternalError(f,i,p)}catch(a){n=this.consumeInternalRecovery(f,v,a)}return this.cstPostTerminal(p!==void 0&&p.LABEL!==void 0?p.LABEL:f.name,n),n},g.prototype.consumeInternalError=function(f,v,p){var n,i=this.LA(0);throw p!==void 0&&p.ERR_MSG?n=p.ERR_MSG:n=this.errorMessageProvider.buildMismatchTokenMessage({expected:f,actual:v,previous:i,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new E.MismatchedTokenException(n,v,i))},g.prototype.consumeInternalRecovery=function(f,v,p){if(this.recoveryEnabled&&p.name==="MismatchedTokenException"&&!this.isBackTracking()){var n=this.getFollowsForInRuleRecovery(f,v);try{return this.tryInRuleRecovery(f,n)}catch(i){throw i.name===y.IN_RULE_RECOVERY_EXCEPTION?p:i}}else throw p},g.prototype.saveRecogState=function(){var f=this.errors,v=h.cloneArr(this.RULE_STACK);return{errors:f,lexerState:this.exportLexerState(),RULE_STACK:v,CST_STACK:this.CST_STACK}},g.prototype.reloadRecogState=function(f){this.errors=f.errors,this.importLexerState(f.lexerState),this.RULE_STACK=f.RULE_STACK},g.prototype.ruleInvocationStateUpdate=function(f,v,p){this.RULE_OCCURRENCE_STACK.push(p),this.RULE_STACK.push(f),this.cstInvocationStateUpdate(v,f)},g.prototype.isBackTracking=function(){return this.isBackTrackingStack.length!==0},g.prototype.getCurrRuleFullName=function(){var f=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[f]},g.prototype.shortRuleNameToFullName=function(f){return this.shortRuleNameToFull[f]},g.prototype.isAtEndOfInput=function(){return this.tokenMatcher(this.LA(1),o.EOF)},g.prototype.reset=function(){this.resetLexerState(),this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]},g})();e.RecognizerEngine=s}),cn=Te(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ErrorHandler=void 0;var h=tt(),r=ke(),E=ut(),m=je(),I=(function(){function u(){}return u.prototype.initErrorHandler=function(y){this._errors=[],this.errorMessageProvider=r.has(y,"errorMessageProvider")?y.errorMessageProvider:m.DEFAULT_PARSER_CONFIG.errorMessageProvider},u.prototype.SAVE_ERROR=function(y){if(h.isRecognitionException(y))return y.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:r.cloneArr(this.RULE_OCCURRENCE_STACK)},this._errors.push(y),y;throw Error("Trying to save an Error which is not a RecognitionException")},Object.defineProperty(u.prototype,"errors",{get:function(){return r.cloneArr(this._errors)},set:function(y){this._errors=y},enumerable:!1,configurable:!0}),u.prototype.raiseEarlyExitException=function(y,o,t){for(var l=this.getCurrRuleFullName(),s=this.getGAstProductions()[l],g=E.getLookaheadPathsForOptionalProd(y,s,o,this.maxLookahead),f=g[0],v=[],p=1;p<=this.maxLookahead;p++)v.push(this.LA(p));var n=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:f,actual:v,previous:this.LA(0),customUserDescription:t,ruleName:l});throw this.SAVE_ERROR(new h.EarlyExitException(n,this.LA(1),this.LA(0)))},u.prototype.raiseNoAltException=function(y,o){for(var t=this.getCurrRuleFullName(),l=this.getGAstProductions()[t],s=E.getLookaheadPathsForOr(y,l,this.maxLookahead),g=[],f=1;f<=this.maxLookahead;f++)g.push(this.LA(f));var v=this.LA(0),p=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:s,actual:g,previous:v,customUserDescription:o,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new h.NoViableAltException(p,this.LA(1),v))},u})();e.ErrorHandler=I}),un=Te(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ContentAssist=void 0;var h=ct(),r=ke(),E=(function(){function m(){}return m.prototype.initContentAssist=function(){},m.prototype.computeContentAssist=function(I,u){var y=this.gastProductionsCache[I];if(r.isUndefined(y))throw Error("Rule ->"+I+"<- does not exist in this grammar.");return h.nextPossibleTokensAfter([y],u,this.tokenMatcher,this.maxLookahead)},m.prototype.getNextPossibleTokenTypes=function(I){var u=r.first(I.ruleStack),y=this.getGAstProductions(),o=y[u],t=new h.NextAfterTokenWalker(o,I).startWalking();return t},m})();e.ContentAssist=E}),ln=Te(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GastRecorder=void 0;var h=ke(),r=Ge(),E=it(),m=$e(),I=Xe(),u=je(),y=yt(),o={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(o);var t=!0,l=Math.pow(2,y.BITS_FOR_OCCURRENCE_IDX)-1,s=I.createToken({name:"RECORDING_PHASE_TOKEN",pattern:E.Lexer.NA});m.augmentTokenTypes([s]);var g=I.createTokenInstance(s,`This IToken indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,-1,-1,-1,-1,-1,-1);Object.freeze(g);var f={name:`This CSTNode indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,children:{}},v=(function(){function d(){}return d.prototype.initGastRecorder=function(c){this.recordingProdStack=[],this.RECORDING_PHASE=!1},d.prototype.enableRecording=function(){var c=this;this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",function(){for(var b=function(w){var Y=w>0?w:"";c["CONSUME"+Y]=function(_,B){return this.consumeInternalRecord(_,w,B)},c["SUBRULE"+Y]=function(_,B){return this.subruleInternalRecord(_,w,B)},c["OPTION"+Y]=function(_){return this.optionInternalRecord(_,w)},c["OR"+Y]=function(_){return this.orInternalRecord(_,w)},c["MANY"+Y]=function(_){this.manyInternalRecord(w,_)},c["MANY_SEP"+Y]=function(_){this.manySepFirstInternalRecord(w,_)},c["AT_LEAST_ONE"+Y]=function(_){this.atLeastOneInternalRecord(w,_)},c["AT_LEAST_ONE_SEP"+Y]=function(_){this.atLeastOneSepFirstInternalRecord(w,_)}},D=0;D<10;D++)b(D);c.consume=function(w,Y,_){return this.consumeInternalRecord(Y,w,_)},c.subrule=function(w,Y,_){return this.subruleInternalRecord(Y,w,_)},c.option=function(w,Y){return this.optionInternalRecord(Y,w)},c.or=function(w,Y){return this.orInternalRecord(Y,w)},c.many=function(w,Y){this.manyInternalRecord(w,Y)},c.atLeastOne=function(w,Y){this.atLeastOneInternalRecord(w,Y)},c.ACTION=c.ACTION_RECORD,c.BACKTRACK=c.BACKTRACK_RECORD,c.LA=c.LA_RECORD})},d.prototype.disableRecording=function(){var c=this;this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",function(){for(var b=0;b<10;b++){var D=b>0?b:"";delete c["CONSUME"+D],delete c["SUBRULE"+D],delete c["OPTION"+D],delete c["OR"+D],delete c["MANY"+D],delete c["MANY_SEP"+D],delete c["AT_LEAST_ONE"+D],delete c["AT_LEAST_ONE_SEP"+D]}delete c.consume,delete c.subrule,delete c.option,delete c.or,delete c.many,delete c.atLeastOne,delete c.ACTION,delete c.BACKTRACK,delete c.LA})},d.prototype.ACTION_RECORD=function(c){},d.prototype.BACKTRACK_RECORD=function(c,b){return function(){return!0}},d.prototype.LA_RECORD=function(c){return u.END_OF_FILE},d.prototype.topLevelRuleRecord=function(c,b){try{var D=new r.Rule({definition:[],name:c});return D.name=c,this.recordingProdStack.push(D),b.call(this),this.recordingProdStack.pop(),D}catch(w){if(w.KNOWN_RECORDER_ERROR!==!0)try{w.message=w.message+`
	 This error was thrown during the "grammar recording phase" For more info see:
	https://chevrotain.io/docs/guide/internals.html#grammar-recording`}catch{throw w}throw w}},d.prototype.optionInternalRecord=function(c,b){return p.call(this,r.Option,c,b)},d.prototype.atLeastOneInternalRecord=function(c,b){p.call(this,r.RepetitionMandatory,b,c)},d.prototype.atLeastOneSepFirstInternalRecord=function(c,b){p.call(this,r.RepetitionMandatoryWithSeparator,b,c,t)},d.prototype.manyInternalRecord=function(c,b){p.call(this,r.Repetition,b,c)},d.prototype.manySepFirstInternalRecord=function(c,b){p.call(this,r.RepetitionWithSeparator,b,c,t)},d.prototype.orInternalRecord=function(c,b){return n.call(this,c,b)},d.prototype.subruleInternalRecord=function(c,b,D){if(a(b),!c||h.has(c,"ruleName")===!1){var w=new Error("<SUBRULE"+i(b)+"> argument is invalid"+(" expecting a Parser method reference but got: <"+JSON.stringify(c)+">")+(`
 inside top level rule: <`+this.recordingProdStack[0].name+">"));throw w.KNOWN_RECORDER_ERROR=!0,w}var Y=h.peek(this.recordingProdStack),_=c.ruleName,B=new r.NonTerminal({idx:b,nonTerminalName:_,referencedRule:void 0});return Y.definition.push(B),this.outputCst?f:o},d.prototype.consumeInternalRecord=function(c,b,D){if(a(b),!m.hasShortKeyProperty(c)){var w=new Error("<CONSUME"+i(b)+"> argument is invalid"+(" expecting a TokenType reference but got: <"+JSON.stringify(c)+">")+(`
 inside top level rule: <`+this.recordingProdStack[0].name+">"));throw w.KNOWN_RECORDER_ERROR=!0,w}var Y=h.peek(this.recordingProdStack),_=new r.Terminal({idx:b,terminalType:c});return Y.definition.push(_),g},d})();e.GastRecorder=v;function p(d,c,b,D){D===void 0&&(D=!1),a(b);var w=h.peek(this.recordingProdStack),Y=h.isFunction(c)?c:c.DEF,_=new d({definition:[],idx:b});return D&&(_.separator=c.SEP),h.has(c,"MAX_LOOKAHEAD")&&(_.maxLookahead=c.MAX_LOOKAHEAD),this.recordingProdStack.push(_),Y.call(this),w.definition.push(_),this.recordingProdStack.pop(),o}function n(d,c){var b=this;a(c);var D=h.peek(this.recordingProdStack),w=h.isArray(d)===!1,Y=w===!1?d:d.DEF,_=new r.Alternation({definition:[],idx:c,ignoreAmbiguities:w&&d.IGNORE_AMBIGUITIES===!0});h.has(d,"MAX_LOOKAHEAD")&&(_.maxLookahead=d.MAX_LOOKAHEAD);var B=h.some(Y,function(x){return h.isFunction(x.GATE)});return _.hasPredicates=B,D.definition.push(_),h.forEach(Y,function(x){var N=new r.Alternative({definition:[]});_.definition.push(N),h.has(x,"IGNORE_AMBIGUITIES")?N.ignoreAmbiguities=x.IGNORE_AMBIGUITIES:h.has(x,"GATE")&&(N.ignoreAmbiguities=!0),b.recordingProdStack.push(N),x.ALT.call(b),b.recordingProdStack.pop()}),o}function i(d){return d===0?"":""+d}function a(d){if(d<0||d>l){var c=new Error("Invalid DSL Method idx value: <"+d+`>
	`+("Idx value must be a none negative value smaller than "+(l+1)));throw c.KNOWN_RECORDER_ERROR=!0,c}}}),fn=Te(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PerformanceTracer=void 0;var h=ke(),r=je(),E=(function(){function m(){}return m.prototype.initPerformanceTracer=function(I){if(h.has(I,"traceInitPerf")){var u=I.traceInitPerf,y=typeof u=="number";this.traceInitMaxIdent=y?u:1/0,this.traceInitPerf=y?u>0:u}else this.traceInitMaxIdent=0,this.traceInitPerf=r.DEFAULT_PARSER_CONFIG.traceInitPerf;this.traceInitIndent=-1},m.prototype.TRACE_INIT=function(I,u){if(this.traceInitPerf===!0){this.traceInitIndent++;var y=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(y+"--> <"+I+">");var o=h.timer(u),t=o.time,l=o.value,s=t>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&s(y+"<-- <"+I+"> time: "+t+"ms"),this.traceInitIndent--,l}else return u()},m})();e.PerformanceTracer=E}),pn=Te(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.applyMixins=void 0;function h(r,E){E.forEach(function(m){var I=m.prototype;Object.getOwnPropertyNames(I).forEach(function(u){if(u!=="constructor"){var y=Object.getOwnPropertyDescriptor(I,u);y&&(y.get||y.set)?Object.defineProperty(r.prototype,u,y):r.prototype[u]=m.prototype[u]}})})}e.applyMixins=h}),je=Te(e=>{var h=e&&e.__extends||(function(){var D=function(w,Y){return D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,B){_.__proto__=B}||function(_,B){for(var x in B)Object.prototype.hasOwnProperty.call(B,x)&&(_[x]=B[x])},D(w,Y)};return function(w,Y){if(typeof Y!="function"&&Y!==null)throw new TypeError("Class extends value "+String(Y)+" is not a constructor or null");D(w,Y);function _(){this.constructor=w}w.prototype=Y===null?Object.create(Y):(_.prototype=Y.prototype,new _)}})();Object.defineProperty(e,"__esModule",{value:!0}),e.EmbeddedActionsParser=e.CstParser=e.Parser=e.EMPTY_ALT=e.ParserDefinitionErrorType=e.DEFAULT_RULE_CONFIG=e.DEFAULT_PARSER_CONFIG=e.END_OF_FILE=void 0;var r=ke(),E=Zt(),m=Xe(),I=st(),u=$t(),y=kt(),o=en(),t=rn(),l=on(),s=an(),g=sn(),f=cn(),v=un(),p=ln(),n=fn(),i=pn();e.END_OF_FILE=m.createTokenInstance(m.EOF,"",NaN,NaN,NaN,NaN,NaN,NaN),Object.freeze(e.END_OF_FILE),e.DEFAULT_PARSER_CONFIG=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:I.defaultParserErrorProvider,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),e.DEFAULT_RULE_CONFIG=Object.freeze({recoveryValueFunc:function(){},resyncEnabled:!0}),(function(D){D[D.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",D[D.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",D[D.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",D[D.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",D[D.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",D[D.LEFT_RECURSION=5]="LEFT_RECURSION",D[D.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",D[D.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",D[D.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",D[D.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",D[D.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",D[D.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",D[D.TOO_MANY_ALTS=12]="TOO_MANY_ALTS"})(e.ParserDefinitionErrorType||(e.ParserDefinitionErrorType={}));function a(D){return D===void 0&&(D=void 0),function(){return D}}e.EMPTY_ALT=a;var d=(function(){function D(w,Y){this.definitionErrors=[],this.selfAnalysisDone=!1;var _=this;if(_.initErrorHandler(Y),_.initLexerAdapter(),_.initLooksAhead(Y),_.initRecognizerEngine(w,Y),_.initRecoverable(Y),_.initTreeBuilder(Y),_.initContentAssist(),_.initGastRecorder(Y),_.initPerformanceTracer(Y),r.has(Y,"ignoredIssues"))throw new Error(`The <ignoredIssues> IParserConfig property has been deprecated.
	Please use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.
	See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES
	For further details.`);this.skipValidations=r.has(Y,"skipValidations")?Y.skipValidations:e.DEFAULT_PARSER_CONFIG.skipValidations}return D.performSelfAnalysis=function(w){throw Error("The **static** `performSelfAnalysis` method has been deprecated.	\nUse the **instance** method with the same name instead.")},D.prototype.performSelfAnalysis=function(){var w=this;this.TRACE_INIT("performSelfAnalysis",function(){var Y;w.selfAnalysisDone=!0;var _=w.className;w.TRACE_INIT("toFastProps",function(){r.toFastProperties(w)}),w.TRACE_INIT("Grammar Recording",function(){try{w.enableRecording(),r.forEach(w.definedRulesNames,function(x){var N=w[x],C=N.originalGrammarAction,L=void 0;w.TRACE_INIT(x+" Rule",function(){L=w.topLevelRuleRecord(x,C)}),w.gastProductionsCache[x]=L})}finally{w.disableRecording()}});var B=[];if(w.TRACE_INIT("Grammar Resolving",function(){B=u.resolveGrammar({rules:r.values(w.gastProductionsCache)}),w.definitionErrors=w.definitionErrors.concat(B)}),w.TRACE_INIT("Grammar Validations",function(){if(r.isEmpty(B)&&w.skipValidations===!1){var x=u.validateGrammar({rules:r.values(w.gastProductionsCache),maxLookahead:w.maxLookahead,tokenTypes:r.values(w.tokensMap),errMsgProvider:I.defaultGrammarValidatorErrorProvider,grammarName:_});w.definitionErrors=w.definitionErrors.concat(x)}}),r.isEmpty(w.definitionErrors)&&(w.recoveryEnabled&&w.TRACE_INIT("computeAllProdsFollows",function(){var x=E.computeAllProdsFollows(r.values(w.gastProductionsCache));w.resyncFollows=x}),w.TRACE_INIT("ComputeLookaheadFunctions",function(){w.preComputeLookaheadFunctions(r.values(w.gastProductionsCache))})),!D.DEFER_DEFINITION_ERRORS_HANDLING&&!r.isEmpty(w.definitionErrors))throw Y=r.map(w.definitionErrors,function(x){return x.message}),new Error(`Parser Definition Errors detected:
 `+Y.join(`
-------------------------------
`))})},D.DEFER_DEFINITION_ERRORS_HANDLING=!1,D})();e.Parser=d,i.applyMixins(d,[y.Recoverable,o.LooksAhead,t.TreeBuilder,l.LexerAdapter,g.RecognizerEngine,s.RecognizerApi,f.ErrorHandler,v.ContentAssist,p.GastRecorder,n.PerformanceTracer]);var c=(function(D){h(w,D);function w(Y,_){_===void 0&&(_=e.DEFAULT_PARSER_CONFIG);var B=this,x=r.cloneObj(_);return x.outputCst=!0,B=D.call(this,Y,x)||this,B}return w})(d);e.CstParser=c;var b=(function(D){h(w,D);function w(Y,_){_===void 0&&(_=e.DEFAULT_PARSER_CONFIG);var B=this,x=r.cloneObj(_);return x.outputCst=!1,B=D.call(this,Y,x)||this,B}return w})(d);e.EmbeddedActionsParser=b}),hn=Te(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createSyntaxDiagramsCode=void 0;var h=Rt();function r(E,m){var I=m===void 0?{}:m,u=I.resourceBase,y=u===void 0?"https://unpkg.com/chevrotain@"+h.VERSION+"/diagrams/":u,o=I.css,t=o===void 0?"https://unpkg.com/chevrotain@"+h.VERSION+"/diagrams/diagrams.css":o,l=`
<!-- This is a generated file -->
<!DOCTYPE html>
<meta charset="utf-8">
<style>
  body {
    background-color: hsl(30, 20%, 95%)
  }
</style>

`,s=`
<link rel='stylesheet' href='`+t+`'>
`,g=`
<script src='`+y+`vendor/railroad-diagrams.js'><\/script>
<script src='`+y+`src/diagrams_builder.js'><\/script>
<script src='`+y+`src/diagrams_behavior.js'><\/script>
<script src='`+y+`src/main.js'><\/script>
`,f=`
<div id="diagrams" align="center"></div>
`,v=`
<script>
    window.serializedGrammar = `+JSON.stringify(E,null,"  ")+`;
<\/script>
`,p=`
<script>
    var diagramsDiv = document.getElementById("diagrams");
    main.drawDiagramsFromSerializedGrammar(serializedGrammar, diagramsDiv);
<\/script>
`;return l+s+g+f+v+p}e.createSyntaxDiagramsCode=r}),dn=Te(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Parser=e.createSyntaxDiagramsCode=e.clearCache=e.GAstVisitor=e.serializeProduction=e.serializeGrammar=e.Terminal=e.Rule=e.RepetitionWithSeparator=e.RepetitionMandatoryWithSeparator=e.RepetitionMandatory=e.Repetition=e.Option=e.NonTerminal=e.Alternative=e.Alternation=e.defaultLexerErrorProvider=e.NoViableAltException=e.NotAllInputParsedException=e.MismatchedTokenException=e.isRecognitionException=e.EarlyExitException=e.defaultParserErrorProvider=e.tokenName=e.tokenMatcher=e.tokenLabel=e.EOF=e.createTokenInstance=e.createToken=e.LexerDefinitionErrorType=e.Lexer=e.EMPTY_ALT=e.ParserDefinitionErrorType=e.EmbeddedActionsParser=e.CstParser=e.VERSION=void 0;var h=Rt();Object.defineProperty(e,"VERSION",{enumerable:!0,get:function(){return h.VERSION}});var r=je();Object.defineProperty(e,"CstParser",{enumerable:!0,get:function(){return r.CstParser}}),Object.defineProperty(e,"EmbeddedActionsParser",{enumerable:!0,get:function(){return r.EmbeddedActionsParser}}),Object.defineProperty(e,"ParserDefinitionErrorType",{enumerable:!0,get:function(){return r.ParserDefinitionErrorType}}),Object.defineProperty(e,"EMPTY_ALT",{enumerable:!0,get:function(){return r.EMPTY_ALT}});var E=it();Object.defineProperty(e,"Lexer",{enumerable:!0,get:function(){return E.Lexer}}),Object.defineProperty(e,"LexerDefinitionErrorType",{enumerable:!0,get:function(){return E.LexerDefinitionErrorType}});var m=Xe();Object.defineProperty(e,"createToken",{enumerable:!0,get:function(){return m.createToken}}),Object.defineProperty(e,"createTokenInstance",{enumerable:!0,get:function(){return m.createTokenInstance}}),Object.defineProperty(e,"EOF",{enumerable:!0,get:function(){return m.EOF}}),Object.defineProperty(e,"tokenLabel",{enumerable:!0,get:function(){return m.tokenLabel}}),Object.defineProperty(e,"tokenMatcher",{enumerable:!0,get:function(){return m.tokenMatcher}}),Object.defineProperty(e,"tokenName",{enumerable:!0,get:function(){return m.tokenName}});var I=st();Object.defineProperty(e,"defaultParserErrorProvider",{enumerable:!0,get:function(){return I.defaultParserErrorProvider}});var u=tt();Object.defineProperty(e,"EarlyExitException",{enumerable:!0,get:function(){return u.EarlyExitException}}),Object.defineProperty(e,"isRecognitionException",{enumerable:!0,get:function(){return u.isRecognitionException}}),Object.defineProperty(e,"MismatchedTokenException",{enumerable:!0,get:function(){return u.MismatchedTokenException}}),Object.defineProperty(e,"NotAllInputParsedException",{enumerable:!0,get:function(){return u.NotAllInputParsedException}}),Object.defineProperty(e,"NoViableAltException",{enumerable:!0,get:function(){return u.NoViableAltException}});var y=Ot();Object.defineProperty(e,"defaultLexerErrorProvider",{enumerable:!0,get:function(){return y.defaultLexerErrorProvider}});var o=Ge();Object.defineProperty(e,"Alternation",{enumerable:!0,get:function(){return o.Alternation}}),Object.defineProperty(e,"Alternative",{enumerable:!0,get:function(){return o.Alternative}}),Object.defineProperty(e,"NonTerminal",{enumerable:!0,get:function(){return o.NonTerminal}}),Object.defineProperty(e,"Option",{enumerable:!0,get:function(){return o.Option}}),Object.defineProperty(e,"Repetition",{enumerable:!0,get:function(){return o.Repetition}}),Object.defineProperty(e,"RepetitionMandatory",{enumerable:!0,get:function(){return o.RepetitionMandatory}}),Object.defineProperty(e,"RepetitionMandatoryWithSeparator",{enumerable:!0,get:function(){return o.RepetitionMandatoryWithSeparator}}),Object.defineProperty(e,"RepetitionWithSeparator",{enumerable:!0,get:function(){return o.RepetitionWithSeparator}}),Object.defineProperty(e,"Rule",{enumerable:!0,get:function(){return o.Rule}}),Object.defineProperty(e,"Terminal",{enumerable:!0,get:function(){return o.Terminal}});var t=Ge();Object.defineProperty(e,"serializeGrammar",{enumerable:!0,get:function(){return t.serializeGrammar}}),Object.defineProperty(e,"serializeProduction",{enumerable:!0,get:function(){return t.serializeProduction}});var l=et();Object.defineProperty(e,"GAstVisitor",{enumerable:!0,get:function(){return l.GAstVisitor}});function s(){console.warn(`The clearCache function was 'soft' removed from the Chevrotain API.
	 It performs no action other than printing this message.
	 Please avoid using it as it will be completely removed in the future`)}e.clearCache=s;var g=hn();Object.defineProperty(e,"createSyntaxDiagramsCode",{enumerable:!0,get:function(){return g.createSyntaxDiagramsCode}});var f=(function(){function v(){throw new Error(`The Parser class has been deprecated, use CstParser or EmbeddedActionsParser instead.
See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_7-0-0`)}return v})();e.Parser=f});const Je=dn();class Rn extends Ze{constructor(h){super(h)}load(h,r,E,m){const I=this,u=I.path===""?St.extractUrlBase(h):I.path,y=new Pt(I.manager);y.setPath(I.path),y.setRequestHeader(I.requestHeader),y.setWithCredentials(I.withCredentials),y.load(h,function(o){try{r(I.parse(o,u))}catch(t){m?m(t):console.error(t),I.manager.itemError(h)}},E,m)}parse(h,r){const E={};function m(T){const R=I(),A=new mn(R.tokens),k=new yn(R.tokenVocabulary),O=u(k.getBaseCstVisitorConstructor()),P=A.lex(T);k.input=P.tokens;const S=k.vrml();if(k.errors.length>0)throw console.error(k.errors),Error("THREE.VRMLLoader: Parsing errors detected.");return O.visit(S)}function I(){const T=Je.createToken,R=T({name:"RouteIdentifier",pattern:/[^\x30-\x39\0-\x20\x22\x27\x23\x2b\x2c\x2d\x2e\x5b\x5d\x5c\x7b\x7d][^\0-\x20\x22\x27\x23\x2b\x2c\x2d\x2e\x5b\x5d\x5c\x7b\x7d]*[\.][^\x30-\x39\0-\x20\x22\x27\x23\x2b\x2c\x2d\x2e\x5b\x5d\x5c\x7b\x7d][^\0-\x20\x22\x27\x23\x2b\x2c\x2d\x2e\x5b\x5d\x5c\x7b\x7d]*/}),A=T({name:"Identifier",pattern:/[^\x30-\x39\0-\x20\x22\x27\x23\x2b\x2c\x2d\x2e\x5b\x5d\x5c\x7b\x7d]([^\0-\x20\x22\x27\x23\x2b\x2c\x2e\x5b\x5d\x5c\x7b\x7d])*/,longer_alt:R}),k=["Anchor","Billboard","Collision","Group","Transform","Inline","LOD","Switch","PerspectiveCamera","OrthographicCamera","AudioClip","DirectionalLight","PointLight","Script","Shape","Sound","SpotLight","WorldInfo","CylinderSensor","PlaneSensor","ProximitySensor","SphereSensor","TimeSensor","TouchSensor","VisibilitySensor","Box","Cone","Cylinder","ElevationGrid","Extrusion","IndexedFaceSet","IndexedLineSet","PointSet","Sphere","Color","Coordinate","Normal","TextureCoordinate","Appearance","FontStyle","ImageTexture","Material","MovieTexture","PixelTexture","TextureTransform","ColorInterpolator","CoordinateInterpolator","NormalInterpolator","OrientationInterpolator","PositionInterpolator","ScalarInterpolator","Background","Fog","NavigationInfo","Viewpoint","Text"],O=T({name:"Version",pattern:/#VRML.*/,longer_alt:A}),P=T({name:"NodeName",pattern:new RegExp(k.join("|")),longer_alt:A}),S=T({name:"DEF",pattern:/DEF/,longer_alt:A}),U=T({name:"USE",pattern:/USE/,longer_alt:A}),j=T({name:"ROUTE",pattern:/ROUTE/,longer_alt:A}),J=T({name:"TO",pattern:/TO/,longer_alt:A}),te=T({name:"StringLiteral",pattern:/"(?:[^\\"\n\r]|\\[bfnrtv"\\/]|\\u[0-9a-fA-F][0-9a-fA-F][0-9a-fA-F][0-9a-fA-F])*"/}),ae=T({name:"HexLiteral",pattern:/0[xX][0-9a-fA-F]+/}),Ne=T({name:"NumberLiteral",pattern:/[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?/}),be=T({name:"TrueLiteral",pattern:/TRUE/}),Oe=T({name:"FalseLiteral",pattern:/FALSE/}),ye=T({name:"NullLiteral",pattern:/NULL/}),ge=T({name:"LSquare",pattern:/\[/}),Le=T({name:"RSquare",pattern:/]/}),Pe=T({name:"LCurly",pattern:/{/}),_e=T({name:"RCurly",pattern:/}/}),xe=T({name:"Comment",pattern:/#.*/,group:Je.Lexer.SKIPPED}),Fe=[T({name:"WhiteSpace",pattern:/[ ,\s]/,group:Je.Lexer.SKIPPED}),P,S,U,j,J,be,Oe,ye,O,A,R,te,ae,Ne,ge,Le,Pe,_e,xe],Ue={};for(let Ie=0,le=Fe.length;Ie<le;Ie++){const pe=Fe[Ie];Ue[pe.name]=pe}return{tokens:Fe,tokenVocabulary:Ue}}function u(T){class R extends T{constructor(){super(),this.validateVisitor()}vrml(O){const P={version:this.visit(O.version),nodes:[],routes:[]};for(let S=0,U=O.node.length;S<U;S++){const j=O.node[S];P.nodes.push(this.visit(j))}if(O.route)for(let S=0,U=O.route.length;S<U;S++){const j=O.route[S];P.routes.push(this.visit(j))}return P}version(O){return O.Version[0].image}node(O){const P={name:O.NodeName[0].image,fields:[]};if(O.field)for(let S=0,U=O.field.length;S<U;S++){const j=O.field[S];P.fields.push(this.visit(j))}return O.def&&(P.DEF=this.visit(O.def[0])),P}field(O){const P={name:O.Identifier[0].image,type:null,values:null};let S;return O.singleFieldValue&&(S=this.visit(O.singleFieldValue[0])),O.multiFieldValue&&(S=this.visit(O.multiFieldValue[0])),P.type=S.type,P.values=S.values,P}def(O){return(O.Identifier||O.NodeName)[0].image}use(O){return{USE:(O.Identifier||O.NodeName)[0].image}}singleFieldValue(O){return A(this,O)}multiFieldValue(O){return A(this,O)}route(O){return{FROM:O.RouteIdentifier[0].image,TO:O.RouteIdentifier[1].image}}}function A(k,O){const P={type:null,values:[]};if(O.node){P.type="node";for(let S=0,U=O.node.length;S<U;S++){const j=O.node[S];P.values.push(k.visit(j))}}if(O.use){P.type="use";for(let S=0,U=O.use.length;S<U;S++){const j=O.use[S];P.values.push(k.visit(j))}}if(O.StringLiteral){P.type="string";for(let S=0,U=O.StringLiteral.length;S<U;S++){const j=O.StringLiteral[S];P.values.push(j.image.replace(/'|"/g,""))}}if(O.NumberLiteral){P.type="number";for(let S=0,U=O.NumberLiteral.length;S<U;S++){const j=O.NumberLiteral[S];P.values.push(parseFloat(j.image))}}if(O.HexLiteral){P.type="hex";for(let S=0,U=O.HexLiteral.length;S<U;S++){const j=O.HexLiteral[S];P.values.push(j.image)}}if(O.TrueLiteral){P.type="boolean";for(let S=0,U=O.TrueLiteral.length;S<U;S++)O.TrueLiteral[S].image==="TRUE"&&P.values.push(!0)}if(O.FalseLiteral){P.type="boolean";for(let S=0,U=O.FalseLiteral.length;S<U;S++)O.FalseLiteral[S].image==="FALSE"&&P.values.push(!1)}return O.NullLiteral&&(P.type="null",O.NullLiteral.forEach(function(){P.values.push(null)})),P}return new R}function y(T){const R=T.nodes,A=new Ct;for(let k=0,O=R.length;k<O;k++){const P=R[k];o(P)}for(let k=0,O=R.length;k<O;k++){const P=R[k],S=t(P);S instanceof ft&&A.add(S),P.name==="WorldInfo"&&(A.userData.worldInfo=S)}return A}function o(T){T.DEF&&(E[T.DEF]=T);const R=T.fields;for(let A=0,k=R.length;A<k;A++){const O=R[A];if(O.type==="node"){const P=O.values;for(let S=0,U=P.length;S<U;S++)o(P[S])}}}function t(T){return T.USE?W(T.USE):(T.build!==void 0||(T.build=l(T)),T.build)}function l(T){const R=T.name;let A;switch(R){case"Anchor":case"Group":case"Transform":case"Collision":A=s(T);break;case"Background":A=g(T);break;case"Shape":A=f(T);break;case"Appearance":A=v(T);break;case"Material":A=p(T);break;case"ImageTexture":A=d(T);break;case"PixelTexture":A=a(T);break;case"TextureTransform":A=c(T);break;case"IndexedFaceSet":A=Y(T);break;case"IndexedLineSet":A=_(T);break;case"PointSet":A=B(T);break;case"Box":A=x(T);break;case"Cone":A=N(T);break;case"Cylinder":A=C(T);break;case"Sphere":A=L(T);break;case"ElevationGrid":A=H(T);break;case"Extrusion":A=q(T);break;case"Color":case"Coordinate":case"Normal":case"TextureCoordinate":A=b(T);break;case"WorldInfo":A=D(T);break;case"OrthographicCamera":case"PerspectiveCamera":A=w(T,R);break;case"Billboard":case"Inline":case"LOD":case"Switch":case"AudioClip":case"DirectionalLight":case"PointLight":case"Script":case"Sound":case"SpotLight":case"CylinderSensor":case"PlaneSensor":case"ProximitySensor":case"SphereSensor":case"TimeSensor":case"TouchSensor":case"VisibilitySensor":case"Text":case"FontStyle":case"MovieTexture":case"ColorInterpolator":case"CoordinateInterpolator":case"NormalInterpolator":case"OrientationInterpolator":case"PositionInterpolator":case"ScalarInterpolator":case"Fog":case"NavigationInfo":case"Viewpoint":break;default:console.warn("THREE.VRMLLoader: Unknown node:",R);break}return A!==void 0&&T.DEF!==void 0&&A.hasOwnProperty("name")===!0&&(A.name=T.DEF),A}function s(T){const R=new Et,A=T.fields;for(let k=0,O=A.length;k<O;k++){const P=A[k],S=P.name,U=P.values;switch(S){case"bboxCenter":break;case"bboxSize":break;case"center":break;case"children":$(U,R);break;case"description":break;case"collide":break;case"parameter":break;case"rotation":const j=new Ve(U[0],U[1],U[2]).normalize(),J=U[3];R.quaternion.setFromAxisAngle(j,J);break;case"scale":R.scale.set(U[0],U[1],U[2]);break;case"scaleOrientation":break;case"translation":R.position.set(U[0],U[1],U[2]);break;case"proxy":break;case"url":break;default:console.warn("THREE.VRMLLoader: Unknown field:",S);break}}return R}function g(T){const R=new Et;let A,k,O,P;const S=T.fields;for(let j=0,J=S.length;j<J;j++){const te=S[j],ae=te.name,Ne=te.values;switch(ae){case"groundAngle":A=Ne;break;case"groundColor":k=Ne;break;case"backUrl":break;case"bottomUrl":break;case"frontUrl":break;case"leftUrl":break;case"rightUrl":break;case"topUrl":break;case"skyAngle":O=Ne;break;case"skyColor":P=Ne;break;default:console.warn("THREE.VRMLLoader: Unknown field:",ae);break}}const U=1e4;if(P){const j=new pt(U,32,16),J=new nt({fog:!1,side:Tt,depthWrite:!1,depthTest:!1});P.length>3?(Z(j,U,O,K(P),!0),J.vertexColors=!0):J.color.setRGB(P[0],P[1],P[2],Ye);const te=new ht(j,J);R.add(te)}if(k&&k.length>0){const j=new pt(U,32,16,0,2*Math.PI,.5*Math.PI,1.5*Math.PI),J=new nt({fog:!1,side:Tt,vertexColors:!0,depthWrite:!1,depthTest:!1});Z(j,U,A,K(k),!1);const te=new ht(j,J);R.add(te)}return R.renderOrder=-1/0,R}function f(T){const R=T.fields;let A=new nt({name:Ze.DEFAULT_MATERIAL_NAME,color:0}),k;for(let P=0,S=R.length;P<S;P++){const U=R[P],j=U.name,J=U.values;switch(j){case"appearance":J[0]!==null&&(A=t(J[0]));break;case"geometry":J[0]!==null&&(k=t(J[0]));break;default:console.warn("THREE.VRMLLoader: Unknown field:",j);break}}let O;if(k&&k.attributes.position){const P=k._type;if(P==="points"){const S=new xt({name:Ze.DEFAULT_MATERIAL_NAME,color:16777215,opacity:A.opacity,transparent:A.transparent});k.attributes.color!==void 0?S.vertexColors=!0:A.isMeshPhongMaterial&&S.color.copy(A.emissive),O=new Mt(k,S)}else if(P==="line"){const S=new wt({name:Ze.DEFAULT_MATERIAL_NAME,color:16777215,opacity:A.opacity,transparent:A.transparent});k.attributes.color!==void 0?S.vertexColors=!0:A.isMeshPhongMaterial&&S.color.copy(A.emissive),O=new Ft(k,S)}else k._solid!==void 0&&(A.side=k._solid?Dt:Ut),k.attributes.color!==void 0&&(A.vertexColors=!0),O=new ht(k,A)}else O=new ft,O.visible=!1;return O}function v(T){let R=new Vt,A;const k=T.fields;for(let O=0,P=k.length;O<P;O++){const S=k[O],U=S.name,j=S.values;switch(U){case"material":if(j[0]!==null){const te=t(j[0]);te.diffuseColor&&R.color.copy(te.diffuseColor),te.emissiveColor&&R.emissive.copy(te.emissiveColor),te.shininess&&(R.shininess=te.shininess),te.specularColor&&R.specular.copy(te.specularColor),te.transparency&&(R.opacity=1-te.transparency),te.transparency>0&&(R.transparent=!0)}else R=new nt({name:Ze.DEFAULT_MATERIAL_NAME,color:0});break;case"texture":const J=j[0];J!==null&&(J.name==="ImageTexture"||J.name==="PixelTexture")&&(R.map=t(J));break;case"textureTransform":j[0]!==null&&(A=t(j[0]));break;default:console.warn("THREE.VRMLLoader: Unknown field:",U);break}}if(R.map){if(R.map.__type){switch(R.map.__type){case We.INTENSITY_ALPHA:R.opacity=1;break;case We.RGB:R.color.set(16777215);break;case We.RGBA:R.color.set(16777215),R.opacity=1;break}delete R.map.__type}A&&(R.map.center.copy(A.center),R.map.rotation=A.rotation,R.map.repeat.copy(A.scale),R.map.offset.copy(A.translation))}return R}function p(T){const R={},A=T.fields;for(let k=0,O=A.length;k<O;k++){const P=A[k],S=P.name,U=P.values;switch(S){case"ambientIntensity":break;case"diffuseColor":R.diffuseColor=new qe().setRGB(U[0],U[1],U[2],Ye);break;case"emissiveColor":R.emissiveColor=new qe().setRGB(U[0],U[1],U[2],Ye);break;case"shininess":R.shininess=U[0];break;case"specularColor":R.specularColor=new qe().setRGB(U[0],U[1],U[2],Ye);break;case"transparency":R.transparency=U[0];break;default:console.warn("THREE.VRMLLoader: Unknown field:",S);break}}return R}function n(T,R,A){let k;switch(R){case We.INTENSITY:k=parseInt(T),A.r=k,A.g=k,A.b=k,A.a=1;break;case We.INTENSITY_ALPHA:k=parseInt("0x"+T.substring(2,4)),A.r=k,A.g=k,A.b=k,A.a=parseInt("0x"+T.substring(4,6));break;case We.RGB:A.r=parseInt("0x"+T.substring(2,4)),A.g=parseInt("0x"+T.substring(4,6)),A.b=parseInt("0x"+T.substring(6,8)),A.a=1;break;case We.RGBA:A.r=parseInt("0x"+T.substring(2,4)),A.g=parseInt("0x"+T.substring(4,6)),A.b=parseInt("0x"+T.substring(6,8)),A.a=parseInt("0x"+T.substring(8,10));break}}function i(T){let R;switch(T){case 1:R=We.INTENSITY;break;case 2:R=We.INTENSITY_ALPHA;break;case 3:R=We.RGB;break;case 4:R=We.RGBA;break}return R}function a(T){let R,A=rt,k=rt;const O=T.fields;for(let P=0,S=O.length;P<S;P++){const U=O[P],j=U.name,J=U.values;switch(j){case"image":const te=J[0],ae=J[1],Ne=J[2],be=i(Ne),Oe=new Uint8Array(4*te*ae),ye={r:0,g:0,b:0,a:0};for(let ge=3,Le=0,Pe=J.length;ge<Pe;ge++,Le++){n(J[ge],be,ye);const _e=Le*4;Oe[_e+0]=ye.r,Oe[_e+1]=ye.g,Oe[_e+2]=ye.b,Oe[_e+3]=ye.a}R=new Bt(Oe,te,ae),R.colorSpace=Ye,R.needsUpdate=!0,R.__type=be;break;case"repeatS":J[0]===!1&&(A=ot);break;case"repeatT":J[0]===!1&&(k=ot);break;default:console.warn("THREE.VRMLLoader: Unknown field:",j);break}}return R&&(R.wrapS=A,R.wrapT=k),R}function d(T){let R,A=rt,k=rt;const O=T.fields;for(let P=0,S=O.length;P<S;P++){const U=O[P],j=U.name,J=U.values;switch(j){case"url":const te=J[0];te&&(R=fe.load(te));break;case"repeatS":J[0]===!1&&(A=ot);break;case"repeatT":J[0]===!1&&(k=ot);break;default:console.warn("THREE.VRMLLoader: Unknown field:",j);break}}return R&&(R.wrapS=A,R.wrapT=k,R.colorSpace=Ye),R}function c(T){const R={center:new He,rotation:new He,scale:new He,translation:new He},A=T.fields;for(let k=0,O=A.length;k<O;k++){const P=A[k],S=P.name,U=P.values;switch(S){case"center":R.center.set(U[0],U[1]);break;case"rotation":R.rotation=U[0];break;case"scale":R.scale.set(U[0],U[1]);break;case"translation":R.translation.set(U[0],U[1]);break;default:console.warn("THREE.VRMLLoader: Unknown field:",S);break}}return R}function b(T){return T.fields[0].values}function D(T){const R={},A=T.fields;for(let k=0,O=A.length;k<O;k++){const P=A[k],S=P.name,U=P.values;switch(S){case"title":R.title=U[0];break;case"info":R.info=U;break;default:console.warn("THREE.VRMLLoader: Unknown field:",S);break}}return R}function w(T,R){const A=R==="PerspectiveCamera"?new Gt:new jt,k=typeof window<"u"?window.innerWidth:1,O=typeof window<"u"?window.innerHeight:1,P=k/O,S=T.fields;for(let U=0,j=S.length;U<j;U++){const J=S[U],te=J.name,ae=J.values;switch(te){case"position":A.position.set(ae[0],ae[1],ae[0]);break;case"orientation":const Ne=new Ve(ae[0],ae[1],ae[2]).normalize(),be=ae[3];A.quaternion.setFromAxisAngle(Ne,be);break;case"focalDistance":A.userData.focalDistance=ae[0];break;case"heightAngle":A.fov=Wt.radToDeg(ae[0]),A.aspect=P,A.updateProjectionMatrix();break;case"height":const Oe=ae[0]/2,ye=Oe*P;A.left=-ye,A.right=ye,A.top=Oe,A.bottom=-Oe,A.updateProjectionMatrix();break;default:console.warn("THREE.VRMLLoader: Unknown field:",te);break}}return A}function Y(T){let R,A,k,O,P=!0,S=!0,U=0,j,J,te,ae,Ne=!0,be=!0;const Oe=T.fields;for(let Se=0,Fe=Oe.length;Se<Fe;Se++){const Ue=Oe[Se],Ie=Ue.name,le=Ue.values;switch(Ie){case"color":const pe=le[0];pe!==null&&(R=t(pe));break;case"coord":const oe=le[0];oe!==null&&(A=t(oe));break;case"normal":const he=le[0];he!==null&&(k=t(he));break;case"texCoord":const de=le[0];de!==null&&(O=t(de));break;case"ccw":P=le[0];break;case"colorIndex":j=le;break;case"colorPerVertex":Ne=le[0];break;case"convex":break;case"coordIndex":J=le;break;case"creaseAngle":U=le[0];break;case"normalIndex":te=le;break;case"normalPerVertex":be=le[0];break;case"solid":S=le[0];break;case"texCoordIndex":ae=le;break;default:console.warn("THREE.VRMLLoader: Unknown field:",Ie);break}}if(J===void 0)return console.warn("THREE.VRMLLoader: Missing coordIndex."),new Qe;const ye=ee(J,P);let ge,Le,Pe;if(R){if(Ne===!0)if(j&&j.length>0){const Se=ee(j,P);ge=re(ye,Se,R,3)}else ge=Re(ye,new we(R,3));else if(j&&j.length>0){const Se=ie(R,j),Fe=se(Se,J);ge=ve(ye,Fe)}else{const Se=se(R,J);ge=ve(ye,Se)}G(ge)}if(k)if(be===!0)if(te&&te.length>0){const Se=ee(te,P);Le=re(ye,Se,k,3)}else Le=Re(ye,new we(k,3));else if(te&&te.length>0){const Se=ie(k,te),Fe=se(Se,J);Le=ve(ye,Fe)}else{const Se=se(k,J);Le=ve(ye,Se)}else Le=Me(ye,A,U);if(O)if(ae&&ae.length>0){const Se=ee(ae,P);Pe=re(ye,Se,O,2)}else Pe=Re(ye,new we(O,2));const _e=new Qe,xe=Re(ye,new we(A,3));return _e.setAttribute("position",xe),_e.setAttribute("normal",Le),ge&&_e.setAttribute("color",ge),Pe&&_e.setAttribute("uv",Pe),_e._solid=S,_e._type="mesh",_e}function _(T){let R,A,k,O,P=!0;const S=T.fields;for(let ae=0,Ne=S.length;ae<Ne;ae++){const be=S[ae],Oe=be.name,ye=be.values;switch(Oe){case"color":const ge=ye[0];ge!==null&&(R=t(ge));break;case"coord":const Le=ye[0];Le!==null&&(A=t(Le));break;case"colorIndex":k=ye;break;case"colorPerVertex":P=ye[0];break;case"coordIndex":O=ye;break;default:console.warn("THREE.VRMLLoader: Unknown field:",Oe);break}}let U;const j=ce(O);if(R){if(P===!0)if(k.length>0){const ae=ce(k);U=re(j,ae,R,3)}else U=Re(j,new we(R,3));else if(k.length>0){const ae=ie(R,k),Ne=ue(ae,O);U=Ee(j,Ne)}else{const ae=ue(R,O);U=Ee(j,ae)}G(U)}const J=new Qe,te=Re(j,new we(A,3));return J.setAttribute("position",te),U&&J.setAttribute("color",U),J._type="line",J}function B(T){let R,A;const k=T.fields;for(let P=0,S=k.length;P<S;P++){const U=k[P],j=U.name,J=U.values;switch(j){case"color":const te=J[0];te!==null&&(R=t(te));break;case"coord":const ae=J[0];ae!==null&&(A=t(ae));break;default:console.warn("THREE.VRMLLoader: Unknown field:",j);break}}const O=new Qe;if(O.setAttribute("position",new we(A,3)),R){const P=new we(R,3);G(P),O.setAttribute("color",P)}return O._type="points",O}function x(T){const R=new Ve(2,2,2),A=T.fields;for(let O=0,P=A.length;O<P;O++){const S=A[O],U=S.name,j=S.values;switch(U){case"size":R.x=j[0],R.y=j[1],R.z=j[2];break;default:console.warn("THREE.VRMLLoader: Unknown field:",U);break}}return new zt(R.x,R.y,R.z)}function N(T){let R=1,A=2,k=!1;const O=T.fields;for(let S=0,U=O.length;S<U;S++){const j=O[S],J=j.name,te=j.values;switch(J){case"bottom":k=!te[0];break;case"bottomRadius":R=te[0];break;case"height":A=te[0];break;case"side":break;default:console.warn("THREE.VRMLLoader: Unknown field:",J);break}}return new Kt(R,A,16,1,k)}function C(T){let R=1,A=2;const k=T.fields;for(let P=0,S=k.length;P<S;P++){const U=k[P],j=U.name,J=U.values;switch(j){case"bottom":break;case"radius":R=J[0];break;case"height":A=J[0];break;case"side":break;case"top":break;default:console.warn("THREE.VRMLLoader: Unknown field:",j);break}}return new Ht(R,R,A,16,1)}function L(T){let R=1;const A=T.fields;for(let O=0,P=A.length;O<P;O++){const S=A[O],U=S.name,j=S.values;switch(U){case"radius":R=j[0];break;default:console.warn("THREE.VRMLLoader: Unknown field:",U);break}}return new pt(R,16,16)}function H(T){let R,A,k,O,P=!0,S=!0,U=!0,j=!0,J=0,te=2,ae=2,Ne=1,be=1;const Oe=T.fields;for(let le=0,pe=Oe.length;le<pe;le++){const oe=Oe[le],he=oe.name,de=oe.values;switch(he){case"color":const Ce=de[0];Ce!==null&&(R=t(Ce));break;case"normal":const ze=de[0];ze!==null&&(A=t(ze));break;case"texCoord":const Ke=de[0];Ke!==null&&(k=t(Ke));break;case"height":O=de;break;case"ccw":j=de[0];break;case"colorPerVertex":P=de[0];break;case"creaseAngle":J=de[0];break;case"normalPerVertex":S=de[0];break;case"solid":U=de[0];break;case"xDimension":te=de[0];break;case"xSpacing":Ne=de[0];break;case"zDimension":ae=de[0];break;case"zSpacing":be=de[0];break;default:console.warn("THREE.VRMLLoader: Unknown field:",he);break}}const ye=[],ge=[],Le=[],Pe=[];for(let le=0;le<ae;le++)for(let pe=0;pe<te;pe++){const oe=le*te+pe,he=Ne*le,de=O[oe],Ce=be*pe;if(ye.push(he,de,Ce),R&&P===!0){const ze=R[oe*3+0],Ke=R[oe*3+1],lt=R[oe*3+2];Le.push(ze,Ke,lt)}if(A&&S===!0){const ze=A[oe*3+0],Ke=A[oe*3+1],lt=A[oe*3+2];ge.push(ze,Ke,lt)}if(k){const ze=k[oe*2+0],Ke=k[oe*2+1];Pe.push(ze,Ke)}else Pe.push(le/(te-1),pe/(ae-1))}const _e=[];for(let le=0;le<te-1;le++)for(let pe=0;pe<ae-1;pe++){const oe=le+pe*te,he=le+(pe+1)*te,de=le+1+(pe+1)*te,Ce=le+1+pe*te;j===!0?(_e.push(oe,de,he),_e.push(de,oe,Ce)):(_e.push(oe,he,de),_e.push(de,Ce,oe))}const xe=Re(_e,new we(ye,3)),Se=Re(_e,new we(Pe,2));let Fe,Ue;if(R){if(P===!1){for(let le=0;le<te-1;le++)for(let pe=0;pe<ae-1;pe++){const oe=le+pe*(te-1),he=R[oe*3+0],de=R[oe*3+1],Ce=R[oe*3+2];Le.push(he,de,Ce),Le.push(he,de,Ce),Le.push(he,de,Ce),Le.push(he,de,Ce),Le.push(he,de,Ce),Le.push(he,de,Ce)}Fe=new we(Le,3)}else Fe=Re(_e,new we(Le,3));G(Fe)}if(A)if(S===!1){for(let le=0;le<te-1;le++)for(let pe=0;pe<ae-1;pe++){const oe=le+pe*(te-1),he=A[oe*3+0],de=A[oe*3+1],Ce=A[oe*3+2];ge.push(he,de,Ce),ge.push(he,de,Ce),ge.push(he,de,Ce),ge.push(he,de,Ce),ge.push(he,de,Ce),ge.push(he,de,Ce)}Ue=new we(ge,3)}else Ue=Re(_e,new we(ge,3));else Ue=Me(_e,ye,J);const Ie=new Qe;return Ie.setAttribute("position",xe),Ie.setAttribute("normal",Ue),Ie.setAttribute("uv",Se),Fe&&Ie.setAttribute("color",Fe),Ie._solid=U,Ie._type="mesh",Ie}function q(T){let R=[1,1,1,-1,-1,-1,-1,1,1,1],A=[0,0,0,0,1,0],k,O,P=!0,S=!0,U=0,j=!0,J=!0;const te=T.fields;for(let Ie=0,le=te.length;Ie<le;Ie++){const pe=te[Ie],oe=pe.name,he=pe.values;switch(oe){case"beginCap":P=he[0];break;case"ccw":S=he[0];break;case"convex":break;case"creaseAngle":U=he[0];break;case"crossSection":R=he;break;case"endCap":j=he[0];break;case"orientation":O=he;break;case"scale":k=he;break;case"solid":J=he[0];break;case"spine":A=he;break;default:console.warn("THREE.VRMLLoader: Unknown field:",oe);break}}const ae=R[0]===R[R.length-2]&&R[1]===R[R.length-1],Ne=[],be=new Ve,Oe=new Ve,ye=new Ve,ge=new Ve,Le=new Yt;for(let Ie=0,le=0,pe=0,oe=A.length;Ie<oe;Ie+=3,le+=2,pe+=4){be.fromArray(A,Ie),Oe.x=k?k[le+0]:1,Oe.y=1,Oe.z=k?k[le+1]:1,ye.x=O?O[pe+0]:0,ye.y=O?O[pe+1]:0,ye.z=O?O[pe+2]:1;const he=O?O[pe+3]:0;for(let de=0,Ce=R.length;de<Ce;de+=2)ge.x=R[de+0],ge.y=0,ge.z=R[de+1],ge.multiply(Oe),Le.setFromAxisAngle(ye,he),ge.applyQuaternion(Le),ge.add(be),Ne.push(ge.x,ge.y,ge.z)}const Pe=[],_e=A.length/3,xe=R.length/2;for(let Ie=0;Ie<_e-1;Ie++)for(let le=0;le<xe-1;le++){const pe=le+Ie*xe;let oe=le+1+Ie*xe;const he=le+(Ie+1)*xe;let de=le+1+(Ie+1)*xe;le===xe-2&&ae===!0&&(oe=Ie*xe,de=(Ie+1)*xe),S===!0?(Pe.push(pe,oe,he),Pe.push(he,oe,de)):(Pe.push(pe,he,oe),Pe.push(he,de,oe))}if(P===!0||j===!0){const Ie=[];for(let oe=0,he=R.length;oe<he;oe+=2)Ie.push(new He(R[oe],R[oe+1]));const le=Xt.triangulateShape(Ie,[]),pe=[];for(let oe=0,he=le.length;oe<he;oe++){const de=le[oe];pe.push(de[0],de[1],de[2])}if(P===!0)for(let oe=0,he=pe.length;oe<he;oe+=3)S===!0?Pe.push(pe[oe+0],pe[oe+1],pe[oe+2]):Pe.push(pe[oe+0],pe[oe+2],pe[oe+1]);if(j===!0){const oe=xe*(_e-1);for(let he=0,de=pe.length;he<de;he+=3)S===!0?Pe.push(oe+pe[he+0],oe+pe[he+2],oe+pe[he+1]):Pe.push(oe+pe[he+0],oe+pe[he+1],oe+pe[he+2])}}const Se=Re(Pe,new we(Ne,3)),Fe=Me(Pe,Ne,U),Ue=new Qe;return Ue.setAttribute("position",Se),Ue.setAttribute("normal",Fe),Ue._solid=J,Ue._type="mesh",Ue}function W(T){const R=E[T],A=t(R);return A.isObject3D||A.isMaterial?A.clone():A}function $(T,R){for(let A=0,k=T.length;A<k;A++){const O=t(T[A]);O instanceof ft&&R.add(O)}}function ee(T,R){const A=[];let k=0;for(let O=0,P=T.length;O<P;O++){const S=T[k],U=T[O+(R?1:2)],j=T[O+(R?2:1)];A.push(S,U,j),(T[O+3]===-1||O+3>=P)&&(O+=3,k=O+1)}return A}function se(T,R){const A=[];let k=0;for(let O=0,P=R.length;O<P;O++){const S=k*3,U=T[S],j=T[S+1],J=T[S+2];A.push(U,j,J),(R[O+3]===-1||O+3>=P)&&(O+=3,k++)}return A}function ie(T,R){const A=[];for(let k=0,O=R.length;k<O;k++){const S=R[k]*3,U=T[S],j=T[S+1],J=T[S+2];A.push(U,j,J)}return A}function ce(T){const R=[];for(let A=0,k=T.length;A<k;A++){const O=T[A],P=T[A+1];R.push(O,P),(T[A+2]===-1||A+2>=k)&&(A+=2)}return R}function ue(T,R){const A=[];let k=0;for(let O=0,P=R.length;O<P;O++){const S=k*3,U=T[S],j=T[S+1],J=T[S+2];A.push(U,j,J),(R[O+2]===-1||O+2>=P)&&(O+=2,k++)}return A}const ne=new Ve,F=new Ve,V=new Ve,z=new He,X=new He,Q=new He;function re(T,R,A,k){const O=[];for(let P=0,S=T.length;P<S;P+=3){const U=R[P],j=R[P+1],J=R[P+2];k===2?(z.fromArray(A,U*k),X.fromArray(A,j*k),Q.fromArray(A,J*k),O.push(z.x,z.y),O.push(X.x,X.y),O.push(Q.x,Q.y)):(ne.fromArray(A,U*k),F.fromArray(A,j*k),V.fromArray(A,J*k),O.push(ne.x,ne.y,ne.z),O.push(F.x,F.y,F.z),O.push(V.x,V.y,V.z))}return new we(O,k)}function ve(T,R){const A=[];for(let k=0,O=0,P=T.length;k<P;k+=3,O++)ne.fromArray(R,O*3),A.push(ne.x,ne.y,ne.z),A.push(ne.x,ne.y,ne.z),A.push(ne.x,ne.y,ne.z);return new we(A,3)}function Ee(T,R){const A=[];for(let k=0,O=0,P=T.length;k<P;k+=2,O++)ne.fromArray(R,O*3),A.push(ne.x,ne.y,ne.z),A.push(ne.x,ne.y,ne.z);return new we(A,3)}function Re(T,R){const A=R.array,k=R.itemSize,O=new A.constructor(T.length*k);let P=0,S=0;for(let U=0,j=T.length;U<j;U++){P=T[U]*k;for(let J=0;J<k;J++)O[S++]=A[P++]}return new we(O,k)}const De=new Ve,Be=new Ve;function Me(T,R,A){const k=[],O={};for(let S=0,U=T.length;S<U;S+=3){const j=T[S],J=T[S+1],te=T[S+2],ae=new En(j,J,te);ne.fromArray(R,j*3),F.fromArray(R,J*3),V.fromArray(R,te*3),Be.subVectors(V,F),De.subVectors(ne,F),Be.cross(De),Be.normalize(),ae.normal.copy(Be),O[j]===void 0&&(O[j]=[]),O[J]===void 0&&(O[J]=[]),O[te]===void 0&&(O[te]=[]),O[j].push(ae.normal),O[J].push(ae.normal),O[te].push(ae.normal),k.push(ae)}const P=[];for(let S=0,U=k.length;S<U;S++){const j=k[S],J=M(O[j.a],j.normal,A),te=M(O[j.b],j.normal,A),ae=M(O[j.c],j.normal,A);ne.fromArray(R,j.a*3),F.fromArray(R,j.b*3),V.fromArray(R,j.c*3),P.push(J.x,J.y,J.z),P.push(te.x,te.y,te.z),P.push(ae.x,ae.y,ae.z)}return new we(P,3)}function M(T,R,A){const k=new Ve;if(A===0)k.copy(R);else for(let O=0,P=T.length;O<P;O++)T[O].angleTo(R)<A&&k.add(T[O]);return k.normalize()}function K(T){const R=[];for(let A=0,k=T.length;A<k;A+=3)R.push(new qe(T[A],T[A+1],T[A+2]));return R}function G(T){const R=new qe;for(let A=0;A<T.count;A++)R.fromBufferAttribute(T,A),gt.colorSpaceToWorking(R,Ye),T.setXYZ(A,R.r,R.g,R.b)}function Z(T,R,A,k,O){const P=[],S=O===!0?0:Math.PI;for(let Ne=0,be=k.length;Ne<be;Ne++){let Oe=Ne===0?0:A[Ne-1];Oe=O===!0?Oe:S-Oe;const ye=new Ve;ye.setFromSphericalCoords(R,Oe,0),P.push(ye)}const U=T.index,j=T.attributes.position,J=new qt(new Float32Array(T.attributes.position.count*3),3),te=new Ve,ae=new qe;for(let Ne=0;Ne<U.count;Ne++){const be=U.getX(Ne);te.fromBufferAttribute(j,be);let Oe,ye,ge=1;for(let _e=1;_e<P.length;_e++){Oe=_e-1,ye=_e;const xe=P[Oe],Se=P[ye];if(O===!0){if(te.y<=xe.y&&te.y>Se.y){ge=Math.abs(xe.y-te.y)/Math.abs(xe.y-Se.y);break}}else if(te.y>=xe.y&&te.y<Se.y){ge=Math.abs(xe.y-te.y)/Math.abs(xe.y-Se.y);break}}const Le=k[Oe],Pe=k[ye];ae.copy(Le).lerp(Pe,ge),gt.colorSpaceToWorking(ae,Ye),J.setXYZ(be,ae.r,ae.g,ae.b)}T.setAttribute("color",J)}const fe=new bt(this.manager);if(fe.setPath(this.resourcePath||r).setCrossOrigin(this.crossOrigin),h.indexOf("#VRML V2.0")===-1)throw Error("THREE.VRMLLexer: Version of VRML asset not supported.");const Ae=m(h);return y(Ae)}}class mn{constructor(h){this.lexer=new Je.Lexer(h)}lex(h){const r=this.lexer.tokenize(h);if(r.errors.length>0)throw console.error(r.errors),Error("THREE.VRMLLexer: Lexing errors detected.");return r}}const vn=Je.CstParser;class yn extends vn{constructor(h){super(h);const r=this,E=h.Version,m=h.LCurly,I=h.RCurly,u=h.LSquare,y=h.RSquare,o=h.Identifier,t=h.RouteIdentifier,l=h.StringLiteral,s=h.HexLiteral,g=h.NumberLiteral,f=h.TrueLiteral,v=h.FalseLiteral,p=h.NullLiteral,n=h.DEF,i=h.USE,a=h.ROUTE,d=h.TO,c=h.NodeName;r.RULE("vrml",function(){r.SUBRULE(r.version),r.AT_LEAST_ONE(function(){r.SUBRULE(r.node)}),r.MANY(function(){r.SUBRULE(r.route)})}),r.RULE("version",function(){r.CONSUME(E)}),r.RULE("node",function(){r.OPTION(function(){r.SUBRULE(r.def)}),r.CONSUME(c),r.CONSUME(m),r.MANY(function(){r.SUBRULE(r.field)}),r.CONSUME(I)}),r.RULE("field",function(){r.CONSUME(o),r.OR2([{ALT:function(){r.SUBRULE(r.singleFieldValue)}},{ALT:function(){r.SUBRULE(r.multiFieldValue)}}])}),r.RULE("def",function(){r.CONSUME(n),r.OR([{ALT:function(){r.CONSUME(o)}},{ALT:function(){r.CONSUME(c)}}])}),r.RULE("use",function(){r.CONSUME(i),r.OR([{ALT:function(){r.CONSUME(o)}},{ALT:function(){r.CONSUME(c)}}])}),r.RULE("singleFieldValue",function(){r.AT_LEAST_ONE(function(){r.OR([{ALT:function(){r.SUBRULE(r.node)}},{ALT:function(){r.SUBRULE(r.use)}},{ALT:function(){r.CONSUME(l)}},{ALT:function(){r.CONSUME(s)}},{ALT:function(){r.CONSUME(g)}},{ALT:function(){r.CONSUME(f)}},{ALT:function(){r.CONSUME(v)}},{ALT:function(){r.CONSUME(p)}}])})}),r.RULE("multiFieldValue",function(){r.CONSUME(u),r.MANY(function(){r.OR([{ALT:function(){r.SUBRULE(r.node)}},{ALT:function(){r.SUBRULE(r.use)}},{ALT:function(){r.CONSUME(l)}},{ALT:function(){r.CONSUME(s)}},{ALT:function(){r.CONSUME(g)}},{ALT:function(){r.CONSUME(p)}}])}),r.CONSUME(y)}),r.RULE("route",function(){r.CONSUME(a),r.CONSUME(t),r.CONSUME(d),r.CONSUME2(t)}),this.performSelfAnalysis()}}class En{constructor(h,r,E){this.a=h,this.b=r,this.c=E,this.normal=new Ve}}const We={INTENSITY:1,INTENSITY_ALPHA:2,RGB:3,RGBA:4};export{Rn as VRMLLoader};
