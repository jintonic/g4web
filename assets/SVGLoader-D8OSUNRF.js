import{L as It,F as Mt,a2 as at,a3 as q,H as ht,an as wt,a4 as Pt,ao as St,ap as mt,q as Nt,r as dt,s as Et,aq as ct}from"./main-z5BJ3CM8.js";const Ct=Et;class Tt extends It{constructor(j){super(j),this.defaultDPI=90,this.defaultUnit="px"}load(j,z,G,N){const I=this,Q=new Mt(I.manager);Q.setPath(I.path),Q.setRequestHeader(I.requestHeader),Q.setWithCredentials(I.withCredentials),Q.load(j,function(tt){try{z(I.parse(tt))}catch(J){N?N(J):console.error(J),I.manager.itemError(j)}},G,N)}parse(j){const z=this;function G(i,s){if(i.nodeType!==1)return;const e=k(i);let t=!1,c=null;switch(i.nodeName){case"svg":s=F(i,s);break;case"style":I(i);break;case"g":s=F(i,s);break;case"path":s=F(i,s),i.hasAttribute("d")&&(c=N(i));break;case"rect":s=F(i,s),c=J(i);break;case"polygon":s=F(i,s),c=X(i);break;case"polyline":s=F(i,s),c=$(i);break;case"circle":s=F(i,s),c=V(i);break;case"ellipse":s=F(i,s),c=B(i);break;case"line":s=F(i,s),c=ot(i);break;case"defs":t=!0;break;case"use":s=F(i,s);const h=(i.getAttributeNS("http://www.w3.org/1999/xlink","href")||"").substring(1),m=i.viewportElement.getElementById(h);m?G(m,s):console.warn("SVGLoader: 'use node' references non-existent node id: "+h);break}c&&(s.fill!==void 0&&s.fill!=="none"&&c.color.setStyle(s.fill,Ct),S(c,nt),A.push(c),c.userData={node:i,style:s});const u=i.childNodes;for(let r=0;r<u.length;r++){const h=u[r];t&&h.nodeName!=="style"&&h.nodeName!=="defs"||G(h,s)}e&&(H.pop(),H.length>0?nt.copy(H[H.length-1]):nt.identity())}function N(i){const s=new ct,e=new q,t=new q,c=new q;let u=!0,r=!1;const h=i.getAttribute("d");if(h===""||h==="none")return null;const m=h.match(/[a-df-z][^a-df-z]*/ig);for(let d=0,a=m.length;d<a;d++){const l=m[d],x=l.charAt(0),g=l.slice(1).trim();u===!0&&(r=!0,u=!1);let o;switch(x){case"M":o=p(g);for(let n=0,T=o.length;n<T;n+=2)e.x=o[n+0],e.y=o[n+1],t.x=e.x,t.y=e.y,n===0?s.moveTo(e.x,e.y):s.lineTo(e.x,e.y),n===0&&c.copy(e);break;case"H":o=p(g);for(let n=0,T=o.length;n<T;n++)e.x=o[n],t.x=e.x,t.y=e.y,s.lineTo(e.x,e.y),n===0&&r===!0&&c.copy(e);break;case"V":o=p(g);for(let n=0,T=o.length;n<T;n++)e.y=o[n],t.x=e.x,t.y=e.y,s.lineTo(e.x,e.y),n===0&&r===!0&&c.copy(e);break;case"L":o=p(g);for(let n=0,T=o.length;n<T;n+=2)e.x=o[n+0],e.y=o[n+1],t.x=e.x,t.y=e.y,s.lineTo(e.x,e.y),n===0&&r===!0&&c.copy(e);break;case"C":o=p(g);for(let n=0,T=o.length;n<T;n+=6)s.bezierCurveTo(o[n+0],o[n+1],o[n+2],o[n+3],o[n+4],o[n+5]),t.x=o[n+2],t.y=o[n+3],e.x=o[n+4],e.y=o[n+5],n===0&&r===!0&&c.copy(e);break;case"S":o=p(g);for(let n=0,T=o.length;n<T;n+=4)s.bezierCurveTo(b(e.x,t.x),b(e.y,t.y),o[n+0],o[n+1],o[n+2],o[n+3]),t.x=o[n+0],t.y=o[n+1],e.x=o[n+2],e.y=o[n+3],n===0&&r===!0&&c.copy(e);break;case"Q":o=p(g);for(let n=0,T=o.length;n<T;n+=4)s.quadraticCurveTo(o[n+0],o[n+1],o[n+2],o[n+3]),t.x=o[n+0],t.y=o[n+1],e.x=o[n+2],e.y=o[n+3],n===0&&r===!0&&c.copy(e);break;case"T":o=p(g);for(let n=0,T=o.length;n<T;n+=2){const O=b(e.x,t.x),et=b(e.y,t.y);s.quadraticCurveTo(O,et,o[n+0],o[n+1]),t.x=O,t.y=et,e.x=o[n+0],e.y=o[n+1],n===0&&r===!0&&c.copy(e)}break;case"A":o=p(g,[3,4],7);for(let n=0,T=o.length;n<T;n+=7){if(o[n+5]==e.x&&o[n+6]==e.y)continue;const O=e.clone();e.x=o[n+5],e.y=o[n+6],t.x=e.x,t.y=e.y,Q(s,o[n],o[n+1],o[n+2],o[n+3],o[n+4],O,e),n===0&&r===!0&&c.copy(e)}break;case"m":o=p(g);for(let n=0,T=o.length;n<T;n+=2)e.x+=o[n+0],e.y+=o[n+1],t.x=e.x,t.y=e.y,n===0?s.moveTo(e.x,e.y):s.lineTo(e.x,e.y),n===0&&c.copy(e);break;case"h":o=p(g);for(let n=0,T=o.length;n<T;n++)e.x+=o[n],t.x=e.x,t.y=e.y,s.lineTo(e.x,e.y),n===0&&r===!0&&c.copy(e);break;case"v":o=p(g);for(let n=0,T=o.length;n<T;n++)e.y+=o[n],t.x=e.x,t.y=e.y,s.lineTo(e.x,e.y),n===0&&r===!0&&c.copy(e);break;case"l":o=p(g);for(let n=0,T=o.length;n<T;n+=2)e.x+=o[n+0],e.y+=o[n+1],t.x=e.x,t.y=e.y,s.lineTo(e.x,e.y),n===0&&r===!0&&c.copy(e);break;case"c":o=p(g);for(let n=0,T=o.length;n<T;n+=6)s.bezierCurveTo(e.x+o[n+0],e.y+o[n+1],e.x+o[n+2],e.y+o[n+3],e.x+o[n+4],e.y+o[n+5]),t.x=e.x+o[n+2],t.y=e.y+o[n+3],e.x+=o[n+4],e.y+=o[n+5],n===0&&r===!0&&c.copy(e);break;case"s":o=p(g);for(let n=0,T=o.length;n<T;n+=4)s.bezierCurveTo(b(e.x,t.x),b(e.y,t.y),e.x+o[n+0],e.y+o[n+1],e.x+o[n+2],e.y+o[n+3]),t.x=e.x+o[n+0],t.y=e.y+o[n+1],e.x+=o[n+2],e.y+=o[n+3],n===0&&r===!0&&c.copy(e);break;case"q":o=p(g);for(let n=0,T=o.length;n<T;n+=4)s.quadraticCurveTo(e.x+o[n+0],e.y+o[n+1],e.x+o[n+2],e.y+o[n+3]),t.x=e.x+o[n+0],t.y=e.y+o[n+1],e.x+=o[n+2],e.y+=o[n+3],n===0&&r===!0&&c.copy(e);break;case"t":o=p(g);for(let n=0,T=o.length;n<T;n+=2){const O=b(e.x,t.x),et=b(e.y,t.y);s.quadraticCurveTo(O,et,e.x+o[n+0],e.y+o[n+1]),t.x=O,t.y=et,e.x=e.x+o[n+0],e.y=e.y+o[n+1],n===0&&r===!0&&c.copy(e)}break;case"a":o=p(g,[3,4],7);for(let n=0,T=o.length;n<T;n+=7){if(o[n+5]==0&&o[n+6]==0)continue;const O=e.clone();e.x+=o[n+5],e.y+=o[n+6],t.x=e.x,t.y=e.y,Q(s,o[n],o[n+1],o[n+2],o[n+3],o[n+4],O,e),n===0&&r===!0&&c.copy(e)}break;case"Z":case"z":s.currentPath.autoClose=!0,s.currentPath.curves.length>0&&(e.copy(c),s.currentPath.currentPoint.copy(e),u=!0);break;default:console.warn(l)}r=!1}return s}function I(i){if(!(!i.sheet||!i.sheet.cssRules||!i.sheet.cssRules.length))for(let s=0;s<i.sheet.cssRules.length;s++){const e=i.sheet.cssRules[s];if(e.type!==1)continue;const t=e.selectorText.split(/,/gm).filter(Boolean).map(c=>c.trim());for(let c=0;c<t.length;c++){const u=Object.fromEntries(Object.entries(e.style).filter(([,r])=>r!==""));U[t[c]]=Object.assign(U[t[c]]||{},u)}}}function Q(i,s,e,t,c,u,r,h){if(s==0||e==0){i.lineTo(h.x,h.y);return}t=t*Math.PI/180,s=Math.abs(s),e=Math.abs(e);const m=(r.x-h.x)/2,d=(r.y-h.y)/2,a=Math.cos(t)*m+Math.sin(t)*d,l=-Math.sin(t)*m+Math.cos(t)*d;let x=s*s,g=e*e;const o=a*a,n=l*l,T=o/x+n/g;if(T>1){const ut=Math.sqrt(T);s=ut*s,e=ut*e,x=s*s,g=e*e}const O=x*n+g*o,et=(x*g-O)/O;let st=Math.sqrt(Math.max(0,et));c===u&&(st=-st);const K=st*s*l/e,it=-st*e*a/s,lt=Math.cos(t)*K-Math.sin(t)*it+(r.x+h.x)/2,xt=Math.sin(t)*K+Math.cos(t)*it+(r.y+h.y)/2,ft=tt(1,0,(a-K)/s,(l-it)/e),pt=tt((a-K)/s,(l-it)/e,(-a-K)/s,(-l-it)/e)%(Math.PI*2);i.currentPath.absellipse(lt,xt,s,e,ft,ft+pt,u===0,t)}function tt(i,s,e,t){const c=i*e+s*t,u=Math.sqrt(i*i+s*s)*Math.sqrt(e*e+t*t);let r=Math.acos(Math.max(-1,Math.min(1,c/u)));return i*t-s*e<0&&(r=-r),r}function J(i){const s=y(i.getAttribute("x")||0),e=y(i.getAttribute("y")||0),t=y(i.getAttribute("rx")||i.getAttribute("ry")||0),c=y(i.getAttribute("ry")||i.getAttribute("rx")||0),u=y(i.getAttribute("width")),r=y(i.getAttribute("height")),h=1-.551915024494,m=new ct;return m.moveTo(s+t,e),m.lineTo(s+u-t,e),(t!==0||c!==0)&&m.bezierCurveTo(s+u-t*h,e,s+u,e+c*h,s+u,e+c),m.lineTo(s+u,e+r-c),(t!==0||c!==0)&&m.bezierCurveTo(s+u,e+r-c*h,s+u-t*h,e+r,s+u-t,e+r),m.lineTo(s+t,e+r),(t!==0||c!==0)&&m.bezierCurveTo(s+t*h,e+r,s,e+r-c*h,s,e+r-c),m.lineTo(s,e+c),(t!==0||c!==0)&&m.bezierCurveTo(s,e+c*h,s+t*h,e,s+t,e),m}function X(i){function s(u,r,h){const m=y(r),d=y(h);c===0?t.moveTo(m,d):t.lineTo(m,d),c++}const e=/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,t=new ct;let c=0;return i.getAttribute("points").replace(e,s),t.currentPath.autoClose=!0,t}function $(i){function s(u,r,h){const m=y(r),d=y(h);c===0?t.moveTo(m,d):t.lineTo(m,d),c++}const e=/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,t=new ct;let c=0;return i.getAttribute("points").replace(e,s),t.currentPath.autoClose=!1,t}function V(i){const s=y(i.getAttribute("cx")||0),e=y(i.getAttribute("cy")||0),t=y(i.getAttribute("r")||0),c=new mt;c.absarc(s,e,t,0,Math.PI*2);const u=new ct;return u.subPaths.push(c),u}function B(i){const s=y(i.getAttribute("cx")||0),e=y(i.getAttribute("cy")||0),t=y(i.getAttribute("rx")||0),c=y(i.getAttribute("ry")||0),u=new mt;u.absellipse(s,e,t,c,0,Math.PI*2);const r=new ct;return r.subPaths.push(u),r}function ot(i){const s=y(i.getAttribute("x1")||0),e=y(i.getAttribute("y1")||0),t=y(i.getAttribute("x2")||0),c=y(i.getAttribute("y2")||0),u=new ct;return u.moveTo(s,e),u.lineTo(t,c),u.currentPath.autoClose=!1,u}function F(i,s){s=Object.assign({},s);let e={};if(i.hasAttribute("class")){const r=i.getAttribute("class").split(/\s/).filter(Boolean).map(h=>h.trim());for(let h=0;h<r.length;h++)e=Object.assign(e,U["."+r[h]])}i.hasAttribute("id")&&(e=Object.assign(e,U["#"+i.getAttribute("id")]));function t(r,h,m){m===void 0&&(m=function(a){return a.startsWith("url")&&console.warn("SVGLoader: url access in attributes is not implemented."),a}),i.hasAttribute(r)&&(s[h]=m(i.getAttribute(r))),e[h]&&(s[h]=m(e[h])),i.style&&i.style[r]!==""&&(s[h]=m(i.style[r]))}function c(r){return Math.max(0,Math.min(1,y(r)))}function u(r){return Math.max(0,y(r))}return t("fill","fill"),t("fill-opacity","fillOpacity",c),t("fill-rule","fillRule"),t("opacity","opacity",c),t("stroke","stroke"),t("stroke-opacity","strokeOpacity",c),t("stroke-width","strokeWidth",u),t("stroke-linejoin","strokeLineJoin"),t("stroke-linecap","strokeLineCap"),t("stroke-miterlimit","strokeMiterLimit",u),t("visibility","visibility"),s}function b(i,s){return i-(s-i)}function p(i,s,e){if(typeof i!="string")throw new TypeError("Invalid input: "+typeof i);const t={WHITESPACE:/[ \t\r\n]/,DIGIT:/[\d]/,SIGN:/[-+]/,POINT:/\./,COMMA:/,/,EXP:/e/i,FLAGS:/[01]/},c=0,u=1,r=2,h=3;let m=c,d=!0,a="",l="";const x=[];function g(O,et,st){const K=new SyntaxError('Unexpected character "'+O+'" at index '+et+".");throw K.partial=st,K}function o(){a!==""&&(l===""?x.push(Number(a)):x.push(Number(a)*Math.pow(10,Number(l)))),a="",l=""}let n;const T=i.length;for(let O=0;O<T;O++){if(n=i[O],Array.isArray(s)&&s.includes(x.length%e)&&t.FLAGS.test(n)){m=u,a=n,o();continue}if(m===c){if(t.WHITESPACE.test(n))continue;if(t.DIGIT.test(n)||t.SIGN.test(n)){m=u,a=n;continue}if(t.POINT.test(n)){m=r,a=n;continue}t.COMMA.test(n)&&(d&&g(n,O,x),d=!0)}if(m===u){if(t.DIGIT.test(n)){a+=n;continue}if(t.POINT.test(n)){a+=n,m=r;continue}if(t.EXP.test(n)){m=h;continue}t.SIGN.test(n)&&a.length===1&&t.SIGN.test(a[0])&&g(n,O,x)}if(m===r){if(t.DIGIT.test(n)){a+=n;continue}if(t.EXP.test(n)){m=h;continue}t.POINT.test(n)&&a[a.length-1]==="."&&g(n,O,x)}if(m===h){if(t.DIGIT.test(n)){l+=n;continue}if(t.SIGN.test(n)){if(l===""){l+=n;continue}l.length===1&&t.SIGN.test(l)&&g(n,O,x)}}t.WHITESPACE.test(n)?(o(),m=c,d=!1):t.COMMA.test(n)?(o(),m=c,d=!0):t.SIGN.test(n)?(o(),m=u,a=n):t.POINT.test(n)?(o(),m=r,a=n):g(n,O,x)}return o(),x}const M=["mm","cm","in","pt","pc","px"],L={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:72/6,pc:1,px:-1},px:{px:1}};function y(i){let s="px";if(typeof i=="string"||i instanceof String)for(let t=0,c=M.length;t<c;t++){const u=M[t];if(i.endsWith(u)){s=u,i=i.substring(0,i.length-u.length);break}}let e;return s==="px"&&z.defaultUnit!=="px"?e=L.in[z.defaultUnit]/z.defaultDPI:(e=L[s][z.defaultUnit],e<0&&(e=L[s].in*z.defaultDPI)),e*parseFloat(i)}function k(i){if(!(i.hasAttribute("transform")||i.nodeName==="use"&&(i.hasAttribute("x")||i.hasAttribute("y"))))return null;const s=w(i);return H.length>0&&s.premultiply(H[H.length-1]),nt.copy(s),H.push(s),s}function w(i){const s=new at,e=_;if(i.nodeName==="use"&&(i.hasAttribute("x")||i.hasAttribute("y"))){const t=y(i.getAttribute("x")||0),c=y(i.getAttribute("y")||0);s.translate(t,c)}if(i.hasAttribute("transform")){const t=i.getAttribute("transform").split(")");for(let c=t.length-1;c>=0;c--){const u=t[c].trim();if(u==="")continue;const r=u.indexOf("("),h=u.length;if(r>0&&r<h){const m=u.slice(0,r),d=p(u.slice(r+1));switch(e.identity(),m){case"translate":if(d.length>=1){const a=d[0];let l=0;d.length>=2&&(l=d[1]),e.translate(a,l)}break;case"rotate":if(d.length>=1){let a=0,l=0,x=0;a=d[0]*Math.PI/180,d.length>=3&&(l=d[1],x=d[2]),Y.makeTranslation(-l,-x),P.makeRotation(a),f.multiplyMatrices(P,Y),Y.makeTranslation(l,x),e.multiplyMatrices(Y,f)}break;case"scale":if(d.length>=1){const a=d[0];let l=a;d.length>=2&&(l=d[1]),e.scale(a,l)}break;case"skewX":d.length===1&&e.set(1,Math.tan(d[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":d.length===1&&e.set(1,0,0,Math.tan(d[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":d.length===6&&e.set(d[0],d[2],d[4],d[1],d[3],d[5],0,0,1);break}}s.premultiply(e)}}return s}function S(i,s){function e(r){D.set(r.x,r.y,1).applyMatrix3(s),r.set(D.x,D.y)}function t(r){const h=r.xRadius,m=r.yRadius,d=Math.cos(r.aRotation),a=Math.sin(r.aRotation),l=new ht(h*d,h*a,0),x=new ht(-m*a,m*d,0),g=l.applyMatrix3(s),o=x.applyMatrix3(s),n=_.set(g.x,o.x,0,g.y,o.y,0,0,0,1),T=Y.copy(n).invert(),st=P.copy(T).transpose().multiply(T).elements,K=v(st[0],st[1],st[4]),it=Math.sqrt(K.rt1),lt=Math.sqrt(K.rt2);if(r.xRadius=1/it,r.yRadius=1/lt,r.aRotation=Math.atan2(K.sn,K.cs),!((r.aEndAngle-r.aStartAngle)%(2*Math.PI)<Number.EPSILON)){const ft=Y.set(it,0,0,0,lt,0,0,0,1),pt=P.set(K.cs,K.sn,0,-K.sn,K.cs,0,0,0,1),ut=ft.multiply(pt).multiply(n),bt=gt=>{const{x:kt,y:At}=new ht(Math.cos(gt),Math.sin(gt),0).applyMatrix3(ut);return Math.atan2(At,kt)};r.aStartAngle=bt(r.aStartAngle),r.aEndAngle=bt(r.aEndAngle),R(s)&&(r.aClockwise=!r.aClockwise)}}function c(r){const h=C(s),m=W(s);r.xRadius*=h,r.yRadius*=m;const d=h>Number.EPSILON?Math.atan2(s.elements[1],s.elements[0]):Math.atan2(-s.elements[3],s.elements[4]);r.aRotation+=d,R(s)&&(r.aStartAngle*=-1,r.aEndAngle*=-1,r.aClockwise=!r.aClockwise)}const u=i.subPaths;for(let r=0,h=u.length;r<h;r++){const d=u[r].curves;for(let a=0;a<d.length;a++){const l=d[a];l.isLineCurve?(e(l.v1),e(l.v2)):l.isCubicBezierCurve?(e(l.v0),e(l.v1),e(l.v2),e(l.v3)):l.isQuadraticBezierCurve?(e(l.v0),e(l.v1),e(l.v2)):l.isEllipseCurve&&(Z.set(l.aX,l.aY),e(Z),l.aX=Z.x,l.aY=Z.y,E(s)?t(l):c(l))}}}function R(i){const s=i.elements;return s[0]*s[4]-s[1]*s[3]<0}function E(i){const s=i.elements,e=s[0]*s[3]+s[1]*s[4];if(e===0)return!1;const t=C(i),c=W(i);return Math.abs(e/(t*c))>Number.EPSILON}function C(i){const s=i.elements;return Math.sqrt(s[0]*s[0]+s[1]*s[1])}function W(i){const s=i.elements;return Math.sqrt(s[3]*s[3]+s[4]*s[4])}function v(i,s,e){let t,c,u,r,h;const m=i+e,d=i-e,a=Math.sqrt(d*d+4*s*s);return m>0?(t=.5*(m+a),h=1/t,c=i*h*e-s*h*s):m<0?c=.5*(m-a):(t=.5*a,c=-.5*a),d>0?u=d+a:u=d-a,Math.abs(u)>2*Math.abs(s)?(h=-2*s/u,r=1/Math.sqrt(1+h*h),u=h*r):Math.abs(s)===0?(u=1,r=0):(h=-.5*u/s,u=1/Math.sqrt(1+h*h),r=h*u),d>0&&(h=u,u=-r,r=h),{rt1:t,rt2:c,cs:u,sn:r}}const A=[],U={},H=[],_=new at,Y=new at,P=new at,f=new at,Z=new q,D=new ht,nt=new at,rt=new DOMParser().parseFromString(j,"image/svg+xml");return G(rt.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4}),{paths:A,xml:rt.documentElement}}static createShapes(j){const G={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},N={loc:G.ORIGIN,t:0};function I(b,p,M,L){const y=b.x,k=p.x,w=M.x,S=L.x,R=b.y,E=p.y,C=M.y,W=L.y,v=(S-w)*(R-C)-(W-C)*(y-w),A=(k-y)*(R-C)-(E-R)*(y-w),U=(W-C)*(k-y)-(S-w)*(E-R),H=v/U,_=A/U;if(U===0&&v!==0||H<=0||H>=1||_<0||_>1)return null;if(v===0&&U===0){for(let Y=0;Y<2;Y++)if(Q(Y===0?M:L,b,p),N.loc==G.ORIGIN){const P=Y===0?M:L;return{x:P.x,y:P.y,t:N.t}}else if(N.loc==G.BETWEEN){const P=+(y+N.t*(k-y)).toPrecision(10),f=+(R+N.t*(E-R)).toPrecision(10);return{x:P,y:f,t:N.t}}return null}else{for(let f=0;f<2;f++)if(Q(f===0?M:L,b,p),N.loc==G.ORIGIN){const Z=f===0?M:L;return{x:Z.x,y:Z.y,t:N.t}}const Y=+(y+H*(k-y)).toPrecision(10),P=+(R+H*(E-R)).toPrecision(10);return{x:Y,y:P,t:H}}}function Q(b,p,M){const L=M.x-p.x,y=M.y-p.y,k=b.x-p.x,w=b.y-p.y,S=L*w-k*y;if(b.x===p.x&&b.y===p.y){N.loc=G.ORIGIN,N.t=0;return}if(b.x===M.x&&b.y===M.y){N.loc=G.DESTINATION,N.t=1;return}if(S<-Number.EPSILON){N.loc=G.LEFT;return}if(S>Number.EPSILON){N.loc=G.RIGHT;return}if(L*k<0||y*w<0){N.loc=G.BEHIND;return}if(Math.sqrt(L*L+y*y)<Math.sqrt(k*k+w*w)){N.loc=G.BEYOND;return}let R;L!==0?R=k/L:R=w/y,N.loc=G.BETWEEN,N.t=R}function tt(b,p){const M=[],L=[];for(let y=1;y<b.length;y++){const k=b[y-1],w=b[y];for(let S=1;S<p.length;S++){const R=p[S-1],E=p[S],C=I(k,w,R,E);C!==null&&M.find(W=>W.t<=C.t+Number.EPSILON&&W.t>=C.t-Number.EPSILON)===void 0&&(M.push(C),L.push(new q(C.x,C.y)))}}return L}function J(b,p,M){const L=new q;p.getCenter(L);const y=[];return M.forEach(k=>{k.boundingBox.containsPoint(L)&&tt(b,k.points).forEach(S=>{y.push({identifier:k.identifier,isCW:k.isCW,point:S})})}),y.sort((k,w)=>k.point.x-w.point.x),y}function X(b,p,M,L,y){(y==null||y==="")&&(y="nonzero");const k=new q;b.boundingBox.getCenter(k);const w=[new q(M,k.y),new q(L,k.y)],S=J(w,b.boundingBox,p);S.sort((A,U)=>A.point.x-U.point.x);const R=[],E=[];S.forEach(A=>{A.identifier===b.identifier?R.push(A):E.push(A)});const C=R[0].point.x,W=[];let v=0;for(;v<E.length&&E[v].point.x<C;)W.length>0&&W[W.length-1]===E[v].identifier?W.pop():W.push(E[v].identifier),v++;if(W.push(b.identifier),y==="evenodd"){const A=W.length%2===0,U=W[W.length-2];return{identifier:b.identifier,isHole:A,for:U}}else if(y==="nonzero"){let A=!0,U=null,H=null;for(let _=0;_<W.length;_++){const Y=W[_];A?(H=p[Y].isCW,A=!1,U=Y):H!==p[Y].isCW&&(H=p[Y].isCW,A=!0)}return{identifier:b.identifier,isHole:A,for:U}}else console.warn('fill-rule: "'+y+'" is currently not implemented.')}let $=999999999,V=-999999999,B=j.subPaths.map(b=>{const p=b.getPoints();let M=-999999999,L=999999999,y=-999999999,k=999999999;for(let w=0;w<p.length;w++){const S=p[w];S.y>M&&(M=S.y),S.y<L&&(L=S.y),S.x>y&&(y=S.x),S.x<k&&(k=S.x)}return V<=y&&(V=y+1),$>=k&&($=k-1),{curves:b.curves,points:p,isCW:Pt.isClockWise(p),identifier:-1,boundingBox:new wt(new q(k,L),new q(y,M))}});B=B.filter(b=>b.points.length>1);for(let b=0;b<B.length;b++)B[b].identifier=b;const ot=B.map(b=>X(b,B,$,V,j.userData?j.userData.style.fillRule:void 0)),F=[];return B.forEach(b=>{if(!ot[b.identifier].isHole){const M=new St;M.curves=b.curves,ot.filter(y=>y.isHole&&y.for===b.identifier).forEach(y=>{const k=B[y.identifier],w=new mt;w.curves=k.curves,M.holes.push(w)}),F.push(M)}}),F}static getStrokeStyle(j,z,G,N,I){return j=j!==void 0?j:1,z=z!==void 0?z:"#000",G=G!==void 0?G:"miter",N=N!==void 0?N:"butt",I=I!==void 0?I:4,{strokeColor:z,strokeWidth:j,strokeLineJoin:G,strokeLineCap:N,strokeMiterLimit:I}}static pointsToStroke(j,z,G,N){const I=[],Q=[],tt=[];if(Tt.pointsToStrokeWithBuffers(j,z,G,N,I,Q,tt)===0)return null;const J=new Nt;return J.setAttribute("position",new dt(I,3)),J.setAttribute("normal",new dt(Q,3)),J.setAttribute("uv",new dt(tt,2)),J}static pointsToStrokeWithBuffers(j,z,G,N,I,Q,tt,J){const X=new q,$=new q,V=new q,B=new q,ot=new q,F=new q,b=new q,p=new q,M=new q,L=new q,y=new q,k=new q,w=new q,S=new q,R=new q,E=new q,C=new q;G=G!==void 0?G:12,N=N!==void 0?N:.001,J=J!==void 0?J:0,j=d(j);const W=j.length;if(W<2)return 0;const v=j[0].equals(j[W-1]);let A,U=j[0],H;const _=z.strokeWidth/2,Y=1/(W-1);let P=0,f,Z,D,nt,rt=!1,yt=0,i=J*3,s=J*2;e(j[0],j[1],X).multiplyScalar(_),p.copy(j[0]).sub(X),M.copy(j[0]).add(X),L.copy(p),y.copy(M);for(let a=1;a<W;a++){A=j[a],a===W-1?v?H=j[1]:H=void 0:H=j[a+1];const l=X;if(e(U,A,l),V.copy(l).multiplyScalar(_),k.copy(A).sub(V),w.copy(A).add(V),f=P+Y,Z=!1,H!==void 0){e(A,H,$),V.copy($).multiplyScalar(_),S.copy(A).sub(V),R.copy(A).add(V),D=!0,V.subVectors(H,U),l.dot(V)<0&&(D=!1),a===1&&(rt=D),V.subVectors(H,A),V.normalize();const x=Math.abs(l.dot(V));if(x>Number.EPSILON){const g=_/x;V.multiplyScalar(-g),B.subVectors(A,U),ot.copy(B).setLength(g).add(V),E.copy(ot).negate();const o=ot.length(),n=B.length();B.divideScalar(n),F.subVectors(H,A);const T=F.length();switch(F.divideScalar(T),B.dot(E)<n&&F.dot(E)<T&&(Z=!0),C.copy(ot).add(A),E.add(A),nt=!1,Z?D?(R.copy(E),w.copy(E)):(S.copy(E),k.copy(E)):u(),z.strokeLineJoin){case"bevel":r(D,Z,f);break;case"round":h(D,Z),D?c(A,k,S,f,0):c(A,R,w,f,1);break;case"miter":case"miter-clip":default:const O=_*z.strokeMiterLimit/o;if(O<1)if(z.strokeLineJoin!=="miter-clip"){r(D,Z,f);break}else h(D,Z),D?(F.subVectors(C,k).multiplyScalar(O).add(k),b.subVectors(C,S).multiplyScalar(O).add(S),t(k,f,0),t(F,f,0),t(A,f,.5),t(A,f,.5),t(F,f,0),t(b,f,0),t(A,f,.5),t(b,f,0),t(S,f,0)):(F.subVectors(C,w).multiplyScalar(O).add(w),b.subVectors(C,R).multiplyScalar(O).add(R),t(w,f,1),t(F,f,1),t(A,f,.5),t(A,f,.5),t(F,f,1),t(b,f,1),t(A,f,.5),t(b,f,1),t(R,f,1));else Z?(D?(t(M,P,1),t(p,P,0),t(C,f,0),t(M,P,1),t(C,f,0),t(E,f,1)):(t(M,P,1),t(p,P,0),t(C,f,1),t(p,P,0),t(E,f,0),t(C,f,1)),D?S.copy(C):R.copy(C)):D?(t(k,f,0),t(C,f,0),t(A,f,.5),t(A,f,.5),t(C,f,0),t(S,f,0)):(t(w,f,1),t(C,f,1),t(A,f,.5),t(A,f,.5),t(C,f,1),t(R,f,1)),nt=!0;break}}else u()}else u();!v&&a===W-1&&m(j[0],L,y,D,!0,P),P=f,U=A,p.copy(S),M.copy(R)}if(!v)m(A,k,w,D,!1,f);else if(Z&&I){let a=C,l=E;rt!==D&&(a=E,l=C),D?(nt||rt)&&(l.toArray(I,0),l.toArray(I,9),nt&&a.toArray(I,3)):(nt||!rt)&&(l.toArray(I,3),l.toArray(I,9),nt&&a.toArray(I,0))}return yt;function e(a,l,x){return x.subVectors(l,a),x.set(-x.y,x.x).normalize()}function t(a,l,x){I&&(I[i]=a.x,I[i+1]=a.y,I[i+2]=0,Q&&(Q[i]=0,Q[i+1]=0,Q[i+2]=1),i+=3,tt&&(tt[s]=l,tt[s+1]=x,s+=2)),yt+=3}function c(a,l,x,g,o){X.copy(l).sub(a).normalize(),$.copy(x).sub(a).normalize();let n=Math.PI;const T=X.dot($);Math.abs(T)<1&&(n=Math.abs(Math.acos(T))),n/=G,V.copy(l);for(let O=0,et=G-1;O<et;O++)B.copy(V).rotateAround(a,n),t(V,g,o),t(B,g,o),t(a,g,.5),V.copy(B);t(B,g,o),t(x,g,o),t(a,g,.5)}function u(){t(M,P,1),t(p,P,0),t(k,f,0),t(M,P,1),t(k,f,0),t(w,f,1)}function r(a,l,x){l?a?(t(M,P,1),t(p,P,0),t(k,f,0),t(M,P,1),t(k,f,0),t(E,f,1),t(k,x,0),t(S,x,0),t(E,x,.5)):(t(M,P,1),t(p,P,0),t(w,f,1),t(p,P,0),t(E,f,0),t(w,f,1),t(w,x,1),t(E,x,0),t(R,x,1)):a?(t(k,x,0),t(S,x,0),t(A,x,.5)):(t(w,x,1),t(R,x,0),t(A,x,.5))}function h(a,l){l&&(a?(t(M,P,1),t(p,P,0),t(k,f,0),t(M,P,1),t(k,f,0),t(E,f,1),t(k,P,0),t(A,f,.5),t(E,f,1),t(A,f,.5),t(S,P,0),t(E,f,1)):(t(M,P,1),t(p,P,0),t(w,f,1),t(p,P,0),t(E,f,0),t(w,f,1),t(w,P,1),t(E,f,0),t(A,f,.5),t(A,f,.5),t(E,f,0),t(R,P,1)))}function m(a,l,x,g,o,n){switch(z.strokeLineCap){case"round":o?c(a,x,l,n,.5):c(a,l,x,n,.5);break;case"square":if(o)X.subVectors(l,a),$.set(X.y,-X.x),V.addVectors(X,$).add(a),B.subVectors($,X).add(a),g?(V.toArray(I,3),B.toArray(I,0),B.toArray(I,9)):(V.toArray(I,3),tt[7]===1?B.toArray(I,9):V.toArray(I,9),B.toArray(I,0));else{X.subVectors(x,a),$.set(X.y,-X.x),V.addVectors(X,$).add(a),B.subVectors($,X).add(a);const T=I.length;g?(V.toArray(I,T-3),B.toArray(I,T-6),B.toArray(I,T-12)):(B.toArray(I,T-6),V.toArray(I,T-3),B.toArray(I,T-12))}break}}function d(a){let l=!1;for(let g=1,o=a.length-1;g<o;g++)if(a[g].distanceTo(a[g+1])<N){l=!0;break}if(!l)return a;const x=[];x.push(a[0]);for(let g=1,o=a.length-1;g<o;g++)a[g].distanceTo(a[g+1])>=N&&x.push(a[g]);return x.push(a[a.length-1]),x}}}export{Tt as SVGLoader};
